!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e,r){"use strict";const n=2.3283064365386963e-10;class i{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*n,t=69069*t+1>>>0,this._s1=t*n,t=69069*t+1>>>0,this._s2=t*n,this._c=1,this}getUniform(){let t=2091639*this._s0+this._c*n;return this._s0=this._s1,this._s1=this._s2,this._c=0|t,this._s2=t-this._c,this._s2}getUniformInt(t,e){let r=Math.max(t,e),n=Math.min(t,e);return Math.floor(this.getUniform()*(r-n+1))+n}getNormal(t=0,e=1){let r,n,i;do{r=2*this.getUniform()-1,n=2*this.getUniform()-1,i=r*r+n*n}while(i>1||0==i);return t+r*Math.sqrt(-2*Math.log(i)/i)*e}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){let e=[],r=t.slice();for(;r.length;){let t=r.indexOf(this.getItem(r));e.push(r.splice(t,1)[0])}return e}getWeightedValue(t){let e=0;for(let r in t)e+=t[r];let r,n=this.getUniform()*e,i=0;for(r in t)if(i+=t[r],n<i)return r;return r}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return(new i).setState(this.getState())}}e.a=(new i).setSeed(Date.now())},function(t,e,r){"use strict";function n(t,e){return(t%e+e)%e}function i(t,e=0,r=1){return t<e?e:t>r?r:t}function a(t){return t.charAt(0).toUpperCase()+t.substring(1)}function s(t,...e){let r=s.map;return t.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,(function(n,i,s,o){if("%"==t.charAt(o-1))return n.substring(1);if(!e.length)return n;let l=e[0],u=(i||s).split(","),h=u.shift()||"",c=r[h.toLowerCase()];if(!c)return n;l=e.shift();let f=l[c].apply(l,u),d=h.charAt(0);return d!=d.toLowerCase()&&(f=a(f)),f}))}r.r(e),r.d(e,"mod",(function(){return n})),r.d(e,"clamp",(function(){return i})),r.d(e,"capitalize",(function(){return a})),r.d(e,"format",(function(){return s})),s.map={s:"toString"}},function(t,e,r){(function(t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a="Expected a function",s="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",u="[object Array]",h="[object Boolean]",c="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",y="[object Object]",m="[object RegExp]",_="[object Set]",w="[object String]",b="[object Symbol]",k="[object WeakMap]",x="[object ArrayBuffer]",C="[object DataView]",P="[object Float32Array]",R="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",M="[object Uint8Array]",O="[object Uint16Array]",B="[object Uint32Array]",E=/\b__p \+= '';/g,I=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,$=RegExp(j.source),L=RegExp(D.source),z=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,N=/<%=([\s\S]+?)%>/g,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,X=RegExp(q.source),G=/^\s+|\s+$/g,Y=/^\s+/,J=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,st=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ut=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ht=/($^)/,ct=/['\n\r\u2028\u2029\\]/g,ft="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",gt="["+dt+"]",vt="["+ft+"]",yt="\\d+",mt="[\\u2700-\\u27bf]",_t="[a-z\\xdf-\\xf6\\xf8-\\xff]",wt="[^\\ud800-\\udfff"+dt+yt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",bt="\\ud83c[\\udffb-\\udfff]",kt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Pt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Rt="(?:"+_t+"|"+wt+")",St="(?:"+Pt+"|"+wt+")",Tt="(?:"+vt+"|"+bt+")"+"?",At="[\\ufe0e\\ufe0f]?"+Tt+("(?:\\u200d(?:"+[kt,xt,Ct].join("|")+")[\\ufe0e\\ufe0f]?"+Tt+")*"),Mt="(?:"+[mt,xt,Ct].join("|")+")"+At,Ot="(?:"+[kt+vt+"?",vt,xt,Ct,pt].join("|")+")",Bt=RegExp("['’]","g"),Et=RegExp(vt,"g"),It=RegExp(bt+"(?="+bt+")|"+Ot+At,"g"),Wt=RegExp([Pt+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[gt,Pt,"$"].join("|")+")",St+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[gt,Pt+Rt,"$"].join("|")+")",Pt+"?"+Rt+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Pt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yt,Mt].join("|"),"g"),jt=RegExp("[\\u200d\\ud800-\\udfff"+ft+"\\ufe0e\\ufe0f]"),Dt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lt=-1,zt={};zt[P]=zt[R]=zt[S]=zt[T]=zt[A]=zt[M]=zt["[object Uint8ClampedArray]"]=zt[O]=zt[B]=!0,zt[l]=zt[u]=zt[x]=zt[h]=zt[C]=zt[c]=zt[f]=zt[d]=zt[g]=zt[v]=zt[y]=zt[m]=zt[_]=zt[w]=zt[k]=!1;var Ht={};Ht[l]=Ht[u]=Ht[x]=Ht[C]=Ht[h]=Ht[c]=Ht[P]=Ht[R]=Ht[S]=Ht[T]=Ht[A]=Ht[g]=Ht[v]=Ht[y]=Ht[m]=Ht[_]=Ht[w]=Ht[b]=Ht[M]=Ht["[object Uint8ClampedArray]"]=Ht[O]=Ht[B]=!0,Ht[f]=Ht[d]=Ht[k]=!1;var Nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=parseFloat,Vt=parseInt,Ut="object"==typeof t&&t&&t.Object===Object&&t,qt="object"==typeof self&&self&&self.Object===Object&&self,Xt=Ut||qt||Function("return this")(),Gt=e&&!e.nodeType&&e,Yt=Gt&&"object"==typeof n&&n&&!n.nodeType&&n,Jt=Yt&&Yt.exports===Gt,Kt=Jt&&Ut.process,Zt=function(){try{var t=Yt&&Yt.require&&Yt.require("util").types;return t||Kt&&Kt.binding&&Kt.binding("util")}catch(t){}}(),Qt=Zt&&Zt.isArrayBuffer,te=Zt&&Zt.isDate,ee=Zt&&Zt.isMap,re=Zt&&Zt.isRegExp,ne=Zt&&Zt.isSet,ie=Zt&&Zt.isTypedArray;function ae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function se(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var s=t[i];e(n,s,r(s),t)}return n}function oe(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function le(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function ue(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function he(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var s=t[r];e(s,r,t)&&(a[i++]=s)}return a}function ce(t,e){return!!(null==t?0:t.length)&&be(t,e,0)>-1}function fe(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function de(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function ge(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function ve(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function ye(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var me=Pe("length");function _e(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function we(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function be(t,e,r){return e==e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):we(t,xe,r)}function ke(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function xe(t){return t!=t}function Ce(t,e){var r=null==t?0:t.length;return r?Te(t,e)/r:NaN}function Pe(t){return function(e){return null==e?void 0:e[t]}}function Re(t){return function(e){return null==t?void 0:t[e]}}function Se(t,e,r,n,i){return i(t,(function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)})),r}function Te(t,e){for(var r,n=-1,i=t.length;++n<i;){var a=e(t[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r}function Ae(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Me(t){return function(e){return t(e)}}function Oe(t,e){return de(e,(function(e){return t[e]}))}function Be(t,e){return t.has(e)}function Ee(t,e){for(var r=-1,n=t.length;++r<n&&be(e,t[r],0)>-1;);return r}function Ie(t,e){for(var r=t.length;r--&&be(e,t[r],0)>-1;);return r}function We(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var je=Re({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n",ſ:"s"}),De=Re({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $e(t){return"\\"+Nt[t]}function Le(t){return jt.test(t)}function ze(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function He(t,e){return function(r){return t(e(r))}}function Ne(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r];o!==e&&o!==s||(t[r]=s,a[i++]=r)}return a}function Fe(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function Ve(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function Ue(t){return Le(t)?function(t){var e=It.lastIndex=0;for(;It.test(t);)++e;return e}(t):me(t)}function qe(t){return Le(t)?function(t){return t.match(It)||[]}(t):function(t){return t.split("")}(t)}var Xe=Re({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ge=function t(e){var r,n=(e=null==e?Xt:Ge.defaults(Xt.Object(),e,Ge.pick(Xt,$t))).Array,i=e.Date,ft=e.Error,dt=e.Function,pt=e.Math,gt=e.Object,vt=e.RegExp,yt=e.String,mt=e.TypeError,_t=n.prototype,wt=dt.prototype,bt=gt.prototype,kt=e["__core-js_shared__"],xt=wt.toString,Ct=bt.hasOwnProperty,Pt=0,Rt=(r=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",St=bt.toString,Tt=xt.call(gt),At=Xt._,Mt=vt("^"+xt.call(Ct).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ot=Jt?e.Buffer:void 0,It=e.Symbol,jt=e.Uint8Array,Nt=Ot?Ot.allocUnsafe:void 0,Ut=He(gt.getPrototypeOf,gt),qt=gt.create,Gt=bt.propertyIsEnumerable,Yt=_t.splice,Kt=It?It.isConcatSpreadable:void 0,Zt=It?It.iterator:void 0,me=It?It.toStringTag:void 0,Re=function(){try{var t=Qi(gt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ye=e.clearTimeout!==Xt.clearTimeout&&e.clearTimeout,Je=i&&i.now!==Xt.Date.now&&i.now,Ke=e.setTimeout!==Xt.setTimeout&&e.setTimeout,Ze=pt.ceil,Qe=pt.floor,tr=gt.getOwnPropertySymbols,er=Ot?Ot.isBuffer:void 0,rr=e.isFinite,nr=_t.join,ir=He(gt.keys,gt),ar=pt.max,sr=pt.min,or=i.now,lr=e.parseInt,ur=pt.random,hr=_t.reverse,cr=Qi(e,"DataView"),fr=Qi(e,"Map"),dr=Qi(e,"Promise"),pr=Qi(e,"Set"),gr=Qi(e,"WeakMap"),vr=Qi(gt,"create"),yr=gr&&new gr,mr={},_r=Ra(cr),wr=Ra(fr),br=Ra(dr),kr=Ra(pr),xr=Ra(gr),Cr=It?It.prototype:void 0,Pr=Cr?Cr.valueOf:void 0,Rr=Cr?Cr.toString:void 0;function Sr(t){if(Fs(t)&&!Bs(t)&&!(t instanceof Or)){if(t instanceof Mr)return t;if(Ct.call(t,"__wrapped__"))return Sa(t)}return new Mr(t)}var Tr=function(){function t(){}return function(e){if(!Ns(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Ar(){}function Mr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Or(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Br(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Er(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ir;++e<r;)this.add(t[e])}function jr(t){var e=this.__data__=new Er(t);this.size=e.size}function Dr(t,e){var r=Bs(t),n=!r&&Os(t),i=!r&&!n&&js(t),a=!r&&!n&&!i&&Ks(t),s=r||n||i||a,o=s?Ae(t.length,yt):[],l=o.length;for(var u in t)!e&&!Ct.call(t,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||sa(u,l))||o.push(u);return o}function $r(t){var e=t.length;return e?t[jn(0,e-1)]:void 0}function Lr(t,e){return xa(yi(t),Gr(e,0,t.length))}function zr(t){return xa(yi(t))}function Hr(t,e,r){(void 0===r||Ts(t[e],r))&&(void 0!==r||e in t)||qr(t,e,r)}function Nr(t,e,r){var n=t[e];Ct.call(t,e)&&Ts(n,r)&&(void 0!==r||e in t)||qr(t,e,r)}function Fr(t,e){for(var r=t.length;r--;)if(Ts(t[r][0],e))return r;return-1}function Vr(t,e,r,n){return Qr(t,(function(t,i,a){e(n,t,r(t),a)})),n}function Ur(t,e){return t&&mi(e,wo(e),t)}function qr(t,e,r){"__proto__"==e&&Re?Re(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Xr(t,e){for(var r=-1,i=e.length,a=n(i),s=null==t;++r<i;)a[r]=s?void 0:go(t,e[r]);return a}function Gr(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Yr(t,e,r,n,i,a){var s,o=1&e,u=2&e,f=4&e;if(r&&(s=i?r(t,n,i,a):r(t)),void 0!==s)return s;if(!Ns(t))return t;var k=Bs(t);if(k){if(s=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Ct.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!o)return yi(t,s)}else{var E=ra(t),I=E==d||E==p;if(js(t))return ci(t,o);if(E==y||E==l||I&&!i){if(s=u||I?{}:ia(t),!o)return u?function(t,e){return mi(t,ea(t),e)}(t,function(t,e){return t&&mi(e,bo(e),t)}(s,t)):function(t,e){return mi(t,ta(t),e)}(t,Ur(s,t))}else{if(!Ht[E])return i?t:{};s=function(t,e,r){var n=t.constructor;switch(e){case x:return fi(t);case h:case c:return new n(+t);case C:return function(t,e){var r=e?fi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case P:case R:case S:case T:case A:case M:case"[object Uint8ClampedArray]":case O:case B:return di(t,r);case g:return new n;case v:case w:return new n(t);case m:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new n;case b:return i=t,Pr?gt(Pr.call(i)):{}}var i}(t,E,o)}}a||(a=new jr);var W=a.get(t);if(W)return W;a.set(t,s),Gs(t)?t.forEach((function(n){s.add(Yr(n,e,r,n,t,a))})):Vs(t)&&t.forEach((function(n,i){s.set(i,Yr(n,e,r,i,t,a))}));var j=k?void 0:(f?u?qi:Ui:u?bo:wo)(t);return oe(j||t,(function(n,i){j&&(n=t[i=n]),Nr(s,i,Yr(n,e,r,i,t,a))})),s}function Jr(t,e,r){var n=r.length;if(null==t)return!n;for(t=gt(t);n--;){var i=r[n],a=e[i],s=t[i];if(void 0===s&&!(i in t)||!a(s))return!1}return!0}function Kr(t,e,r){if("function"!=typeof t)throw new mt(a);return _a((function(){t.apply(void 0,r)}),e)}function Zr(t,e,r,n){var i=-1,a=ce,s=!0,o=t.length,l=[],u=e.length;if(!o)return l;r&&(e=de(e,Me(r))),n?(a=fe,s=!1):e.length>=200&&(a=Be,s=!1,e=new Wr(e));t:for(;++i<o;){var h=t[i],c=null==r?h:r(h);if(h=n||0!==h?h:0,s&&c==c){for(var f=u;f--;)if(e[f]===c)continue t;l.push(h)}else a(e,c,n)||l.push(h)}return l}Sr.templateSettings={escape:z,evaluate:H,interpolate:N,variable:"",imports:{_:Sr}},Sr.prototype=Ar.prototype,Sr.prototype.constructor=Sr,Mr.prototype=Tr(Ar.prototype),Mr.prototype.constructor=Mr,Or.prototype=Tr(Ar.prototype),Or.prototype.constructor=Or,Br.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},Br.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Br.prototype.get=function(t){var e=this.__data__;if(vr){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ct.call(e,t)?e[t]:void 0},Br.prototype.has=function(t){var e=this.__data__;return vr?void 0!==e[t]:Ct.call(e,t)},Br.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vr&&void 0===e?"__lodash_hash_undefined__":e,this},Er.prototype.clear=function(){this.__data__=[],this.size=0},Er.prototype.delete=function(t){var e=this.__data__,r=Fr(e,t);return!(r<0)&&(r==e.length-1?e.pop():Yt.call(e,r,1),--this.size,!0)},Er.prototype.get=function(t){var e=this.__data__,r=Fr(e,t);return r<0?void 0:e[r][1]},Er.prototype.has=function(t){return Fr(this.__data__,t)>-1},Er.prototype.set=function(t,e){var r=this.__data__,n=Fr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Ir.prototype.clear=function(){this.size=0,this.__data__={hash:new Br,map:new(fr||Er),string:new Br}},Ir.prototype.delete=function(t){var e=Ki(this,t).delete(t);return this.size-=e?1:0,e},Ir.prototype.get=function(t){return Ki(this,t).get(t)},Ir.prototype.has=function(t){return Ki(this,t).has(t)},Ir.prototype.set=function(t,e){var r=Ki(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Wr.prototype.add=Wr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Wr.prototype.has=function(t){return this.__data__.has(t)},jr.prototype.clear=function(){this.__data__=new Er,this.size=0},jr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},jr.prototype.get=function(t){return this.__data__.get(t)},jr.prototype.has=function(t){return this.__data__.has(t)},jr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Er){var n=r.__data__;if(!fr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ir(n)}return r.set(t,e),this.size=r.size,this};var Qr=bi(ln),tn=bi(un,!0);function en(t,e){var r=!0;return Qr(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function rn(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],s=e(a);if(null!=s&&(void 0===o?s==s&&!Js(s):r(s,o)))var o=s,l=a}return l}function nn(t,e){var r=[];return Qr(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function an(t,e,r,n,i){var a=-1,s=t.length;for(r||(r=aa),i||(i=[]);++a<s;){var o=t[a];e>0&&r(o)?e>1?an(o,e-1,r,n,i):pe(i,o):n||(i[i.length]=o)}return i}var sn=ki(),on=ki(!0);function ln(t,e){return t&&sn(t,e,wo)}function un(t,e){return t&&on(t,e,wo)}function hn(t,e){return he(e,(function(e){return Ls(t[e])}))}function cn(t,e){for(var r=0,n=(e=oi(e,t)).length;null!=t&&r<n;)t=t[Pa(e[r++])];return r&&r==n?t:void 0}function fn(t,e,r){var n=e(t);return Bs(t)?n:pe(n,r(t))}function dn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":me&&me in gt(t)?function(t){var e=Ct.call(t,me),r=t[me];try{t[me]=void 0;var n=!0}catch(t){}var i=St.call(t);n&&(e?t[me]=r:delete t[me]);return i}(t):function(t){return St.call(t)}(t)}function pn(t,e){return t>e}function gn(t,e){return null!=t&&Ct.call(t,e)}function vn(t,e){return null!=t&&e in gt(t)}function yn(t,e,r){for(var i=r?fe:ce,a=t[0].length,s=t.length,o=s,l=n(s),u=1/0,h=[];o--;){var c=t[o];o&&e&&(c=de(c,Me(e))),u=sr(c.length,u),l[o]=!r&&(e||a>=120&&c.length>=120)?new Wr(o&&c):void 0}c=t[0];var f=-1,d=l[0];t:for(;++f<a&&h.length<u;){var p=c[f],g=e?e(p):p;if(p=r||0!==p?p:0,!(d?Be(d,g):i(h,g,r))){for(o=s;--o;){var v=l[o];if(!(v?Be(v,g):i(t[o],g,r)))continue t}d&&d.push(g),h.push(p)}}return h}function mn(t,e,r){var n=null==(t=ga(t,e=oi(e,t)))?t:t[Pa($a(e))];return null==n?void 0:ae(n,t,r)}function _n(t){return Fs(t)&&dn(t)==l}function wn(t,e,r,n,i){return t===e||(null==t||null==e||!Fs(t)&&!Fs(e)?t!=t&&e!=e:function(t,e,r,n,i,a){var s=Bs(t),o=Bs(e),d=s?u:ra(t),p=o?u:ra(e),k=(d=d==l?y:d)==y,P=(p=p==l?y:p)==y,R=d==p;if(R&&js(t)){if(!js(e))return!1;s=!0,k=!1}if(R&&!k)return a||(a=new jr),s||Ks(t)?Fi(t,e,r,n,i,a):function(t,e,r,n,i,a,s){switch(r){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!a(new jt(t),new jt(e)));case h:case c:case v:return Ts(+t,+e);case f:return t.name==e.name&&t.message==e.message;case m:case w:return t==e+"";case g:var o=ze;case _:var l=1&n;if(o||(o=Fe),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;n|=2,s.set(t,e);var d=Fi(o(t),o(e),n,i,a,s);return s.delete(t),d;case b:if(Pr)return Pr.call(t)==Pr.call(e)}return!1}(t,e,d,r,n,i,a);if(!(1&r)){var S=k&&Ct.call(t,"__wrapped__"),T=P&&Ct.call(e,"__wrapped__");if(S||T){var A=S?t.value():t,M=T?e.value():e;return a||(a=new jr),i(A,M,r,n,a)}}if(!R)return!1;return a||(a=new jr),function(t,e,r,n,i,a){var s=1&r,o=Ui(t),l=o.length,u=Ui(e).length;if(l!=u&&!s)return!1;var h=l;for(;h--;){var c=o[h];if(!(s?c in e:Ct.call(e,c)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var d=!0;a.set(t,e),a.set(e,t);var p=s;for(;++h<l;){c=o[h];var g=t[c],v=e[c];if(n)var y=s?n(v,g,c,e,t,a):n(g,v,c,t,e,a);if(!(void 0===y?g===v||i(g,v,r,n,a):y)){d=!1;break}p||(p="constructor"==c)}if(d&&!p){var m=t.constructor,_=e.constructor;m!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,r,n,i,a)}(t,e,r,n,wn,i))}function bn(t,e,r,n){var i=r.length,a=i,s=!n;if(null==t)return!a;for(t=gt(t);i--;){var o=r[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){var l=(o=r[i])[0],u=t[l],h=o[1];if(s&&o[2]){if(void 0===u&&!(l in t))return!1}else{var c=new jr;if(n)var f=n(u,h,l,t,e,c);if(!(void 0===f?wn(h,u,3,n,c):f))return!1}}return!0}function kn(t){return!(!Ns(t)||(e=t,Rt&&Rt in e))&&(Ls(t)?Mt:st).test(Ra(t));var e}function xn(t){return"function"==typeof t?t:null==t?qo:"object"==typeof t?Bs(t)?An(t[0],t[1]):Tn(t):el(t)}function Cn(t){if(!ca(t))return ir(t);var e=[];for(var r in gt(t))Ct.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Pn(t){if(!Ns(t))return function(t){var e=[];if(null!=t)for(var r in gt(t))e.push(r);return e}(t);var e=ca(t),r=[];for(var n in t)("constructor"!=n||!e&&Ct.call(t,n))&&r.push(n);return r}function Rn(t,e){return t<e}function Sn(t,e){var r=-1,i=Is(t)?n(t.length):[];return Qr(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}function Tn(t){var e=Zi(t);return 1==e.length&&e[0][2]?da(e[0][0],e[0][1]):function(r){return r===t||bn(r,t,e)}}function An(t,e){return la(t)&&fa(e)?da(Pa(t),e):function(r){var n=go(r,t);return void 0===n&&n===e?vo(r,t):wn(e,n,3)}}function Mn(t,e,r,n,i){t!==e&&sn(e,(function(a,s){if(i||(i=new jr),Ns(a))!function(t,e,r,n,i,a,s){var o=ya(t,r),l=ya(e,r),u=s.get(l);if(u)return void Hr(t,r,u);var h=a?a(o,l,r+"",t,e,s):void 0,c=void 0===h;if(c){var f=Bs(l),d=!f&&js(l),p=!f&&!d&&Ks(l);h=l,f||d||p?Bs(o)?h=o:Ws(o)?h=yi(o):d?(c=!1,h=ci(l,!0)):p?(c=!1,h=di(l,!0)):h=[]:qs(l)||Os(l)?(h=o,Os(o)?h=ao(o):Ns(o)&&!Ls(o)||(h=ia(l))):c=!1}c&&(s.set(l,h),i(h,l,n,a,s),s.delete(l));Hr(t,r,h)}(t,e,s,r,Mn,n,i);else{var o=n?n(ya(t,s),a,s+"",t,e,i):void 0;void 0===o&&(o=a),Hr(t,s,o)}}),bo)}function On(t,e){var r=t.length;if(r)return sa(e+=e<0?r:0,r)?t[e]:void 0}function Bn(t,e,r){var n=-1;return e=de(e.length?e:[qo],Me(Ji())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Sn(t,(function(t,r,i){return{criteria:de(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,r){var n=-1,i=t.criteria,a=e.criteria,s=i.length,o=r.length;for(;++n<s;){var l=pi(i[n],a[n]);if(l){if(n>=o)return l;var u=r[n];return l*("desc"==u?-1:1)}}return t.index-e.index}(t,e,r)}))}function En(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var s=e[n],o=cn(t,s);r(o,s)&&Hn(a,oi(s,t),o)}return a}function In(t,e,r,n){var i=n?ke:be,a=-1,s=e.length,o=t;for(t===e&&(e=yi(e)),r&&(o=de(t,Me(r)));++a<s;)for(var l=0,u=e[a],h=r?r(u):u;(l=i(o,h,l,n))>-1;)o!==t&&Yt.call(o,l,1),Yt.call(t,l,1);return t}function Wn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;sa(i)?Yt.call(t,i,1):Qn(t,i)}}return t}function jn(t,e){return t+Qe(ur()*(e-t+1))}function Dn(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Qe(e/2))&&(t+=t)}while(e);return r}function $n(t,e){return wa(pa(t,e,qo),t+"")}function Ln(t){return $r(Ao(t))}function zn(t,e){var r=Ao(t);return xa(r,Gr(e,0,r.length))}function Hn(t,e,r,n){if(!Ns(t))return t;for(var i=-1,a=(e=oi(e,t)).length,s=a-1,o=t;null!=o&&++i<a;){var l=Pa(e[i]),u=r;if(i!=s){var h=o[l];void 0===(u=n?n(h,l,o):void 0)&&(u=Ns(h)?h:sa(e[i+1])?[]:{})}Nr(o,l,u),o=o[l]}return t}var Nn=yr?function(t,e){return yr.set(t,e),t}:qo,Fn=Re?function(t,e){return Re(t,"toString",{configurable:!0,enumerable:!1,value:Fo(e),writable:!0})}:qo;function Vn(t){return xa(Ao(t))}function Un(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var s=n(a);++i<a;)s[i]=t[i+e];return s}function qn(t,e){var r;return Qr(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function Xn(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var a=n+i>>>1,s=t[a];null!==s&&!Js(s)&&(r?s<=e:s<e)?n=a+1:i=a}return i}return Gn(t,e,qo,r)}function Gn(t,e,r,n){e=r(e);for(var i=0,a=null==t?0:t.length,s=e!=e,o=null===e,l=Js(e),u=void 0===e;i<a;){var h=Qe((i+a)/2),c=r(t[h]),f=void 0!==c,d=null===c,p=c==c,g=Js(c);if(s)var v=n||p;else v=u?p&&(n||f):o?p&&f&&(n||!d):l?p&&f&&!d&&(n||!g):!d&&!g&&(n?c<=e:c<e);v?i=h+1:a=h}return sr(a,4294967294)}function Yn(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var s=t[r],o=e?e(s):s;if(!r||!Ts(o,l)){var l=o;a[i++]=0===s?0:s}}return a}function Jn(t){return"number"==typeof t?t:Js(t)?NaN:+t}function Kn(t){if("string"==typeof t)return t;if(Bs(t))return de(t,Kn)+"";if(Js(t))return Rr?Rr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Zn(t,e,r){var n=-1,i=ce,a=t.length,s=!0,o=[],l=o;if(r)s=!1,i=fe;else if(a>=200){var u=e?null:Di(t);if(u)return Fe(u);s=!1,i=Be,l=new Wr}else l=e?[]:o;t:for(;++n<a;){var h=t[n],c=e?e(h):h;if(h=r||0!==h?h:0,s&&c==c){for(var f=l.length;f--;)if(l[f]===c)continue t;e&&l.push(c),o.push(h)}else i(l,c,r)||(l!==o&&l.push(c),o.push(h))}return o}function Qn(t,e){return null==(t=ga(t,e=oi(e,t)))||delete t[Pa($a(e))]}function ti(t,e,r,n){return Hn(t,e,r(cn(t,e)),n)}function ei(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?Un(t,n?0:a,n?a+1:i):Un(t,n?a+1:0,n?i:a)}function ri(t,e){var r=t;return r instanceof Or&&(r=r.value()),ge(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),r)}function ni(t,e,r){var i=t.length;if(i<2)return i?Zn(t[0]):[];for(var a=-1,s=n(i);++a<i;)for(var o=t[a],l=-1;++l<i;)l!=a&&(s[a]=Zr(s[a]||o,t[l],e,r));return Zn(an(s,1),e,r)}function ii(t,e,r){for(var n=-1,i=t.length,a=e.length,s={};++n<i;){var o=n<a?e[n]:void 0;r(s,t[n],o)}return s}function ai(t){return Ws(t)?t:[]}function si(t){return"function"==typeof t?t:qo}function oi(t,e){return Bs(t)?t:la(t,e)?[t]:Ca(so(t))}var li=$n;function ui(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Un(t,e,r)}var hi=Ye||function(t){return Xt.clearTimeout(t)};function ci(t,e){if(e)return t.slice();var r=t.length,n=Nt?Nt(r):new t.constructor(r);return t.copy(n),n}function fi(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function di(t,e){var r=e?fi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var r=void 0!==t,n=null===t,i=t==t,a=Js(t),s=void 0!==e,o=null===e,l=e==e,u=Js(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||n&&s&&l||!r&&l||!i)return 1;if(!n&&!a&&!u&&t<e||u&&r&&i&&!n&&!a||o&&r&&i||!s&&i||!l)return-1}return 0}function gi(t,e,r,i){for(var a=-1,s=t.length,o=r.length,l=-1,u=e.length,h=ar(s-o,0),c=n(u+h),f=!i;++l<u;)c[l]=e[l];for(;++a<o;)(f||a<s)&&(c[r[a]]=t[a]);for(;h--;)c[l++]=t[a++];return c}function vi(t,e,r,i){for(var a=-1,s=t.length,o=-1,l=r.length,u=-1,h=e.length,c=ar(s-l,0),f=n(c+h),d=!i;++a<c;)f[a]=t[a];for(var p=a;++u<h;)f[p+u]=e[u];for(;++o<l;)(d||a<s)&&(f[p+r[o]]=t[a++]);return f}function yi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function mi(t,e,r,n){var i=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=n?n(r[o],t[o],o,r,t):void 0;void 0===l&&(l=t[o]),i?qr(r,o,l):Nr(r,o,l)}return r}function _i(t,e){return function(r,n){var i=Bs(r)?se:Vr,a=e?e():{};return i(r,t,Ji(n,2),a)}}function wi(t){return $n((function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&oa(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),e=gt(e);++n<i;){var o=r[n];o&&t(e,o,n,a)}return e}))}function bi(t,e){return function(r,n){if(null==r)return r;if(!Is(r))return t(r,n);for(var i=r.length,a=e?i:-1,s=gt(r);(e?a--:++a<i)&&!1!==n(s[a],a,s););return r}}function ki(t){return function(e,r,n){for(var i=-1,a=gt(e),s=n(e),o=s.length;o--;){var l=s[t?o:++i];if(!1===r(a[l],l,a))break}return e}}function xi(t){return function(e){var r=Le(e=so(e))?qe(e):void 0,n=r?r[0]:e.charAt(0),i=r?ui(r,1).join(""):e.slice(1);return n[t]()+i}}function Ci(t){return function(e){return ge(zo(Bo(e).replace(Bt,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Tr(t.prototype),n=t.apply(r,e);return Ns(n)?n:r}}function Ri(t){return function(e,r,n){var i=gt(e);if(!Is(e)){var a=Ji(r,3);e=wo(e),r=function(t){return a(i[t],t,i)}}var s=t(e,r,n);return s>-1?i[a?e[s]:s]:void 0}}function Si(t){return Vi((function(e){var r=e.length,n=r,i=Mr.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new mt(a);if(i&&!o&&"wrapper"==Gi(s))var o=new Mr([],!0)}for(n=o?n:r;++n<r;){var l=Gi(s=e[n]),u="wrapper"==l?Xi(s):void 0;o=u&&ua(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?o[Gi(u[0])].apply(o,u[3]):1==s.length&&ua(s)?o[l]():o.thru(s)}return function(){var t=arguments,n=t[0];if(o&&1==t.length&&Bs(n))return o.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}}))}function Ti(t,e,r,i,a,s,o,l,u,h){var c=128&e,f=1&e,d=2&e,p=24&e,g=512&e,v=d?void 0:Pi(t);return function y(){for(var m=arguments.length,_=n(m),w=m;w--;)_[w]=arguments[w];if(p)var b=Yi(y),k=We(_,b);if(i&&(_=gi(_,i,a,p)),s&&(_=vi(_,s,o,p)),m-=k,p&&m<h){var x=Ne(_,b);return Wi(t,e,Ti,y.placeholder,r,_,x,l,u,h-m)}var C=f?r:this,P=d?C[t]:t;return m=_.length,l?_=va(_,l):g&&m>1&&_.reverse(),c&&u<m&&(_.length=u),this&&this!==Xt&&this instanceof y&&(P=v||Pi(P)),P.apply(C,_)}}function Ai(t,e){return function(r,n){return function(t,e,r,n){return ln(t,(function(t,i,a){e(n,r(t),i,a)})),n}(r,t,e(n),{})}}function Mi(t,e){return function(r,n){var i;if(void 0===r&&void 0===n)return e;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=Kn(r),n=Kn(n)):(r=Jn(r),n=Jn(n)),i=t(r,n)}return i}}function Oi(t){return Vi((function(e){return e=de(e,Me(Ji())),$n((function(r){var n=this;return t(e,(function(t){return ae(t,n,r)}))}))}))}function Bi(t,e){var r=(e=void 0===e?" ":Kn(e)).length;if(r<2)return r?Dn(e,t):e;var n=Dn(e,Ze(t/Ue(e)));return Le(e)?ui(qe(n),0,t).join(""):n.slice(0,t)}function Ei(t){return function(e,r,i){return i&&"number"!=typeof i&&oa(e,r,i)&&(r=i=void 0),e=eo(e),void 0===r?(r=e,e=0):r=eo(r),function(t,e,r,i){for(var a=-1,s=ar(Ze((e-t)/(r||1)),0),o=n(s);s--;)o[i?s:++a]=t,t+=r;return o}(e,r,i=void 0===i?e<r?1:-1:eo(i),t)}}function Ii(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=io(e),r=io(r)),t(e,r)}}function Wi(t,e,r,n,i,a,s,o,l,u){var h=8&e;e|=h?32:64,4&(e&=~(h?64:32))||(e&=-4);var c=[t,e,i,h?a:void 0,h?s:void 0,h?void 0:a,h?void 0:s,o,l,u],f=r.apply(void 0,c);return ua(t)&&ma(f,c),f.placeholder=n,ba(f,t,e)}function ji(t){var e=pt[t];return function(t,r){if(t=io(t),(r=null==r?0:sr(ro(r),292))&&rr(t)){var n=(so(t)+"e").split("e");return+((n=(so(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Di=pr&&1/Fe(new pr([,-0]))[1]==1/0?function(t){return new pr(t)}:Ko;function $i(t){return function(e){var r=ra(e);return r==g?ze(e):r==_?Ve(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Li(t,e,r,i,o,l,u,h){var c=2&e;if(!c&&"function"!=typeof t)throw new mt(a);var f=i?i.length:0;if(f||(e&=-97,i=o=void 0),u=void 0===u?u:ar(ro(u),0),h=void 0===h?h:ro(h),f-=o?o.length:0,64&e){var d=i,p=o;i=o=void 0}var g=c?void 0:Xi(t),v=[t,e,r,i,o,d,p,l,u,h];if(g&&function(t,e){var r=t[1],n=e[1],i=r|n,a=i<131,o=128==n&&8==r||128==n&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!a&&!o)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?gi(u,l,e[4]):l,t[4]=u?Ne(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?vi(u,l,e[6]):l,t[6]=u?Ne(t[5],s):e[6]);(l=e[7])&&(t[7]=l);128&n&&(t[8]=null==t[8]?e[8]:sr(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(v,g),t=v[0],e=v[1],r=v[2],i=v[3],o=v[4],!(h=v[9]=void 0===v[9]?c?0:t.length:ar(v[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)y=8==e||16==e?function(t,e,r){var i=Pi(t);return function a(){for(var s=arguments.length,o=n(s),l=s,u=Yi(a);l--;)o[l]=arguments[l];var h=s<3&&o[0]!==u&&o[s-1]!==u?[]:Ne(o,u);if((s-=h.length)<r)return Wi(t,e,Ti,a.placeholder,void 0,o,h,void 0,void 0,r-s);var c=this&&this!==Xt&&this instanceof a?i:t;return ae(c,this,o)}}(t,e,h):32!=e&&33!=e||o.length?Ti.apply(void 0,v):function(t,e,r,i){var a=1&e,s=Pi(t);return function e(){for(var o=-1,l=arguments.length,u=-1,h=i.length,c=n(h+l),f=this&&this!==Xt&&this instanceof e?s:t;++u<h;)c[u]=i[u];for(;l--;)c[u++]=arguments[++o];return ae(f,a?r:this,c)}}(t,e,r,i);else var y=function(t,e,r){var n=1&e,i=Pi(t);return function e(){var a=this&&this!==Xt&&this instanceof e?i:t;return a.apply(n?r:this,arguments)}}(t,e,r);return ba((g?Nn:ma)(y,v),t,e)}function zi(t,e,r,n){return void 0===t||Ts(t,bt[r])&&!Ct.call(n,r)?e:t}function Hi(t,e,r,n,i,a){return Ns(t)&&Ns(e)&&(a.set(e,t),Mn(t,e,void 0,Hi,a),a.delete(e)),t}function Ni(t){return qs(t)?void 0:t}function Fi(t,e,r,n,i,a){var s=1&r,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var h=-1,c=!0,f=2&r?new Wr:void 0;for(a.set(t,e),a.set(e,t);++h<o;){var d=t[h],p=e[h];if(n)var g=s?n(p,d,h,e,t,a):n(d,p,h,t,e,a);if(void 0!==g){if(g)continue;c=!1;break}if(f){if(!ye(e,(function(t,e){if(!Be(f,e)&&(d===t||i(d,t,r,n,a)))return f.push(e)}))){c=!1;break}}else if(d!==p&&!i(d,p,r,n,a)){c=!1;break}}return a.delete(t),a.delete(e),c}function Vi(t){return wa(pa(t,void 0,Ea),t+"")}function Ui(t){return fn(t,wo,ta)}function qi(t){return fn(t,bo,ea)}var Xi=yr?function(t){return yr.get(t)}:Ko;function Gi(t){for(var e=t.name+"",r=mr[e],n=Ct.call(mr,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function Yi(t){return(Ct.call(Sr,"placeholder")?Sr:t).placeholder}function Ji(){var t=Sr.iteratee||Xo;return t=t===Xo?xn:t,arguments.length?t(arguments[0],arguments[1]):t}function Ki(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Zi(t){for(var e=wo(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,fa(i)]}return e}function Qi(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kn(r)?r:void 0}var ta=tr?function(t){return null==t?[]:(t=gt(t),he(tr(t),(function(e){return Gt.call(t,e)})))}:il,ea=tr?function(t){for(var e=[];t;)pe(e,ta(t)),t=Ut(t);return e}:il,ra=dn;function na(t,e,r){for(var n=-1,i=(e=oi(e,t)).length,a=!1;++n<i;){var s=Pa(e[n]);if(!(a=null!=t&&r(t,s)))break;t=t[s]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&Hs(i)&&sa(s,i)&&(Bs(t)||Os(t))}function ia(t){return"function"!=typeof t.constructor||ca(t)?{}:Tr(Ut(t))}function aa(t){return Bs(t)||Os(t)||!!(Kt&&t&&t[Kt])}function sa(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&lt.test(t))&&t>-1&&t%1==0&&t<e}function oa(t,e,r){if(!Ns(r))return!1;var n=typeof e;return!!("number"==n?Is(r)&&sa(e,r.length):"string"==n&&e in r)&&Ts(r[e],t)}function la(t,e){if(Bs(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Js(t))||(V.test(t)||!F.test(t)||null!=e&&t in gt(e))}function ua(t){var e=Gi(t),r=Sr[e];if("function"!=typeof r||!(e in Or.prototype))return!1;if(t===r)return!0;var n=Xi(r);return!!n&&t===n[0]}(cr&&ra(new cr(new ArrayBuffer(1)))!=C||fr&&ra(new fr)!=g||dr&&"[object Promise]"!=ra(dr.resolve())||pr&&ra(new pr)!=_||gr&&ra(new gr)!=k)&&(ra=function(t){var e=dn(t),r=e==y?t.constructor:void 0,n=r?Ra(r):"";if(n)switch(n){case _r:return C;case wr:return g;case br:return"[object Promise]";case kr:return _;case xr:return k}return e});var ha=kt?Ls:al;function ca(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function fa(t){return t==t&&!Ns(t)}function da(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in gt(r)))}}function pa(t,e,r){return e=ar(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=ar(i.length-e,0),o=n(s);++a<s;)o[a]=i[e+a];a=-1;for(var l=n(e+1);++a<e;)l[a]=i[a];return l[e]=r(o),ae(t,this,l)}}function ga(t,e){return e.length<2?t:cn(t,Un(e,0,-1))}function va(t,e){for(var r=t.length,n=sr(e.length,r),i=yi(t);n--;){var a=e[n];t[n]=sa(a,r)?i[a]:void 0}return t}function ya(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ma=ka(Nn),_a=Ke||function(t,e){return Xt.setTimeout(t,e)},wa=ka(Fn);function ba(t,e,r){var n=e+"";return wa(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(K,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return oe(o,(function(r){var n="_."+r[0];e&r[1]&&!ce(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(Z);return e?e[1].split(Q):[]}(n),r)))}function ka(t){var e=0,r=0;return function(){var n=or(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xa(t,e){var r=-1,n=t.length,i=n-1;for(e=void 0===e?n:e;++r<e;){var a=jn(r,i),s=t[a];t[a]=t[r],t[r]=s}return t.length=e,t}var Ca=function(t){var e=ks(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(U,(function(t,r,n,i){e.push(n?i.replace(et,"$1"):r||t)})),e}));function Pa(t){if("string"==typeof t||Js(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ra(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Sa(t){if(t instanceof Or)return t.clone();var e=new Mr(t.__wrapped__,t.__chain__);return e.__actions__=yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ta=$n((function(t,e){return Ws(t)?Zr(t,an(e,1,Ws,!0)):[]})),Aa=$n((function(t,e){var r=$a(e);return Ws(r)&&(r=void 0),Ws(t)?Zr(t,an(e,1,Ws,!0),Ji(r,2)):[]})),Ma=$n((function(t,e){var r=$a(e);return Ws(r)&&(r=void 0),Ws(t)?Zr(t,an(e,1,Ws,!0),void 0,r):[]}));function Oa(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ro(r);return i<0&&(i=ar(n+i,0)),we(t,Ji(e,3),i)}function Ba(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=ro(r),i=r<0?ar(n+i,0):sr(i,n-1)),we(t,Ji(e,3),i,!0)}function Ea(t){return(null==t?0:t.length)?an(t,1):[]}function Ia(t){return t&&t.length?t[0]:void 0}var Wa=$n((function(t){var e=de(t,ai);return e.length&&e[0]===t[0]?yn(e):[]})),ja=$n((function(t){var e=$a(t),r=de(t,ai);return e===$a(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?yn(r,Ji(e,2)):[]})),Da=$n((function(t){var e=$a(t),r=de(t,ai);return(e="function"==typeof e?e:void 0)&&r.pop(),r.length&&r[0]===t[0]?yn(r,void 0,e):[]}));function $a(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var La=$n(za);function za(t,e){return t&&t.length&&e&&e.length?In(t,e):t}var Ha=Vi((function(t,e){var r=null==t?0:t.length,n=Xr(t,e);return Wn(t,de(e,(function(t){return sa(t,r)?+t:t})).sort(pi)),n}));function Na(t){return null==t?t:hr.call(t)}var Fa=$n((function(t){return Zn(an(t,1,Ws,!0))})),Va=$n((function(t){var e=$a(t);return Ws(e)&&(e=void 0),Zn(an(t,1,Ws,!0),Ji(e,2))})),Ua=$n((function(t){var e=$a(t);return e="function"==typeof e?e:void 0,Zn(an(t,1,Ws,!0),void 0,e)}));function qa(t){if(!t||!t.length)return[];var e=0;return t=he(t,(function(t){if(Ws(t))return e=ar(t.length,e),!0})),Ae(e,(function(e){return de(t,Pe(e))}))}function Xa(t,e){if(!t||!t.length)return[];var r=qa(t);return null==e?r:de(r,(function(t){return ae(e,void 0,t)}))}var Ga=$n((function(t,e){return Ws(t)?Zr(t,e):[]})),Ya=$n((function(t){return ni(he(t,Ws))})),Ja=$n((function(t){var e=$a(t);return Ws(e)&&(e=void 0),ni(he(t,Ws),Ji(e,2))})),Ka=$n((function(t){var e=$a(t);return e="function"==typeof e?e:void 0,ni(he(t,Ws),void 0,e)})),Za=$n(qa);var Qa=$n((function(t){var e=t.length,r=e>1?t[e-1]:void 0;return r="function"==typeof r?(t.pop(),r):void 0,Xa(t,r)}));function ts(t){var e=Sr(t);return e.__chain__=!0,e}function es(t,e){return e(t)}var rs=Vi((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return Xr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Or&&sa(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:es,args:[i],thisArg:void 0}),new Mr(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var ns=_i((function(t,e,r){Ct.call(t,r)?++t[r]:qr(t,r,1)}));var is=Ri(Oa),as=Ri(Ba);function ss(t,e){return(Bs(t)?oe:Qr)(t,Ji(e,3))}function os(t,e){return(Bs(t)?le:tn)(t,Ji(e,3))}var ls=_i((function(t,e,r){Ct.call(t,r)?t[r].push(e):qr(t,r,[e])}));var us=$n((function(t,e,r){var i=-1,a="function"==typeof e,s=Is(t)?n(t.length):[];return Qr(t,(function(t){s[++i]=a?ae(e,t,r):mn(t,e,r)})),s})),hs=_i((function(t,e,r){qr(t,r,e)}));function cs(t,e){return(Bs(t)?de:Sn)(t,Ji(e,3))}var fs=_i((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var ds=$n((function(t,e){if(null==t)return[];var r=e.length;return r>1&&oa(t,e[0],e[1])?e=[]:r>2&&oa(e[0],e[1],e[2])&&(e=[e[0]]),Bn(t,an(e,1),[])})),ps=Je||function(){return Xt.Date.now()};function gs(t,e,r){return e=r?void 0:e,Li(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function vs(t,e){var r;if("function"!=typeof e)throw new mt(a);return t=ro(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var ys=$n((function(t,e,r){var n=1;if(r.length){var i=Ne(r,Yi(ys));n|=32}return Li(t,n,e,r,i)})),ms=$n((function(t,e,r){var n=3;if(r.length){var i=Ne(r,Yi(ms));n|=32}return Li(e,n,t,r,i)}));function _s(t,e,r){var n,i,s,o,l,u,h=0,c=!1,f=!1,d=!0;if("function"!=typeof t)throw new mt(a);function p(e){var r=n,a=i;return n=i=void 0,h=e,o=t.apply(a,r)}function g(t){return h=t,l=_a(y,e),c?p(t):o}function v(t){var r=t-u;return void 0===u||r>=e||r<0||f&&t-h>=s}function y(){var t=ps();if(v(t))return m(t);l=_a(y,function(t){var r=e-(t-u);return f?sr(r,s-(t-h)):r}(t))}function m(t){return l=void 0,d&&n?p(t):(n=i=void 0,o)}function _(){var t=ps(),r=v(t);if(n=arguments,i=this,u=t,r){if(void 0===l)return g(u);if(f)return hi(l),l=_a(y,e),p(u)}return void 0===l&&(l=_a(y,e)),o}return e=io(e)||0,Ns(r)&&(c=!!r.leading,s=(f="maxWait"in r)?ar(io(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d),_.cancel=function(){void 0!==l&&hi(l),h=0,n=u=i=l=void 0},_.flush=function(){return void 0===l?o:m(ps())},_}var ws=$n((function(t,e){return Kr(t,1,e)})),bs=$n((function(t,e,r){return Kr(t,io(e)||0,r)}));function ks(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new mt(a);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=t.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(ks.Cache||Ir),r}function xs(t){if("function"!=typeof t)throw new mt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ks.Cache=Ir;var Cs=li((function(t,e){var r=(e=1==e.length&&Bs(e[0])?de(e[0],Me(Ji())):de(an(e,1),Me(Ji()))).length;return $n((function(n){for(var i=-1,a=sr(n.length,r);++i<a;)n[i]=e[i].call(this,n[i]);return ae(t,this,n)}))})),Ps=$n((function(t,e){return Li(t,32,void 0,e,Ne(e,Yi(Ps)))})),Rs=$n((function(t,e){return Li(t,64,void 0,e,Ne(e,Yi(Rs)))})),Ss=Vi((function(t,e){return Li(t,256,void 0,void 0,void 0,e)}));function Ts(t,e){return t===e||t!=t&&e!=e}var As=Ii(pn),Ms=Ii((function(t,e){return t>=e})),Os=_n(function(){return arguments}())?_n:function(t){return Fs(t)&&Ct.call(t,"callee")&&!Gt.call(t,"callee")},Bs=n.isArray,Es=Qt?Me(Qt):function(t){return Fs(t)&&dn(t)==x};function Is(t){return null!=t&&Hs(t.length)&&!Ls(t)}function Ws(t){return Fs(t)&&Is(t)}var js=er||al,Ds=te?Me(te):function(t){return Fs(t)&&dn(t)==c};function $s(t){if(!Fs(t))return!1;var e=dn(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qs(t)}function Ls(t){if(!Ns(t))return!1;var e=dn(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function zs(t){return"number"==typeof t&&t==ro(t)}function Hs(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ns(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Fs(t){return null!=t&&"object"==typeof t}var Vs=ee?Me(ee):function(t){return Fs(t)&&ra(t)==g};function Us(t){return"number"==typeof t||Fs(t)&&dn(t)==v}function qs(t){if(!Fs(t)||dn(t)!=y)return!1;var e=Ut(t);if(null===e)return!0;var r=Ct.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xt.call(r)==Tt}var Xs=re?Me(re):function(t){return Fs(t)&&dn(t)==m};var Gs=ne?Me(ne):function(t){return Fs(t)&&ra(t)==_};function Ys(t){return"string"==typeof t||!Bs(t)&&Fs(t)&&dn(t)==w}function Js(t){return"symbol"==typeof t||Fs(t)&&dn(t)==b}var Ks=ie?Me(ie):function(t){return Fs(t)&&Hs(t.length)&&!!zt[dn(t)]};var Zs=Ii(Rn),Qs=Ii((function(t,e){return t<=e}));function to(t){if(!t)return[];if(Is(t))return Ys(t)?qe(t):yi(t);if(Zt&&t[Zt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Zt]());var e=ra(t);return(e==g?ze:e==_?Fe:Ao)(t)}function eo(t){return t?(t=io(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ro(t){var e=eo(t),r=e%1;return e==e?r?e-r:e:0}function no(t){return t?Gr(ro(t),0,4294967295):0}function io(t){if("number"==typeof t)return t;if(Js(t))return NaN;if(Ns(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ns(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(G,"");var r=at.test(t);return r||ot.test(t)?Vt(t.slice(2),r?2:8):it.test(t)?NaN:+t}function ao(t){return mi(t,bo(t))}function so(t){return null==t?"":Kn(t)}var oo=wi((function(t,e){if(ca(e)||Is(e))mi(e,wo(e),t);else for(var r in e)Ct.call(e,r)&&Nr(t,r,e[r])})),lo=wi((function(t,e){mi(e,bo(e),t)})),uo=wi((function(t,e,r,n){mi(e,bo(e),t,n)})),ho=wi((function(t,e,r,n){mi(e,wo(e),t,n)})),co=Vi(Xr);var fo=$n((function(t,e){t=gt(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&oa(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],s=bo(a),o=-1,l=s.length;++o<l;){var u=s[o],h=t[u];(void 0===h||Ts(h,bt[u])&&!Ct.call(t,u))&&(t[u]=a[u])}return t})),po=$n((function(t){return t.push(void 0,Hi),ae(xo,void 0,t)}));function go(t,e,r){var n=null==t?void 0:cn(t,e);return void 0===n?r:n}function vo(t,e){return null!=t&&na(t,e,vn)}var yo=Ai((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=St.call(e)),t[e]=r}),Fo(qo)),mo=Ai((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=St.call(e)),Ct.call(t,e)?t[e].push(r):t[e]=[r]}),Ji),_o=$n(mn);function wo(t){return Is(t)?Dr(t):Cn(t)}function bo(t){return Is(t)?Dr(t,!0):Pn(t)}var ko=wi((function(t,e,r){Mn(t,e,r)})),xo=wi((function(t,e,r,n){Mn(t,e,r,n)})),Co=Vi((function(t,e){var r={};if(null==t)return r;var n=!1;e=de(e,(function(e){return e=oi(e,t),n||(n=e.length>1),e})),mi(t,qi(t),r),n&&(r=Yr(r,7,Ni));for(var i=e.length;i--;)Qn(r,e[i]);return r}));var Po=Vi((function(t,e){return null==t?{}:function(t,e){return En(t,e,(function(e,r){return vo(t,r)}))}(t,e)}));function Ro(t,e){if(null==t)return{};var r=de(qi(t),(function(t){return[t]}));return e=Ji(e),En(t,r,(function(t,r){return e(t,r[0])}))}var So=$i(wo),To=$i(bo);function Ao(t){return null==t?[]:Oe(t,wo(t))}var Mo=Ci((function(t,e,r){return e=e.toLowerCase(),t+(r?Oo(e):e)}));function Oo(t){return Lo(so(t).toLowerCase())}function Bo(t){return(t=so(t))&&t.replace(ut,je).replace(Et,"")}var Eo=Ci((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Io=Ci((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Wo=xi("toLowerCase");var jo=Ci((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Do=Ci((function(t,e,r){return t+(r?" ":"")+Lo(e)}));var $o=Ci((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),Lo=xi("toUpperCase");function zo(t,e,r){return t=so(t),void 0===(e=r?void 0:e)?function(t){return Dt.test(t)}(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Ho=$n((function(t,e){try{return ae(t,void 0,e)}catch(t){return $s(t)?t:new ft(t)}})),No=Vi((function(t,e){return oe(e,(function(e){e=Pa(e),qr(t,e,ys(t[e],t))})),t}));function Fo(t){return function(){return t}}var Vo=Si(),Uo=Si(!0);function qo(t){return t}function Xo(t){return xn("function"==typeof t?t:Yr(t,1))}var Go=$n((function(t,e){return function(r){return mn(r,t,e)}})),Yo=$n((function(t,e){return function(r){return mn(t,r,e)}}));function Jo(t,e,r){var n=wo(e),i=hn(e,n);null!=r||Ns(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=hn(e,wo(e)));var a=!(Ns(r)&&"chain"in r&&!r.chain),s=Ls(t);return oe(i,(function(r){var n=e[r];t[r]=n,s&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=yi(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,pe([this.value()],arguments))})})),t}function Ko(){}var Zo=Oi(de),Qo=Oi(ue),tl=Oi(ye);function el(t){return la(t)?Pe(Pa(t)):function(t){return function(e){return cn(e,t)}}(t)}var rl=Ei(),nl=Ei(!0);function il(){return[]}function al(){return!1}var sl=Mi((function(t,e){return t+e}),0),ol=ji("ceil"),ll=Mi((function(t,e){return t/e}),1),ul=ji("floor");var hl,cl=Mi((function(t,e){return t*e}),1),fl=ji("round"),dl=Mi((function(t,e){return t-e}),0);return Sr.after=function(t,e){if("function"!=typeof e)throw new mt(a);return t=ro(t),function(){if(--t<1)return e.apply(this,arguments)}},Sr.ary=gs,Sr.assign=oo,Sr.assignIn=lo,Sr.assignInWith=uo,Sr.assignWith=ho,Sr.at=co,Sr.before=vs,Sr.bind=ys,Sr.bindAll=No,Sr.bindKey=ms,Sr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Bs(t)?t:[t]},Sr.chain=ts,Sr.chunk=function(t,e,r){e=(r?oa(t,e,r):void 0===e)?1:ar(ro(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,o=n(Ze(i/e));a<i;)o[s++]=Un(t,a,a+=e);return o},Sr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i},Sr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return pe(Bs(r)?yi(r):[r],an(e,1))},Sr.cond=function(t){var e=null==t?0:t.length,r=Ji();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new mt(a);return[r(t[0]),t[1]]})):[],$n((function(r){for(var n=-1;++n<e;){var i=t[n];if(ae(i[0],this,r))return ae(i[1],this,r)}}))},Sr.conforms=function(t){return function(t){var e=wo(t);return function(r){return Jr(r,t,e)}}(Yr(t,1))},Sr.constant=Fo,Sr.countBy=ns,Sr.create=function(t,e){var r=Tr(t);return null==e?r:Ur(r,e)},Sr.curry=function t(e,r,n){var i=Li(e,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Sr.curryRight=function t(e,r,n){var i=Li(e,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Sr.debounce=_s,Sr.defaults=fo,Sr.defaultsDeep=po,Sr.defer=ws,Sr.delay=bs,Sr.difference=Ta,Sr.differenceBy=Aa,Sr.differenceWith=Ma,Sr.drop=function(t,e,r){var n=null==t?0:t.length;return n?Un(t,(e=r||void 0===e?1:ro(e))<0?0:e,n):[]},Sr.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?Un(t,0,(e=n-(e=r||void 0===e?1:ro(e)))<0?0:e):[]},Sr.dropRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0,!0):[]},Sr.dropWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0):[]},Sr.fill=function(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&oa(t,e,r)&&(r=0,n=i),function(t,e,r,n){var i=t.length;for((r=ro(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:ro(n))<0&&(n+=i),n=r>n?0:no(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},Sr.filter=function(t,e){return(Bs(t)?he:nn)(t,Ji(e,3))},Sr.flatMap=function(t,e){return an(cs(t,e),1)},Sr.flatMapDeep=function(t,e){return an(cs(t,e),1/0)},Sr.flatMapDepth=function(t,e,r){return r=void 0===r?1:ro(r),an(cs(t,e),r)},Sr.flatten=Ea,Sr.flattenDeep=function(t){return(null==t?0:t.length)?an(t,1/0):[]},Sr.flattenDepth=function(t,e){return(null==t?0:t.length)?an(t,e=void 0===e?1:ro(e)):[]},Sr.flip=function(t){return Li(t,512)},Sr.flow=Vo,Sr.flowRight=Uo,Sr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Sr.functions=function(t){return null==t?[]:hn(t,wo(t))},Sr.functionsIn=function(t){return null==t?[]:hn(t,bo(t))},Sr.groupBy=ls,Sr.initial=function(t){return(null==t?0:t.length)?Un(t,0,-1):[]},Sr.intersection=Wa,Sr.intersectionBy=ja,Sr.intersectionWith=Da,Sr.invert=yo,Sr.invertBy=mo,Sr.invokeMap=us,Sr.iteratee=Xo,Sr.keyBy=hs,Sr.keys=wo,Sr.keysIn=bo,Sr.map=cs,Sr.mapKeys=function(t,e){var r={};return e=Ji(e,3),ln(t,(function(t,n,i){qr(r,e(t,n,i),t)})),r},Sr.mapValues=function(t,e){var r={};return e=Ji(e,3),ln(t,(function(t,n,i){qr(r,n,e(t,n,i))})),r},Sr.matches=function(t){return Tn(Yr(t,1))},Sr.matchesProperty=function(t,e){return An(t,Yr(e,1))},Sr.memoize=ks,Sr.merge=ko,Sr.mergeWith=xo,Sr.method=Go,Sr.methodOf=Yo,Sr.mixin=Jo,Sr.negate=xs,Sr.nthArg=function(t){return t=ro(t),$n((function(e){return On(e,t)}))},Sr.omit=Co,Sr.omitBy=function(t,e){return Ro(t,xs(Ji(e)))},Sr.once=function(t){return vs(2,t)},Sr.orderBy=function(t,e,r,n){return null==t?[]:(Bs(e)||(e=null==e?[]:[e]),Bs(r=n?void 0:r)||(r=null==r?[]:[r]),Bn(t,e,r))},Sr.over=Zo,Sr.overArgs=Cs,Sr.overEvery=Qo,Sr.overSome=tl,Sr.partial=Ps,Sr.partialRight=Rs,Sr.partition=fs,Sr.pick=Po,Sr.pickBy=Ro,Sr.property=el,Sr.propertyOf=function(t){return function(e){return null==t?void 0:cn(t,e)}},Sr.pull=La,Sr.pullAll=za,Sr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?In(t,e,Ji(r,2)):t},Sr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?In(t,e,void 0,r):t},Sr.pullAt=Ha,Sr.range=rl,Sr.rangeRight=nl,Sr.rearg=Ss,Sr.reject=function(t,e){return(Bs(t)?he:nn)(t,xs(Ji(e,3)))},Sr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=Ji(e,3);++n<a;){var s=t[n];e(s,n,t)&&(r.push(s),i.push(n))}return Wn(t,i),r},Sr.rest=function(t,e){if("function"!=typeof t)throw new mt(a);return $n(t,e=void 0===e?e:ro(e))},Sr.reverse=Na,Sr.sampleSize=function(t,e,r){return e=(r?oa(t,e,r):void 0===e)?1:ro(e),(Bs(t)?Lr:zn)(t,e)},Sr.set=function(t,e,r){return null==t?t:Hn(t,e,r)},Sr.setWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:Hn(t,e,r,n)},Sr.shuffle=function(t){return(Bs(t)?zr:Vn)(t)},Sr.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&oa(t,e,r)?(e=0,r=n):(e=null==e?0:ro(e),r=void 0===r?n:ro(r)),Un(t,e,r)):[]},Sr.sortBy=ds,Sr.sortedUniq=function(t){return t&&t.length?Yn(t):[]},Sr.sortedUniqBy=function(t,e){return t&&t.length?Yn(t,Ji(e,2)):[]},Sr.split=function(t,e,r){return r&&"number"!=typeof r&&oa(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=so(t))&&("string"==typeof e||null!=e&&!Xs(e))&&!(e=Kn(e))&&Le(t)?ui(qe(t),0,r):t.split(e,r):[]},Sr.spread=function(t,e){if("function"!=typeof t)throw new mt(a);return e=null==e?0:ar(ro(e),0),$n((function(r){var n=r[e],i=ui(r,0,e);return n&&pe(i,n),ae(t,this,i)}))},Sr.tail=function(t){var e=null==t?0:t.length;return e?Un(t,1,e):[]},Sr.take=function(t,e,r){return t&&t.length?Un(t,0,(e=r||void 0===e?1:ro(e))<0?0:e):[]},Sr.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?Un(t,(e=n-(e=r||void 0===e?1:ro(e)))<0?0:e,n):[]},Sr.takeRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!1,!0):[]},Sr.takeWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3)):[]},Sr.tap=function(t,e){return e(t),t},Sr.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new mt(a);return Ns(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),_s(t,e,{leading:n,maxWait:e,trailing:i})},Sr.thru=es,Sr.toArray=to,Sr.toPairs=So,Sr.toPairsIn=To,Sr.toPath=function(t){return Bs(t)?de(t,Pa):Js(t)?[t]:yi(Ca(so(t)))},Sr.toPlainObject=ao,Sr.transform=function(t,e,r){var n=Bs(t),i=n||js(t)||Ks(t);if(e=Ji(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:Ns(t)&&Ls(a)?Tr(Ut(t)):{}}return(i?oe:ln)(t,(function(t,n,i){return e(r,t,n,i)})),r},Sr.unary=function(t){return gs(t,1)},Sr.union=Fa,Sr.unionBy=Va,Sr.unionWith=Ua,Sr.uniq=function(t){return t&&t.length?Zn(t):[]},Sr.uniqBy=function(t,e){return t&&t.length?Zn(t,Ji(e,2)):[]},Sr.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Zn(t,void 0,e):[]},Sr.unset=function(t,e){return null==t||Qn(t,e)},Sr.unzip=qa,Sr.unzipWith=Xa,Sr.update=function(t,e,r){return null==t?t:ti(t,e,si(r))},Sr.updateWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:ti(t,e,si(r),n)},Sr.values=Ao,Sr.valuesIn=function(t){return null==t?[]:Oe(t,bo(t))},Sr.without=Ga,Sr.words=zo,Sr.wrap=function(t,e){return Ps(si(e),t)},Sr.xor=Ya,Sr.xorBy=Ja,Sr.xorWith=Ka,Sr.zip=Za,Sr.zipObject=function(t,e){return ii(t||[],e||[],Nr)},Sr.zipObjectDeep=function(t,e){return ii(t||[],e||[],Hn)},Sr.zipWith=Qa,Sr.entries=So,Sr.entriesIn=To,Sr.extend=lo,Sr.extendWith=uo,Jo(Sr,Sr),Sr.add=sl,Sr.attempt=Ho,Sr.camelCase=Mo,Sr.capitalize=Oo,Sr.ceil=ol,Sr.clamp=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=io(r))==r?r:0),void 0!==e&&(e=(e=io(e))==e?e:0),Gr(io(t),e,r)},Sr.clone=function(t){return Yr(t,4)},Sr.cloneDeep=function(t){return Yr(t,5)},Sr.cloneDeepWith=function(t,e){return Yr(t,5,e="function"==typeof e?e:void 0)},Sr.cloneWith=function(t,e){return Yr(t,4,e="function"==typeof e?e:void 0)},Sr.conformsTo=function(t,e){return null==e||Jr(t,e,wo(e))},Sr.deburr=Bo,Sr.defaultTo=function(t,e){return null==t||t!=t?e:t},Sr.divide=ll,Sr.endsWith=function(t,e,r){t=so(t),e=Kn(e);var n=t.length,i=r=void 0===r?n:Gr(ro(r),0,n);return(r-=e.length)>=0&&t.slice(r,i)==e},Sr.eq=Ts,Sr.escape=function(t){return(t=so(t))&&L.test(t)?t.replace(D,De):t},Sr.escapeRegExp=function(t){return(t=so(t))&&X.test(t)?t.replace(q,"\\$&"):t},Sr.every=function(t,e,r){var n=Bs(t)?ue:en;return r&&oa(t,e,r)&&(e=void 0),n(t,Ji(e,3))},Sr.find=is,Sr.findIndex=Oa,Sr.findKey=function(t,e){return _e(t,Ji(e,3),ln)},Sr.findLast=as,Sr.findLastIndex=Ba,Sr.findLastKey=function(t,e){return _e(t,Ji(e,3),un)},Sr.floor=ul,Sr.forEach=ss,Sr.forEachRight=os,Sr.forIn=function(t,e){return null==t?t:sn(t,Ji(e,3),bo)},Sr.forInRight=function(t,e){return null==t?t:on(t,Ji(e,3),bo)},Sr.forOwn=function(t,e){return t&&ln(t,Ji(e,3))},Sr.forOwnRight=function(t,e){return t&&un(t,Ji(e,3))},Sr.get=go,Sr.gt=As,Sr.gte=Ms,Sr.has=function(t,e){return null!=t&&na(t,e,gn)},Sr.hasIn=vo,Sr.head=Ia,Sr.identity=qo,Sr.includes=function(t,e,r,n){t=Is(t)?t:Ao(t),r=r&&!n?ro(r):0;var i=t.length;return r<0&&(r=ar(i+r,0)),Ys(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&be(t,e,r)>-1},Sr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ro(r);return i<0&&(i=ar(n+i,0)),be(t,e,i)},Sr.inRange=function(t,e,r){return e=eo(e),void 0===r?(r=e,e=0):r=eo(r),function(t,e,r){return t>=sr(e,r)&&t<ar(e,r)}(t=io(t),e,r)},Sr.invoke=_o,Sr.isArguments=Os,Sr.isArray=Bs,Sr.isArrayBuffer=Es,Sr.isArrayLike=Is,Sr.isArrayLikeObject=Ws,Sr.isBoolean=function(t){return!0===t||!1===t||Fs(t)&&dn(t)==h},Sr.isBuffer=js,Sr.isDate=Ds,Sr.isElement=function(t){return Fs(t)&&1===t.nodeType&&!qs(t)},Sr.isEmpty=function(t){if(null==t)return!0;if(Is(t)&&(Bs(t)||"string"==typeof t||"function"==typeof t.splice||js(t)||Ks(t)||Os(t)))return!t.length;var e=ra(t);if(e==g||e==_)return!t.size;if(ca(t))return!Cn(t).length;for(var r in t)if(Ct.call(t,r))return!1;return!0},Sr.isEqual=function(t,e){return wn(t,e)},Sr.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===n?wn(t,e,void 0,r):!!n},Sr.isError=$s,Sr.isFinite=function(t){return"number"==typeof t&&rr(t)},Sr.isFunction=Ls,Sr.isInteger=zs,Sr.isLength=Hs,Sr.isMap=Vs,Sr.isMatch=function(t,e){return t===e||bn(t,e,Zi(e))},Sr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:void 0,bn(t,e,Zi(e),r)},Sr.isNaN=function(t){return Us(t)&&t!=+t},Sr.isNative=function(t){if(ha(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kn(t)},Sr.isNil=function(t){return null==t},Sr.isNull=function(t){return null===t},Sr.isNumber=Us,Sr.isObject=Ns,Sr.isObjectLike=Fs,Sr.isPlainObject=qs,Sr.isRegExp=Xs,Sr.isSafeInteger=function(t){return zs(t)&&t>=-9007199254740991&&t<=9007199254740991},Sr.isSet=Gs,Sr.isString=Ys,Sr.isSymbol=Js,Sr.isTypedArray=Ks,Sr.isUndefined=function(t){return void 0===t},Sr.isWeakMap=function(t){return Fs(t)&&ra(t)==k},Sr.isWeakSet=function(t){return Fs(t)&&"[object WeakSet]"==dn(t)},Sr.join=function(t,e){return null==t?"":nr.call(t,e)},Sr.kebabCase=Eo,Sr.last=$a,Sr.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=ro(r))<0?ar(n+i,0):sr(i,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,i):we(t,xe,i,!0)},Sr.lowerCase=Io,Sr.lowerFirst=Wo,Sr.lt=Zs,Sr.lte=Qs,Sr.max=function(t){return t&&t.length?rn(t,qo,pn):void 0},Sr.maxBy=function(t,e){return t&&t.length?rn(t,Ji(e,2),pn):void 0},Sr.mean=function(t){return Ce(t,qo)},Sr.meanBy=function(t,e){return Ce(t,Ji(e,2))},Sr.min=function(t){return t&&t.length?rn(t,qo,Rn):void 0},Sr.minBy=function(t,e){return t&&t.length?rn(t,Ji(e,2),Rn):void 0},Sr.stubArray=il,Sr.stubFalse=al,Sr.stubObject=function(){return{}},Sr.stubString=function(){return""},Sr.stubTrue=function(){return!0},Sr.multiply=cl,Sr.nth=function(t,e){return t&&t.length?On(t,ro(e)):void 0},Sr.noConflict=function(){return Xt._===this&&(Xt._=At),this},Sr.noop=Ko,Sr.now=ps,Sr.pad=function(t,e,r){t=so(t);var n=(e=ro(e))?Ue(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Bi(Qe(i),r)+t+Bi(Ze(i),r)},Sr.padEnd=function(t,e,r){t=so(t);var n=(e=ro(e))?Ue(t):0;return e&&n<e?t+Bi(e-n,r):t},Sr.padStart=function(t,e,r){t=so(t);var n=(e=ro(e))?Ue(t):0;return e&&n<e?Bi(e-n,r)+t:t},Sr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),lr(so(t).replace(Y,""),e||0)},Sr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&oa(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=eo(t),void 0===e?(e=t,t=0):e=eo(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=ur();return sr(t+i*(e-t+Ft("1e-"+((i+"").length-1))),e)}return jn(t,e)},Sr.reduce=function(t,e,r){var n=Bs(t)?ge:Se,i=arguments.length<3;return n(t,Ji(e,4),r,i,Qr)},Sr.reduceRight=function(t,e,r){var n=Bs(t)?ve:Se,i=arguments.length<3;return n(t,Ji(e,4),r,i,tn)},Sr.repeat=function(t,e,r){return e=(r?oa(t,e,r):void 0===e)?1:ro(e),Dn(so(t),e)},Sr.replace=function(){var t=arguments,e=so(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Sr.result=function(t,e,r){var n=-1,i=(e=oi(e,t)).length;for(i||(i=1,t=void 0);++n<i;){var a=null==t?void 0:t[Pa(e[n])];void 0===a&&(n=i,a=r),t=Ls(a)?a.call(t):a}return t},Sr.round=fl,Sr.runInContext=t,Sr.sample=function(t){return(Bs(t)?$r:Ln)(t)},Sr.size=function(t){if(null==t)return 0;if(Is(t))return Ys(t)?Ue(t):t.length;var e=ra(t);return e==g||e==_?t.size:Cn(t).length},Sr.snakeCase=jo,Sr.some=function(t,e,r){var n=Bs(t)?ye:qn;return r&&oa(t,e,r)&&(e=void 0),n(t,Ji(e,3))},Sr.sortedIndex=function(t,e){return Xn(t,e)},Sr.sortedIndexBy=function(t,e,r){return Gn(t,e,Ji(r,2))},Sr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=Xn(t,e);if(n<r&&Ts(t[n],e))return n}return-1},Sr.sortedLastIndex=function(t,e){return Xn(t,e,!0)},Sr.sortedLastIndexBy=function(t,e,r){return Gn(t,e,Ji(r,2),!0)},Sr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=Xn(t,e,!0)-1;if(Ts(t[r],e))return r}return-1},Sr.startCase=Do,Sr.startsWith=function(t,e,r){return t=so(t),r=null==r?0:Gr(ro(r),0,t.length),e=Kn(e),t.slice(r,r+e.length)==e},Sr.subtract=dl,Sr.sum=function(t){return t&&t.length?Te(t,qo):0},Sr.sumBy=function(t,e){return t&&t.length?Te(t,Ji(e,2)):0},Sr.template=function(t,e,r){var n=Sr.templateSettings;r&&oa(t,e,r)&&(e=void 0),t=so(t),e=uo({},e,n,zi);var i,a,s=uo({},e.imports,n.imports,zi),o=wo(s),l=Oe(s,o),u=0,h=e.interpolate||ht,c="__p += '",f=vt((e.escape||ht).source+"|"+h.source+"|"+(h===N?rt:ht).source+"|"+(e.evaluate||ht).source+"|$","g"),d="//# sourceURL="+(Ct.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Lt+"]")+"\n";t.replace(f,(function(e,r,n,s,o,l){return n||(n=s),c+=t.slice(u,l).replace(ct,$e),r&&(i=!0,c+="' +\n__e("+r+") +\n'"),o&&(a=!0,c+="';\n"+o+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),c+="';\n";var p=Ct.call(e,"variable")&&e.variable;p||(c="with (obj) {\n"+c+"\n}\n"),c=(a?c.replace(E,""):c).replace(I,"$1").replace(W,"$1;"),c="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var g=Ho((function(){return dt(o,d+"return "+c).apply(void 0,l)}));if(g.source=c,$s(g))throw g;return g},Sr.times=function(t,e){if((t=ro(t))<1||t>9007199254740991)return[];var r=4294967295,n=sr(t,4294967295);t-=4294967295;for(var i=Ae(n,e=Ji(e));++r<t;)e(r);return i},Sr.toFinite=eo,Sr.toInteger=ro,Sr.toLength=no,Sr.toLower=function(t){return so(t).toLowerCase()},Sr.toNumber=io,Sr.toSafeInteger=function(t){return t?Gr(ro(t),-9007199254740991,9007199254740991):0===t?t:0},Sr.toString=so,Sr.toUpper=function(t){return so(t).toUpperCase()},Sr.trim=function(t,e,r){if((t=so(t))&&(r||void 0===e))return t.replace(G,"");if(!t||!(e=Kn(e)))return t;var n=qe(t),i=qe(e);return ui(n,Ee(n,i),Ie(n,i)+1).join("")},Sr.trimEnd=function(t,e,r){if((t=so(t))&&(r||void 0===e))return t.replace(J,"");if(!t||!(e=Kn(e)))return t;var n=qe(t);return ui(n,0,Ie(n,qe(e))+1).join("")},Sr.trimStart=function(t,e,r){if((t=so(t))&&(r||void 0===e))return t.replace(Y,"");if(!t||!(e=Kn(e)))return t;var n=qe(t);return ui(n,Ee(n,qe(e))).join("")},Sr.truncate=function(t,e){var r=30,n="...";if(Ns(e)){var i="separator"in e?e.separator:i;r="length"in e?ro(e.length):r,n="omission"in e?Kn(e.omission):n}var a=(t=so(t)).length;if(Le(t)){var s=qe(t);a=s.length}if(r>=a)return t;var o=r-Ue(n);if(o<1)return n;var l=s?ui(s,0,o).join(""):t.slice(0,o);if(void 0===i)return l+n;if(s&&(o+=l.length-o),Xs(i)){if(t.slice(o).search(i)){var u,h=l;for(i.global||(i=vt(i.source,so(nt.exec(i))+"g")),i.lastIndex=0;u=i.exec(h);)var c=u.index;l=l.slice(0,void 0===c?o:c)}}else if(t.indexOf(Kn(i),o)!=o){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+n},Sr.unescape=function(t){return(t=so(t))&&$.test(t)?t.replace(j,Xe):t},Sr.uniqueId=function(t){var e=++Pt;return so(t)+e},Sr.upperCase=$o,Sr.upperFirst=Lo,Sr.each=ss,Sr.eachRight=os,Sr.first=Ia,Jo(Sr,(hl={},ln(Sr,(function(t,e){Ct.call(Sr.prototype,e)||(hl[e]=t)})),hl),{chain:!1}),Sr.VERSION="4.17.15",oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Sr[t].placeholder=Sr})),oe(["drop","take"],(function(t,e){Or.prototype[t]=function(r){r=void 0===r?1:ar(ro(r),0);var n=this.__filtered__&&!e?new Or(this):this.clone();return n.__filtered__?n.__takeCount__=sr(r,n.__takeCount__):n.__views__.push({size:sr(r,4294967295),type:t+(n.__dir__<0?"Right":"")}),n},Or.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),oe(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Or.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ji(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),oe(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Or.prototype[t]=function(){return this[r](1).value()[0]}})),oe(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Or.prototype[t]=function(){return this.__filtered__?new Or(this):this[r](1)}})),Or.prototype.compact=function(){return this.filter(qo)},Or.prototype.find=function(t){return this.filter(t).head()},Or.prototype.findLast=function(t){return this.reverse().find(t)},Or.prototype.invokeMap=$n((function(t,e){return"function"==typeof t?new Or(this):this.map((function(r){return mn(r,t,e)}))})),Or.prototype.reject=function(t){return this.filter(xs(Ji(t)))},Or.prototype.slice=function(t,e){t=ro(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Or(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),void 0!==e&&(r=(e=ro(e))<0?r.dropRight(-e):r.take(e-t)),r)},Or.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Or.prototype.toArray=function(){return this.take(4294967295)},ln(Or.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=Sr[n?"take"+("last"==e?"Right":""):e],a=n||/^find/.test(e);i&&(Sr.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,o=e instanceof Or,l=s[0],u=o||Bs(e),h=function(t){var e=i.apply(Sr,pe([t],s));return n&&c?e[0]:e};u&&r&&"function"==typeof l&&1!=l.length&&(o=u=!1);var c=this.__chain__,f=!!this.__actions__.length,d=a&&!c,p=o&&!f;if(!a&&u){e=p?e:new Or(this);var g=t.apply(e,s);return g.__actions__.push({func:es,args:[h],thisArg:void 0}),new Mr(g,c)}return d&&p?t.apply(this,s):(g=this.thru(h),d?n?g.value()[0]:g.value():g)})})),oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Sr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Bs(i)?i:[],t)}return this[r]((function(r){return e.apply(Bs(r)?r:[],t)}))}})),ln(Or.prototype,(function(t,e){var r=Sr[e];if(r){var n=r.name+"";Ct.call(mr,n)||(mr[n]=[]),mr[n].push({name:e,func:r})}})),mr[Ti(void 0,2).name]=[{name:"wrapper",func:void 0}],Or.prototype.clone=function(){var t=new Or(this.__wrapped__);return t.__actions__=yi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yi(this.__views__),t},Or.prototype.reverse=function(){if(this.__filtered__){var t=new Or(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Or.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Bs(t),n=e<0,i=r?t.length:0,a=function(t,e,r){var n=-1,i=r.length;for(;++n<i;){var a=r[n],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=sr(e,t+s);break;case"takeRight":t=ar(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=a.start,o=a.end,l=o-s,u=n?o:s-1,h=this.__iteratees__,c=h.length,f=0,d=sr(l,this.__takeCount__);if(!r||!n&&i==l&&d==l)return ri(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var g=-1,v=t[u+=e];++g<c;){var y=h[g],m=y.iteratee,_=y.type,w=m(v);if(2==_)v=w;else if(!w){if(1==_)continue t;break t}}p[f++]=v}return p},Sr.prototype.at=rs,Sr.prototype.chain=function(){return ts(this)},Sr.prototype.commit=function(){return new Mr(this.value(),this.__chain__)},Sr.prototype.next=function(){void 0===this.__values__&&(this.__values__=to(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Sr.prototype.plant=function(t){for(var e,r=this;r instanceof Ar;){var n=Sa(r);n.__index__=0,n.__values__=void 0,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},Sr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Or){var e=t;return this.__actions__.length&&(e=new Or(this)),(e=e.reverse()).__actions__.push({func:es,args:[Na],thisArg:void 0}),new Mr(e,this.__chain__)}return this.thru(Na)},Sr.prototype.toJSON=Sr.prototype.valueOf=Sr.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Sr.prototype.first=Sr.prototype.head,Zt&&(Sr.prototype[Zt]=function(){return this}),Sr}();Xt._=Ge,void 0===(i=function(){return Ge}.call(e,r,e,n))||(n.exports=i)}).call(this)}).call(this,r(10),r(11)(t))},function(t,e,r){"use strict";r.r(e),r.d(e,"fromString",(function(){return a})),r.d(e,"add",(function(){return s})),r.d(e,"add_",(function(){return o})),r.d(e,"multiply",(function(){return l})),r.d(e,"multiply_",(function(){return u})),r.d(e,"interpolate",(function(){return h})),r.d(e,"lerp",(function(){return c})),r.d(e,"interpolateHSL",(function(){return f})),r.d(e,"lerpHSL",(function(){return d})),r.d(e,"randomize",(function(){return p})),r.d(e,"rgb2hsl",(function(){return g})),r.d(e,"hsl2rgb",(function(){return y})),r.d(e,"toRGB",(function(){return m})),r.d(e,"toHex",(function(){return _}));var n=r(1),i=r(0);function a(t){let e,r;if(t in w)e=w[t];else{if("#"==t.charAt(0)){let r=(t.match(/[0-9a-f]/gi)||[]).map(t=>parseInt(t,16));if(3==r.length)e=r.map(t=>17*t);else{for(let t=0;t<3;t++)r[t+1]+=16*r[t],r.splice(t,1);e=r}}else e=(r=t.match(/rgb\(([0-9, ]+)\)/i))?r[1].split(/\s*,\s*/).map(t=>parseInt(t)):[0,0,0];w[t]=e}return e.slice()}function s(t,...e){let r=t.slice();for(let t=0;t<3;t++)for(let n=0;n<e.length;n++)r[t]+=e[n][t];return r}function o(t,...e){for(let r=0;r<3;r++)for(let n=0;n<e.length;n++)t[r]+=e[n][r];return t}function l(t,...e){let r=t.slice();for(let t=0;t<3;t++){for(let n=0;n<e.length;n++)r[t]*=e[n][t]/255;r[t]=Math.round(r[t])}return r}function u(t,...e){for(let r=0;r<3;r++){for(let n=0;n<e.length;n++)t[r]*=e[n][r]/255;t[r]=Math.round(t[r])}return t}function h(t,e,r=.5){let n=t.slice();for(let i=0;i<3;i++)n[i]=Math.round(n[i]+r*(e[i]-t[i]));return n}const c=h;function f(t,e,r=.5){let n=g(t),i=g(e);for(let t=0;t<3;t++)n[t]+=r*(i[t]-n[t]);return y(n)}const d=f;function p(t,e){e instanceof Array||(e=Math.round(i.a.getNormal(0,e)));let r=t.slice();for(let t=0;t<3;t++)r[t]+=e instanceof Array?Math.round(i.a.getNormal(0,e[t])):e;return r}function g(t){let e,r=t[0]/255,n=t[1]/255,i=t[2]/255,a=Math.max(r,n,i),s=Math.min(r,n,i),o=0,l=(a+s)/2;if(a==s)e=0;else{let t=a-s;switch(e=l>.5?t/(2-a-s):t/(a+s),a){case r:o=(n-i)/t+(n<i?6:0);break;case n:o=(i-r)/t+2;break;case i:o=(r-n)/t+4}o/=6}return[o,e,l]}function v(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function y(t){let e=t[2];if(0==t[1])return e=Math.round(255*e),[e,e,e];{let r=t[1],n=e<.5?e*(1+r):e+r-e*r,i=2*e-n,a=v(i,n,t[0]+1/3),s=v(i,n,t[0]),o=v(i,n,t[0]-1/3);return[Math.round(255*a),Math.round(255*s),Math.round(255*o)]}}function m(t){return`rgb(${t.map(t=>Object(n.clamp)(t,0,255)).join(",")})`}function _(t){return`#${t.map(t=>Object(n.clamp)(t,0,255).toString(16).padStart(2,"0")).join("")}`}const w={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{getContainer(){return null}setOptions(t){this._options=t}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return s}));var n=r(4),i=r(3);function a(t){let e=i.fromString(t);return 36*Math.floor(e[0]*(6/256))+6*Math.floor(e[1]*(6/256))+1*Math.floor(e[2]*(6/256))+16}class s extends n.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(t){setTimeout(t,1e3/60)}setOptions(t){super.setOptions(t);let e=[t.width,t.height],r=this.computeSize();this._offset=r.map((t,r)=>Math.floor((t-e[r])/2))}clear(){t.stdout.write(`[0;48;5;${a(this._options.bg)}m[2J`)}draw(e,r){let[n,i,s,o,l]=e,u=this._offset[0]+n,h=this._offset[1]+i,c=this.computeSize();if(u<0||u>=c[0])return;if(h<0||h>=c[1])return;if(u===this._cursor[0]&&h===this._cursor[1]||(t.stdout.write(function(t,e){return`[${e+1};${t+1}H`}(u,h)),this._cursor[0]=u,this._cursor[1]=h),r&&(s||(s=" ")),!s)return;let f=function(t,e){return`[0;38;5;${a(t)};48;5;${a(e)}m`}(o,l);f!==this._lastColor&&(t.stdout.write(f),this._lastColor=f);let d=[].concat(s);t.stdout.write(d[0]),this._cursor[0]++,this._cursor[0]>=c[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[t.stdout.columns,t.stdout.rows]}}}).call(this,r(9))},function(t,e){t.exports=function(t,e,r,n,i){if(!i){var a=[];i=function(t,e){a.push({x:t,y:e})}}var s=r-t,o=n-e,l=Math.abs(s),u=Math.abs(o),h=0,c=s>0?1:-1,f=o>0?1:-1;if(l>u)for(var d=t,p=e;c<0?d>=r:d<=r;d+=c)i(d,p),(h+=u)<<1>=l&&(p+=f,h-=l);else for(d=t,p=e;f<0?p>=n:p<=n;p+=f)i(d,p),(h+=l)<<1>=u&&(d+=c,h-=u);return a}},function(t,e){t.exports=function*(t,e,r,n){var i=r-t,a=n-e,s=Math.abs(i),o=Math.abs(a),l=0,u=i>0?1:-1,h=a>0?1:-1;if(s>o)for(var c=t,f=e;u<0?c>=r:c<=r;c+=u)yield{x:c,y:f},(l+=o)<<1>=s&&(f+=h,l-=s);else for(c=t,f=e;h<0?f>=n:f<=n;f+=h)yield{x:c,y:f},(l+=s)<<1>=o&&(c+=u,l-=o)}},function(t,e){const r=["C","D","H","S"],n=["1","2","3","4","5","6","7","8","9","10","J","Q","K","A"];function i(t,e){const r=function(t,e){let r,n;const i={suits:[0,0,0,0],rank:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],wildCards:0};for(r=0;r<t.length;r++)if(e.wildCards.indexOf(t[r].toUpperCase())>=0)i.wildCards++;else{if(n=o(t[r]),!n)return null;i.suits[n.suit]++,i.rank[n.rank-1]++,14==n.rank&&e.aceCanBeLow&&(i.rank[0]=1)}return i.cards=t,i}(t,e);let i,a;if(r){const t=function(t,e){const r={};if(Math.max.apply(null,t.suits)+t.wildCards>=e.cardsToEvaluate){if(r.isFlush=!0,e.getDetails){const n=[];h(n,t,e),function(t,e,r,n){let i,a;for(a=0;a<e.suits.length;a++)e.suits[a]===n&&(i=a);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&o(e).suit===i&&t.push(e)})}(n,t,e,Math.max.apply(null,t.suits)),r.cards=n}}else r.isFlush=!1;return r}(r,e),s=function(t,e){let r,n=0,i=0,a=t.wildCards;const s={};for(r=0;r<t.rank.length;r++)t.rank[r]?i++:i>0&&a>0?(a--,i++):(i>=e.cardsToEvaluate&&(n=r),i=0,a=t.wildCards);i+a>=e.cardsToEvaluate&&(n=t.rank.length);if(s.hiCard=n,n&&e.getDetails){const r=[],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0];h(r,t,e),t.cards.map(t=>{let a=o(t).rank-1;13===a&&n===e.cardsToEvaluate&&(a=0),r.length<e.cardsToEvaluate&&e.wildCards.indexOf(t.toUpperCase())<0&&a<=n&&a>=n-e.cardsToEvaluate&&!i[a]&&(r.push(t),i[a]=1)}),s.cards=r}return s}(r,e),c=function(t,e){let r=Math.max.apply(null,t.rank)+t.wildCards;const n={};r>t.cardsToEvaluate&&(r=t.cardsToEvaluate);if(e.getDetails){const r=[];h(r,t,e),u(r,t,e,Math.max.apply(null,t.rank)),n.cards=r}return n.maxLike=r,n}(r,e);if(5===c.maxLike)a="5ofakind",i=c.cards;else if(t.isFlush&&14===s.hiCard&&e.dontAllow.indexOf("royalflush")<0)a="royalflush",i=t.cards;else if(t.isFlush&&s.hiCard>0&&e.dontAllow.indexOf("straightflush")<0)a="straightflush",i=t.cards;else if(4===c.maxLike&&e.dontAllow.indexOf("4ofakind")<0)a="4ofakind",i=c.cards;else{const o=function(t,e){const r={isFullHouse:!1};if(e.cardsToEvaluate>=5)if(t.rank.indexOf(3)>=0){if(t.rank.indexOf(2)>=0&&(r.isFullHouse=!0,e.getDetails)){const n=[];u(n,t,e,3),u(n,t,e,2),r.cards=n}}else if(t.wildCards>0){const n=l(t,e);n.isTwoPair&&(r.isFullHouse=!0,e.getDetails&&(r.cards=n.cards,h(r.cards,t,e)))}return r}(r,e);if(o.isFullHouse&&e.dontAllow.indexOf("fullhouse")<0)a="fullhouse",i=o.cards;else if(t.isFlush&&e.dontAllow.indexOf("flush")<0)a="flush",i=t.cards;else if(s.hiCard>0&&e.dontAllow.indexOf("straight")<0)a="straight",i=s.cards;else if(3===c.maxLike&&e.dontAllow.indexOf("3ofakind")<0)a="3ofakind",i=c.cards;else{const t=l(r,e);if(t.isTwoPair&&e.dontAllow.indexOf("2pair")<0)a="2pair",i=t.cards;else if(2===c.maxLike&&e.dontAllow.indexOf("pair")<0){if(e.minPair){(function(t){const e=t.rank.indexOf(2,1);if(e>-1)return e+1;let r;for(r=t.rank.length-1;r--;r>0)if(t.rank[r])return r;return})(r)>=n.indexOf(e.minPair)+1&&(a="minpair")}a||(a="pair"),i=c.cards}else a="nothing",i=[]}}}else a="error";return e.getDetails?{match:a,cards:i}:a}function a(t,e){const i={aceCanBeLow:!1,wildCards:["JOKER"],cardsToEvaluate:5,dontAllow:[]};if(e&&(e.hasOwnProperty("aceCanBeLow")&&(i.aceCanBeLow=e.aceCanBeLow),e.hasOwnProperty("cardsToEvaluate")&&(i.cardsToEvaluate=e.cardsToEvaluate),e.hasOwnProperty("dontAllow")&&(i.dontAllow=e.dontAllow),e.hasOwnProperty("minPair")&&n.indexOf(e.minPair.toUpperCase())>-1&&(i.minPair=e.minPair.toUpperCase()),e.hasOwnProperty("wildCards"))){let t,n,a;for(t=0;t<e.wildCards.length;t++){const l=e.wildCards[t].toUpperCase();"JOKER"!==l&&(n=o(l),n?i.wildCards.push(l):(a=s(l),a>0&&r.map(t=>i.wildCards.push(l+t))))}}return i.cardsToEvaluate>t.length&&(i.cardsToEvaluate=t.length),i.cardsToEvaluate>5&&(i.cardsToEvaluate=5),i}function s(t){let e;return"10"===t?e=10:1===t.length&&(e=n.indexOf(t.toUpperCase())+1,e<2&&(e=void 0)),e}function o(t){const e={rank:0,suit:0};let n;if("10"===t.substring(0,2))e.rank=10,n=t.substring(2,t.length);else{if(2!==t.length)return;{const r=s(t.substring(0,1));if(void 0===r||r<2)return;e.rank=r,n=t.substring(1,2)}}if(e.suit=r.indexOf(n.toUpperCase()),!(e.suit<0))return e}function l(t,e){const r={};if(r.isTwoPair=t.rank.reduce((t,e)=>2===e?t+1:t,0)>=2,r.isTwoPair&&e.getDetails){const n=JSON.parse(JSON.stringify(t)),i=[];u(i,n,e,2),n.rank[o(i[0]).rank-1]=0,u(i,n,e,2),r.cards=i}return r}function u(t,e,r,n){let i,a;for(a=0;a<e.rank.length;a++)e.rank[a]===n&&(i=a);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&o(e).rank-1===i&&t.push(e)})}function h(t,e,r){e.cards.map(e=>{r.wildCards.indexOf(e.toUpperCase())>=0&&t.length<r.cardsToEvaluate&&t.push(e)})}t.exports={evaluateHand:function(t,e){return i(t,a(t,e))},evaluateAndFindCards:function(t,e){const r=a(t,e);return r.getDetails=!0,i(t,r)}}},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,u=[],h=!1,c=-1;function f(){h&&l&&(h=!1,l.length?u=l.concat(u):c=-1,u.length&&d())}function d(){if(!h){var t=o(f);h=!0;for(var e=u.length;e;){for(l=u,u=[];++c<e;)l&&l[c].run();c=-1,e=u.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||h||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"TYPE_TEXT",(function(){return w})),r.d(n,"TYPE_NEWLINE",(function(){return b})),r.d(n,"TYPE_FG",(function(){return k})),r.d(n,"TYPE_BG",(function(){return x})),r.d(n,"measure",(function(){return C})),r.d(n,"tokenize",(function(){return P}));r(0);var i=r(4);class a extends i.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(t){requestAnimationFrame(t)}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const e=`${t.fontStyle?`${t.fontStyle} `:""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=e,this._updateSize(),this._ctx.font=e,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(t,e){let r=this._ctx.canvas,n=r.getBoundingClientRect();return t-=n.left,e-=n.top,t*=r.width/n.width,e*=r.height/n.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}var s=r(1);class o extends a{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){let[r,n,i,a,s]=t,o=[(r+1)*this._spacingX,n*this._spacingY+this._hexSize];if(this._options.transpose&&o.reverse(),e&&(this._ctx.fillStyle=s,this._fill(o[0],o[1])),!i)return;this._ctx.fillStyle=a;let l=[].concat(i);for(let t=0;t<l.length;t++)this._ctx.fillText(l[t],o[0],Math.ceil(o[1]))}computeSize(t,e){return this._options.transpose&&(t+=e,t-=e=t-e),[Math.floor(t/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]}computeFontSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);let r=2*t/((this._options.width+1)*Math.sqrt(3))-1,n=e/(2+1.5*(this._options.height-1)),i=Math.min(r,n),a=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let s=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=a;let o=s/100;i=Math.floor(i)+1;let l=2*i/(this._options.spacing*(1+o/Math.sqrt(3)));return Math.ceil(l)-1}_normalizedEventToPosition(t,e){let r;this._options.transpose?(t+=e,t-=e=t-e,r=this._ctx.canvas.width):r=this._ctx.canvas.height;let n=r/this._options.height;return e=Math.floor(e/n),Object(s.mod)(e,2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){let r=this._hexSize,n=this._options.border;const i=this._ctx;i.beginPath(),this._options.transpose?(i.moveTo(t-r+n,e),i.lineTo(t-r/2+n,e+this._spacingX-n),i.lineTo(t+r/2-n,e+this._spacingX-n),i.lineTo(t+r-n,e),i.lineTo(t+r/2-n,e-this._spacingX+n),i.lineTo(t-r/2+n,e-this._spacingX+n),i.lineTo(t-r+n,e)):(i.moveTo(t,e-r+n),i.lineTo(t+this._spacingX-n,e-r/2+n),i.lineTo(t+this._spacingX-n,e+r/2-n),i.lineTo(t,e+r-n),i.lineTo(t-this._spacingX+n,e+r/2-n),i.lineTo(t-this._spacingX+n,e-r/2+n),i.lineTo(t,e-r+n)),i.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);let r,n;this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,t.transpose?(r="height",n="width"):(r="width",n="height"),this._ctx.canvas[r]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[n]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}class l extends a{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(t){super.setOptions(t),this._canvasCache={}}draw(t,e){l.cache?this._drawWithCache(t):this._drawNoCache(t,e)}_drawWithCache(t){let e,[r,n,i,a,s]=t,o=""+i+a+s;if(o in this._canvasCache)e=this._canvasCache[o];else{let t=this._options.border;e=document.createElement("canvas");let r=e.getContext("2d");if(e.width=this._spacingX,e.height=this._spacingY,r.fillStyle=s,r.fillRect(t,t,e.width-t,e.height-t),i){r.fillStyle=a,r.font=this._ctx.font,r.textAlign="center",r.textBaseline="middle";let t=[].concat(i);for(let e=0;e<t.length;e++)r.fillText(t[e],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[o]=e}this._ctx.drawImage(e,r*this._spacingX,n*this._spacingY)}_drawNoCache(t,e){let[r,n,i,a,s]=t;if(e){let t=this._options.border;this._ctx.fillStyle=s,this._ctx.fillRect(r*this._spacingX+t,n*this._spacingY+t,this._spacingX-t,this._spacingY-t)}if(!i)return;this._ctx.fillStyle=a;let o=[].concat(i);for(let t=0;t<o.length;t++)this._ctx.fillText(o[t],(r+.5)*this._spacingX,Math.ceil((n+.5)*this._spacingY))}computeSize(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}computeFontSize(t,e){let r=Math.floor(t/this._options.width),n=Math.floor(e/this._options.height),i=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let a=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=i;let s=a/100*n/r;return s>1&&(n=Math.floor(n/s)),Math.floor(n/this._options.spacing)}_normalizedEventToPosition(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(t.spacing*e),this._spacingY=Math.ceil(t.spacing*t.fontSize),t.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=t.width*this._spacingX,this._ctx.canvas.height=t.height*this._spacingY}}l.cache=!1;class u extends a{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){let[r,n,i,a,s]=t,o=this._options.tileWidth,l=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(r*o,n*l,o,l):(this._ctx.fillStyle=s,this._ctx.fillRect(r*o,n*l,o,l))),!i)return;let u=[].concat(i),h=[].concat(a),c=[].concat(s);for(let t=0;t<u.length;t++){let e=this._options.tileMap[u[t]];if(!e)throw new Error(`Char "${u[t]}" not found in tileMap`);if(this._options.tileColorize){let i=this._colorCanvas,a=i.getContext("2d");a.globalCompositeOperation="source-over",a.clearRect(0,0,o,l);let s=h[t],u=c[t];a.drawImage(this._options.tileSet,e[0],e[1],o,l,0,0,o,l),"transparent"!=s&&(a.fillStyle=s,a.globalCompositeOperation="source-atop",a.fillRect(0,0,o,l)),"transparent"!=u&&(a.fillStyle=u,a.globalCompositeOperation="destination-over",a.fillRect(0,0,o,l)),this._ctx.drawImage(i,r*o,n*l,o,l)}else this._ctx.drawImage(this._options.tileSet,e[0],e[1],o,l,r*o,n*l,o,l)}}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}var h=r(3);class c extends i.a{static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){alert(t.message)}}schedule(t){requestAnimationFrame(t)}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();let e=this._options.tileSet;e&&"complete"in e&&!e.complete?e.addEventListener("load",()=>this._updateTexture(e)):this._updateTexture(e)}draw(t,e){const r=this._gl,n=this._options;let[i,a,s,o,l]=t,u=r.canvas.height-(a+1)*n.tileHeight;if(r.scissor(i*n.tileWidth,u,n.tileWidth,n.tileHeight),e&&(n.tileColorize?r.clearColor(0,0,0,0):r.clearColor(...v(l)),r.clear(r.COLOR_BUFFER_BIT)),!s)return;let h=[].concat(s),c=[].concat(l),f=[].concat(o);r.uniform2fv(this._uniforms.targetPosRel,[i,a]);for(let t=0;t<h.length;t++){let e=this._options.tileMap[h[t]];if(!e)throw new Error(`Char "${h[t]}" not found in tileMap`);r.uniform1f(this._uniforms.colorize,n.tileColorize?1:0),r.uniform2fv(this._uniforms.tilesetPosAbs,e),n.tileColorize&&(r.uniform4fv(this._uniforms.tint,v(f[t])),r.uniform4fv(this._uniforms.bg,v(c[t]))),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...v(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){let r=this._gl.canvas,n=r.getBoundingClientRect();return t-=n.left,e-=n.top,t*=r.width/n.width,e*=r.height/n.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){let t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;let e=function(t,e,r){const n=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n)||"");const i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(i)||"");const a=t.createProgram();if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(a)||"");return a}(t,d,p);return t.useProgram(e),function(t){const e=new Float32Array([0,0,1,0,0,1,1,1]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}(t),f.forEach(r=>this._uniforms[r]=t.getUniformLocation(e,r)),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,r=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=r[0],t.canvas.height=r[1],t.viewport(0,0,r[0],r[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,r)}_updateTexture(t){!function(t,e){let r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}(this._gl,t)}}const f=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],d="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),p="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}".trim();let g={};function v(t){if(!(t in g)){let e;if("transparent"==t)e=[0,0,0,0];else if(t.indexOf("rgba")>-1){e=(t.match(/[\d.]+/g)||[]).map(Number);for(let t=0;t<3;t++)e[t]=e[t]/255}else e=h.fromString(t).map(t=>t/255),e.push(1);g[t]=e}return g[t]}var y=r(5);const m=/%([bc]){([^}]*)}/g,w=0,b=1,k=2,x=3;function C(t,e){let r={width:0,height:1},n=P(t,e),i=0;for(let t=0;t<n.length;t++){let e=n[t];switch(e.type){case w:i+=e.value.length;break;case b:r.height++,r.width=Math.max(r.width,i),i=0}}return r.width=Math.max(r.width,i),r}function P(t,e){let r=[],n=0;t.replace(m,(function(e,i,a,s){let o=t.substring(n,s);return o.length&&r.push({type:w,value:o}),r.push({type:"c"==i?k:x,value:a.trim()}),n=s+e.length,""}));let i=t.substring(n);return i.length&&r.push({type:w,value:i}),function(t,e){e||(e=1/0);let r=0,n=0,i=-1;for(;r<t.length;){let a=t[r];if(a.type==b&&(n=0,i=-1),a.type!=w){r++;continue}for(;0==n&&" "==a.value.charAt(0);)a.value=a.value.substring(1);let s=a.value.indexOf("\n");if(-1!=s){a.value=R(t,r,s,!0);let e=a.value.split("");for(;e.length&&" "==e[e.length-1];)e.pop();a.value=e.join("")}if(a.value.length){if(n+a.value.length>e){let s=-1;for(;;){let t=a.value.indexOf(" ",s+1);if(-1==t)break;if(n+t>e)break;s=t}if(-1!=s)a.value=R(t,r,s,!0);else if(-1!=i){let e=t[i],n=e.value.lastIndexOf(" ");e.value=R(t,i,n,!0),r=i}else a.value=R(t,r,e-n,!1)}else n+=a.value.length,-1!=a.value.indexOf(" ")&&(i=r);r++}else t.splice(r,1)}t.push({type:b});let a=null;for(let e=0;e<t.length;e++){let r=t[e];switch(r.type){case w:a=r;break;case b:if(a){let t=a.value.split("");for(;t.length&&" "==t[t.length-1];)t.pop();a.value=t.join("")}a=null}}return t.pop(),t}(r,e)}function R(t,e,r,n){let i={type:b},a={type:w,value:t[e].value.substring(r+(n?1:0))};return t.splice(e+1,0,i,a),t[e].value.substring(0,r)}const S={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},T={hex:o,rect:l,tile:u,"tile-gl":c,term:y.a},A={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class M{constructor(t={}){this._data={},this._dirty=!1,this._options={},t=Object.assign({},A,t),this.setOptions(t),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(t,e,r){let n=[this._options.bg,this._options.fg];this.draw(t,e,null,null,n[r%n.length])}clear(){this._data={},this._dirty=!0}setOptions(t){if(Object.assign(this._options,t),t.width||t.height||t.fontSize||t.fontFamily||t.spacing||t.layout){if(t.layout){let e=T[t.layout];this._backend=new e}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(t,e){return this._backend.computeSize(t,e)}computeFontSize(t,e){return this._backend.computeFontSize(t,e)}computeTileSize(t,e){return[Math.floor(t/this._options.width),Math.floor(e/this._options.height)]}eventToPosition(t){let e,r;return"touches"in t?(e=t.touches[0].clientX,r=t.touches[0].clientY):(e=t.clientX,r=t.clientY),this._backend.eventToPosition(e,r)}draw(t,e,r,n,i){n||(n=this._options.fg),i||(i=this._options.bg);let a=`${t},${e}`;this._data[a]=[t,e,r,n,i],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[a]=!0)}drawText(t,e,r,n){let i=null,a=null,s=t,o=e,l=1;n||(n=this._options.width-t);let u=P(r,n);for(;u.length;){let e=u.shift();switch(e.type){case w:let r=!1,n=!1,u=!1,h=!1;for(let t=0;t<e.value.length;t++){let l=e.value.charCodeAt(t),c=e.value.charAt(t);u=l>65280&&l<65377||l>65500&&l<65512||l>65518,r=32==c.charCodeAt(0)||12288==c.charCodeAt(0),!h||u||r||s++,u&&!n&&s++,this.draw(s++,o,c,i,a),n=r,h=u}break;case k:i=e.value||null;break;case x:a=e.value||null;break;case b:s=t,o++,l++}}return l}_tick(){if(this._backend.schedule(this._tick),this._dirty){if(!0===this._dirty){this._backend.clear();for(let t in this._data)this._draw(t,!1)}else for(let t in this._dirty)this._draw(t,!0);this._dirty=!1}}_draw(t,e){let r=this._data[t];r[4]!=this._options.bg&&(e=!0),this._backend.draw(r,e)}}M.Rect=l,M.Hex=o,M.Tile=u,M.TileGL=c,M.Term=y.a;Math.sqrt(3),Math.sqrt(3);class O{constructor(t,e,r,n={}){this._toX=t,this._toY=e,this._passableCallback=r,this._options=Object.assign({topology:8},n),this._dirs=S[this._options.topology],8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(t,e){let r=[];for(let n=0;n<this._dirs.length;n++){let i=this._dirs[n],a=t+i[0],s=e+i[1];this._passableCallback(a,s)&&r.push([a,s])}return r}}var B={Dijkstra:class extends O{constructor(t,e,r,n){super(t,e,r,n),this._computed={},this._todo=[],this._add(t,e,null)}compute(t,e,r){let n=t+","+e;if(n in this._computed||this._compute(t,e),!(n in this._computed))return;let i=this._computed[n];for(;i;)r(i.x,i.y),i=i.prev}_compute(t,e){for(;this._todo.length;){let r=this._todo.shift();if(r.x==t&&r.y==e)return;let n=this._getNeighbors(r.x,r.y);for(let t=0;t<n.length;t++){let e=n[t],i=e[0],a=e[1];i+","+a in this._computed||this._add(i,a,r)}}}_add(t,e,r){let n={x:t,y:e,prev:r};this._computed[t+","+e]=n,this._todo.push(n)}},AStar:class extends O{constructor(t,e,r,n={}){super(t,e,r,n),this._todo=[],this._done={}}compute(t,e,r){for(this._todo=[],this._done={},this._fromX=t,this._fromY=e,this._add(this._toX,this._toY,null);this._todo.length;){let r=this._todo.shift(),n=r.x+","+r.y;if(n in this._done)continue;if(this._done[n]=r,r.x==t&&r.y==e)break;let i=this._getNeighbors(r.x,r.y);for(let t=0;t<i.length;t++){let e=i[t],n=e[0],a=e[1];n+","+a in this._done||this._add(n,a,r)}}let n=this._done[t+","+e];if(n)for(;n;)r(n.x,n.y),n=n.prev}_add(t,e,r){let n=this._distance(t,e),i={x:t,y:e,prev:r,g:r?r.g+1:0,h:n},a=i.g+i.h;for(let t=0;t<this._todo.length;t++){let e=this._todo[t],r=e.g+e.h;if(a<r||a==r&&n<e.h)return void this._todo.splice(t,0,i)}this._todo.push(i)}_distance(t,e){switch(this._options.topology){case 4:return Math.abs(t-this._fromX)+Math.abs(e-this._fromY);case 6:let r=Math.abs(t-this._fromX),n=Math.abs(e-this._fromY);return n+Math.max(0,(r-n)/2);case 8:return Math.max(Math.abs(t-this._fromX),Math.abs(e-this._fromY))}}}};function E(t,e){let r=t>=0?2*t:-2*t-1,n=e>=0?2*e:-2*e-1;return r>=n?r*r+r+n:r+n*n}const I=function(t){return 0===t?"$0":t<100?`${t}¢`:t%100==0?`$${t/100}`:`$${Number.parseFloat(t/100).toFixed(2)}`};function W(t){switch(t){case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"A"}return t>=2&&t<=10?t:"?"}let j=0,D=()=>j++;const $=D(),L=D(),z=D(),H=D();function N(t,e){switch(t){case H:return e?"S":"♠";case $:return e?"H":"♥";case L:return e?"C":"♣";case z:return e?"D":"♦"}return"?"}const F=D(),V=D(),U=D(),q=D(),X={};X[F]={min:0,max:1,name:"point blank"},X[V]={min:2,max:6,name:"close"},X[U]={min:7,max:19,name:"medium"},X[q]={min:20,max:26,name:"long"};const G=D(),Y=D(),J=D(),K=D(),Z=D(),Q=D(),tt=D(),et=D(),rt=D(),nt=D(),it=D(),at=D(),st=D(),ot={};ot[G]={name:"dirt",symbols:["."],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},ot[Y]={name:"dirt",symbols:[""],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},ot[J]={name:"grass",symbols:['"'],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ot[K]={name:"grass",symbols:["'"],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ot[Z]={name:"grass",symbols:[""],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ot[Q]={name:"water",symbols:["~","","",""],fore:"white",back:"blue",blocksMove:!0,blocksVision:!1},ot[tt]={name:"wood floor",symbols:["="],fore:"goldenrod",back:"darkgoldenrod",blocksMove:!1,blocksVision:!1},ot[et]={name:"wood wall",symbols:["#"],fore:"darkgoldenrod",back:"brown",blocksMove:!0,blocksVision:!0},ot[rt]={name:"wood door",symbols:[";"],fore:"black",back:"darkgoldenrod",blocksMove:!1,blocksVision:!0},ot[nt]={name:"poker table",symbols:["O"],fore:"black",back:"brown",blocksMove:!0,blocksVision:!1},ot[it]={name:"bench",symbols:["–"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},ot[at]={name:"cross",symbols:["†"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},ot[st]={name:"vault door",symbols:["#"],fore:"white",back:"dimgray",blocksMove:!0,blocksVision:!0};const lt=[0,10,25,50,75,100,125,150,175,200,250,300,350,400,450,500,600,700,800,900,1e3],ut=["Abner","Adam","August","Austin","Bart","Beau","Billy","Blaze","Bo","Boone","Bowen","Bowie","Brawley","Breaker","Brent","Bret","Brock","Brody","Bronco","Brooks","Buck","Buster","Butch","Cal","Calhoun","Carson","Casey","Cash","Cassidy","Chance","Chandler","Cheyenne","Clay","Clint","Cody","Colt","Colton","Cord","Dallas","Dash","Deacon","Decker","Denver","Destry","Dexter","Dice","Dodge","Duke","Dusty","Dylan","Early","Flint","Gunner","Gus","Hank","Hawk","Heath","Hitch","Houston","Huck","Huckleberry","Jace","Jackson","Jeb","Jed","Jem","Jericho","Jesse","Josh","Judd","Judson","Justice","Kit","Laird","Landry","Levi","Luke","Mack","Maverick","Mccoy","Montana","Nash","Oakley","Otis","Phineas","Pistol","Quentin","Rancher","Ranger","Reeve","Remington","Remy","Reno","Rio","River","Romer","Roper","Roscoe","Rufus","Ryder","Rye","Sawyer","Shane","Shiloh","Silas","Stetson","Tex","Thatcher","Travis","Tripp","Ty","Wade","Walker","West","Westin","Weston","Wild","Wilder","Wyatt","Wylie","Yale","Zalman","Zane","Zeb"],ht=["Austin","Boone","Bowen","Bowie","Brody","Brooks","Buck","Calhoun","Carson","Casey","Cash","Cassidy","Clay","Cody","Colt","Colton","Cooper","Deacon","Decker","Denver","Dexter","Flint","Ford","Houston","Huckleberry","Jackson","Jones","Laird","Landry","Levi","Mccoy","Miller","Montana","Nash","Oakley","Rancher","Ranger","Reeve","Ryder","Rye","Sawyer","Smith","Stetson","Tex","Thatcher","Walker","West","Westin","Weston"];var ct=r(2),ft=r.n(ct),dt=r(7),pt=r.n(dt);class gt{constructor(){this.naturalItem=!1,this.isWeapon=!1,this.name="item",this.description="No description.",this.value=0,this.symbol="o"}}class vt extends gt{constructor(){super(),this.isWeapon=!0,this.name="weapon",this.drawSpeed=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class yt extends gt{constructor(){super(),this.name="can of beans",this.description="Some tasty beans.",this.symbol="B",this.value=50}}class mt extends gt{constructor(){super(),this.name="bank vault key",this.description="This unlocks the bank vault.",this.symbol="!"}}class _t extends vt{constructor(){super(),this.name="melee weapon",this.description="A melee weapon.",this.isMelee=!0,this.maximumRange=F}}class wt extends vt{constructor(){super(),this.name="ranged weapon",this.description="A ranged weapon.",this.isMelee=!1,this.maximumRange=q,this.capacity=1,this.currentAmmo=0,this.ammoType="bullets",this.unloadsWhenStowed=!1,this.rangeModifiers=[],this.rangeModifiers[F]=0,this.rangeModifiers[V]=0,this.rangeModifiers[U]=0,this.rangeModifiers[q]=0}}class bt extends _t{constructor(){super(),this.name="fist",this.naturalItem=!0,this.drawDelay=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class kt extends _t{constructor(){super(),this.name="knife",this.drawDelay=1,this.minDamage=1,this.maxDamageBase=4,this.maxDamageAttributes=["strength"],this.value=200}}class xt extends wt{constructor(t){super(),this.name="revolver",this.drawDelay=1,this.capacity=6,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=0,this.rangeModifiers[V]=2,this.rangeModifiers[U]=0,this.rangeModifiers[q]=-2,this.value=1200}}class Ct extends wt{constructor(t){super(),this.name="rifle",this.drawDelay=3,this.capacity=1,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=2,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=-5,this.rangeModifiers[V]=0,this.rangeModifiers[U]=2,this.rangeModifiers[q]=2,this.value=2e3}}class Pt extends wt{constructor(t){super(),this.name="shotgun",this.drawDelay=3,this.capacity=2,this.ammoType="buckshot",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=0,this.rangeModifiers[V]=5,this.rangeModifiers[U]=0,this.rangeModifiers[q]=-5,this.value=2e3}}class Rt{constructor(t,e){this.object=t,this.text=e}}class St extends Rt{constructor(t,e,r,n){super(t,"Buy "+r.name+" ("+I(n)+")"),this.price=n,this.owner=e,this.item=r}onInteract(t){t.cents>=this.price&&(t.inventory.push(this.item),t.cents-=this.price,this.owner.cents+=this.price,this.object.delete())}}class Tt extends Rt{constructor(t,e,r){super(t,"Steal "+r.name),this.owner=e,this.item=r}onInteract(t){t.inventory.push(this.item),this.object.delete()}}class At extends Rt{constructor(t){super(t,"Take "+I(t.value))}onInteract(t){t.cents+=this.object.value,this.object.delete()}}class Mt extends Rt{constructor(t,e){super(t,"Loot "+e.name),this.item=e}onInteract(t){t.inventory.push(this.item),_.remove(this.object.character.inventory,this.item)}}class Ot extends Rt{constructor(t){super(t,"Loot "+I(t.character.cents))}onInteract(t){t.cents+=this.object.character.cents,this.object.character.cents=0}}class Bt{constructor(t,e,r){this.name=t,this.symbol=e,this.color=r}getDisplayChar(){return{symbol:this.symbol,color:this.color}}delete(){_.remove(this.game.objects,this)}}class Et extends Bt{constructor(t,e,r){super(t.name,t.symbol,"white"),this.item=t,this.price=e,this.owner=r}getInteractions(){return[new St(this,this.owner,this.item,this.price),new Tt(this,this.owner,this.item)]}}class It extends Bt{constructor(t){super("body ("+t.name+")","&","white"),this.character=t}getInteractions(){let t=[];for(let e of this.character.inventory)t.push(new Mt(this,e));return this.character.cents>0&&t.push(new Ot(this)),t}}class Wt extends Bt{constructor(t){super("Cash ("+t.toString()+")","$","green"),this.value=t}getInteractions(){return[new At(this)]}}class jt{constructor(t,e){this.character=t,this.text=e}}class Dt extends jt{constructor(t,e,r,n){super(t,"Sell "+r.name+" ("+I(n)+")"),this.price=n,this.seller=e,this.item=r}onInteract(t){_.remove(t.inventory,this.item),t.cents+=this.price,this.character.cents-=this.price,this.character.addItem(this.item)}}class $t extends jt{constructor(t,e){super(t,"Deposit "+I(e)),this.value=e}onInteract(t){this.character.takeMoney(this.value,t)}}class Lt extends jt{constructor(t,e){super(t,"Withdraw "+I(e)),this.value=e}onInteract(t){this.character.giveMoney(this.value,t)}}function zt(t){let e=0;for(let r of t)e+=r.weight;let r=Math.random()*e,n=0;for(let e of t){if(r>n&&r<n+e.weight)return e.action;n+=e.weight}}class Ht{constructor(t,e,r,n){this.raiseProbability=t,this.callProbability=e,this.betProbability=n,this.cheatProbability=r}play(t){if(t.canCall())if(t.canBet()){let e=()=>{t.call()},r=()=>{t.fold()},n=()=>{t.foldAndKeepBestCard()};zt([{action:()=>{t.raise(t.getMinValidRaise())},weight:this.raiseProbability},{action:e,weight:this.callProbability},{action:n,weight:this.cheatProbability},{action:r,weight:1-this.raiseProbability-this.callProbability-this.cheatProbability}])()}else{let e=()=>{t.fold()},r=()=>{t.foldAndKeepBestCard()};zt([{action:()=>{t.call()},weight:this.callProbability},{action:r,weight:this.cheatProbability},{action:e,weight:1-this.raiseProbability-this.callProbability-this.cheatProbability}])()}else if(t.canCheck())if(t.canBet()){let e=()=>{t.check()};zt([{action:()=>{t.bet(t.getMinValidBet())},weight:this.betProbability},{action:e,weight:1-this.betProbability}])()}else t.check();else t.fold()}}class Nt{constructor(t,e){this.aggressiveness=t,this.cheatiness=e}play(t){if(5===t.game.round&&!t.cardsRevealed&&!t.cardsMucked)return t.revealCards();this.getBucketStrategy(t).play(t)}getBucketStrategy(t){return t.hole[0].value==t.hole[1].value?this.isFaceCard(t.hole[0])?new Ht(.5*this.aggressiveness,.4,.1*this.cheatiness,.5*this.aggressiveness):new Ht(.3*this.aggressiveness,.4,.1*this.cheatiness,.3*this.aggressiveness):this.isFaceCard(t.hole[0])||this.isFaceCard(t.hole[1])?new Ht(.2*this.aggressiveness,.3,.1*this.cheatiness,.2*this.aggressiveness):t.hole[0].suit==t.hole[1].suit?new Ht(.1*this.aggressiveness,.2,.1*this.cheatiness,.1*this.aggressiveness):new Ht(.05*this.aggressiveness,.1,.1*this.cheatiness,.05*this.aggressiveness)}isFaceCard(t){return t.value>10}}let Ft=0,Vt=[];class Ut{constructor(t,e,r,n,i,a){this.name="Stranger",this.symbol="@",this.color="white",this.isPC=!1,this.isNPC=!0,this.id=Ft++,this.cents=0,this.bullets=0,this.buckshot=0,this.arrows=0,this.inventory=[],this.equippedWeapon=null,this.naturalWeapon=new bt,this.initiative=0,this.level=t,this.xp=0,this.strength=e,this.quickness=r,this.cunning=n,this.guile=i,this.grit=a,this.health=this.getMaxHealth(),this.vigilance=this.getMaxVigilance(),this.subterfuge=this.getMaxSubterfuge(),this.honor=0,this.menace=0,this.luck=0,this.threat=0,this.utterance="",this.activePokerPlayerRole=null;this.pokerStrategy=new Nt(_.sample([.5,.75,1]),_.sample([.5,.75,1]))}onGameStart(){}getOpinionOf(t){return Vt.hasOwnProperty(this.id)?Vt[this.id].hasOwnProperty(t.id)||(Vt[this.id][t.id]=0):(Vt[this.id]=[],Vt[this.id][t.id]=0),Vt[this.id][t.id]}setOpinionOf(t,e){return Vt.hasOwnProperty(this.id)||(Vt[this.id]=[]),Vt[this.id][t.id]=e,Vt[this.id][t.id]}modifyOpinionOf(t,e){return this.setOpinionOf(t,this.getOpinionOf(t)+e)}getDisplayChar(){return{symbol:this.symbol,color:"white"}}getMaxHealth(){return 10+this.level+this.strength+this.grit}getMaxVigilance(){return 5+this.quickness+this.cunning}getMaxSubterfuge(){return this.guile+this.quickness+this.cunning}getMeleeAttack(){return this.level+this.quickness+this.strength}getRangedAttack(){return this.level+this.quickness+this.grit}getDefense(){return 10+Math.floor(this.level/2)+this.grit}startTurn(){this.utterance=""}join(t){this.isNPC&&this.say("I'm joining this game.");let e=t.addPlayer(this);this.activePokerPlayerRole=e}say(t){this.utterance?this.utterance+=" "+t:this.utterance=t}wait(){this.vigilance<this.getMaxVigilance()&&this.vigilance++,_.random(1,100)<20&&this.isNPC&&this.activePokerPlayerRole&&this.activePokerPlayerRole.game.activePlayer&&this.activePokerPlayerRole.game.activePlayer.character.isPC?this.say(_.sample(["Your go.","Waiting on you.",`${this.activePokerPlayerRole.game.activePlayer.character.name}?`])):_.random(1,100)<4&&this.say(_.sample(["*whistle*","*cough*"]))}equip(t){this.equippedWeapon&&this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.equippedWeapon=t,this.initiative-=t.drawDelay,this.game.log(`${this.name} draws his ${t.name}.`)}unequip(){this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.game.log(`${this.name} stows his ${this.equippedWeapon.name}.`),this.equippedWeapon=null}reload(){let t=this.getCurrentWeapon();t.currentAmmo++,this[t.ammoType]--,this.game.log(`${this.name} reloads his ${t.name}.`)}getCurrentWeapon(){return this.equippedWeapon||this.naturalWeapon}canReload(){let t=this.getCurrentWeapon();return t.capacity&&t.currentAmmo<t.capacity&&this[t.ammoType]>0}getDamageWithWeapon(t){let e=t.minDamage,r=t.maxDamageAttributes.reduce((t,e)=>t+this[e],t.maxDamageBase);return r=Math.max(e,r),{min:e,max:r}}isHostileTo(t){return this.getOpinionOf(t)<=-10}canAttack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t),n=[F,V,U,q].find(t=>r>=X[t].min&&r<=X[t].max);return!!n&&(!(n>e.maximumRange)&&(!(e.capacity&&e.currentAmmo<1)&&this.game.map.lineOfSightExistsBetween(this,t)))}attack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t),n=[F,V,U,q].find(t=>r>=X[t].min&&r<=X[t].max),i=e.rangeModifiers?e.rangeModifiers[n]:0,a=e.isMelee?this.getMeleeAttack():this.getRangedAttack()+i,s=_.random(1,20),o=a+s,l=t.getDefense(),u=o>=l;if(e.currentAmmo--,this.onAttack(t),e.ammoType&&this.game.addProjectile(e.ammoType,u,{x:this.x,y:this.y},{x:t.x,y:t.y}),!u)return void this.game.log(`${this.name} attacks ${t.name} with his ${e.name}. [${s}] + ${a} vs ${l} and misses.`);let{min:h,max:c}=this.getDamageWithWeapon(e),f=_.random(h,c)+i;t.takeDamage(f)?(this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${f} damage and killing him.`),this.onKill(t)):this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${f} damage.`)}takeDamage(t){return this.health=Math.max(this.health-t,0),this.vigilance=Math.max(this.vigilance-t,0),this.health<=0&&(this.die(),!0)}die(){this.activePokerPlayerRole&&this.activePokerPlayerRole.game.removePlayer(this.activePokerPlayerRole),_.remove(this.game.characters,this),this.game.addObject(new It(this),this.x,this.y),this.isPC&&(this.game.gameOver=!0)}distanceBetween(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))}getAdjacentObjects(){let t=[];return t=t.concat(this.game.getObjects(this.x+1,this.y)),t=t.concat(this.game.getObjects(this.x-1,this.y)),t=t.concat(this.game.getObjects(this.x,this.y+1)),t=t.concat(this.game.getObjects(this.x,this.y-1)),t}getAdjacentCharacters(){let t=[];return t=t.concat(this.game.getCharacters(this.x+1,this.y)),t=t.concat(this.game.getCharacters(this.x-1,this.y)),t=t.concat(this.game.getCharacters(this.x,this.y+1)),t=t.concat(this.game.getCharacters(this.x,this.y-1)),t}getAllowedInteractions(){let t=[];for(let e of this.getAdjacentObjects())t=t.concat(e.getInteractions());for(let e of this.getAdjacentCharacters())t=t.concat(e.getInteractions(this));return t}getInteractions(t){return[]}move(t,e){this.x=t,this.y=e}onCheated(t){let e=_.random(1,10)+t.subterfuge;console.log(t.name+" tries to cheat "+this.name+": "+e.toString()+" vs "+this.vigilance.toString()),e<this.vigilance&&(console.log(this.name+" catches "+t.name+" cheating"),this.onCatchesCheater(t))}onCatchesCheater(t){}}class qt extends Ut{constructor(){super(0,0,0,0,0,0),this.name="Rodney",this.cents=2e3,this.isPC=!0,this.isNPC=!1,this.bullets=50,this.buckshot=20,this.arrows=20,this.inventory.push(new xt(!0)),this.inventory.push(new kt),this.inventory.push(new yt),this.inventory.push(new Pt(!0))}gainXp(t){if(this.xp+=t,this.level<20&&this.xp>=lt[this.level+1]){let t=_.sample(["strength","quickness","cunning","guile","grit"]);this.level++,this[t]++,this.game.log(`You have gained a level and improved your ${t}.`)}}onWinHand(){this.gainXp(3)}onLoseHand(){}onAttack(t){t.isHostileTo(this)||this.game.characters.forEach(t=>{t.isNPC&&t.modifyOpinionOf(this,-2*t.desires.attackProvokers)});t.modifyOpinionOf(this,-20)}onKill(t){this.gainXp(5)}onCatchesCheater(t){this.game.log("You caught "+t.name+" cheating!")}}class Xt extends Ut{constructor(t,e,r,n,i,a){super(t,e,r,n,i,a),this.desires={gamble:0,travel:0,attackProvokers:0,defendBank:0},this.winningStreak=0,this.losingStreak=0}getThreats(){return this.game.characters.filter(t=>this.isHostileTo(t))}getPossibleTargets(){return this.getThreats().filter(t=>this.canAttack(t))}getBestWeapon(t){let e=this.inventory.filter(t=>t.isWeapon&&(!t.capacity||t.currentAmmo>0||this[t.ammoType]>0)).concat([this.naturalWeapon]);if(e.every(t=>t.isMelee))return e.sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0];let r=this.distanceBetween(t),n=[F,V,U,q].find(t=>r>=X[t].min&&r<=X[t].max);return n===F?e.filter(t=>t.isMelee).sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0]:e.filter(t=>!t.isMelee).sort((t,e)=>e.rangeModifiers[n]-t.rangeModifiers[n])[0]}generateNewPathIfRequired(t,e){this.path&&this.aStar&&(this.aStar._toX===t||this.aStar._toY===e)||(this.aStar=new B.AStar(t,e,(t,e)=>this.spaceIsValidPath(t,e)),this.path=[],this.aStar.compute(this.x,this.y,(t,e)=>{this.path.push({x:t,y:e})}),this.path.shift())}spaceIsValidPath(t,e){return this.x===t&&this.y===e||!(Math.abs(t-this.x)>100||Math.abs(e-this.y)>100)&&!this.game.isSpaceBlocked(t,e)}walkPathIfPossible(t,e){if(this.generateNewPathIfRequired(t,e),!this.spaceIsValidPath(this.path[0].x,this.path[0].y)){let r=this.game.getCharacters(this.path[0].x,this.path[0].y);r.length&&(this.modifyOpinionOf(r[0],-1),this.say("Get out of my way!"),console.log(this.name+" is blocking "+r[0].name)),this.generateNewPathIfRequired(t,e)}if(this.path.length){let t=this.path.shift();if(this.spaceIsValidPath(t.x,t.y))return this.move(t.x,t.y),!0}return!1}takeTurn(){if(this.startTurn(),this.canReload()&&!this.getCurrentWeapon().currentAmmo)return void this.reload();let t=this.getPossibleTargets().sort((t,e)=>t.health-e.health);if(t.length)return void this.attack(t[0]);if(this.canReload())return void this.reload();let e=this.getThreats().sort((t,e)=>t.distanceBetween(e));if(e.length){let t=this.getBestWeapon(e[0]);if(t!==this.getCurrentWeapon())return t===this.naturalWeapon?void this.unequip():void this.equip(t);let r=e[0];if(this.walkPathIfPossible(r.x,r.y))return}else if(this.getCurrentWeapon()!==this.naturalWeapon)return void this.unequip();let r=this.activePokerPlayerRole;if(r&&r.isActivePlayer()&&r.game.waitingForActivePlayerAction)return this.pokerStrategy.play(r),void(r.game.activePlayer=r.game.getNextPlayer(r,!0));r&&r.isDealer()&&r.game.waitingForDealerAction?r.deal():this.wait()}onWinHand(){this.winningStreak++,this.losingStreak=0,this.desires.gamble++,this.winningStreak>1&&this.desires.travel++}onLoseHand(){this.losingStreak++,this.winningStreak=0,this.desires.travel++}onAttack(t){}onKill(t){}onCatchesCheater(t){this.say(t.name+", I think you're cheating."),this.modifyOpinionOf(t,-5)}}class Gt extends Xt{constructor(){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,0,1,2])),this.name=`${_.sample(ut)} ${_.sample(ht)}`,this.symbol="@",this.cents=2e3,this.desires.attackProvokers=1}}class Yt extends Xt{constructor(){super(_.sample([0,1,2,4]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,1,2,3])),this.name=`${_.sample(ut)} ${_.sample(ht)}`,this.symbol="@",this.cents=2e3}}class Jt extends Xt{constructor(t,e,r,n){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ut)} ${_.sample(ht)}`,this.symbol="@",this.inventory.push(new xt(!0)),this.bullets=30,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=n,this.cents=8e3}getInteractions(t){let e=[];if(this.getEmptyShopSpace())for(let r of t.inventory)r.value>0&&e.push(new Dt(this,t,r,r.value));return e}addItem(t){let e=this.getEmptyShopSpace();this.game.addObject(new Et(t,t.value,this),e[0],e[1])}getEmptyShopSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}}class Kt extends Xt{constructor(){super(_.sample([1,2,3,4]),_.sample([0,1,2,2]),_.sample([0,1,1,2]),_.sample([0,0,1,1]),_.sample([0,0,1,2]),_.sample([1,2,3,4])),this.name=`${_.sample(ut)} ${_.sample(ht)}`,this.symbol="@",this.cents=4e3,this.desires.attackProvokers=5,this.inventory.push(new Ct(!0)),this.inventory.push(new xt(!0)),this.bullets=120}}class Zt extends Xt{constructor(t,e,r,n){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([1,2,3,4]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ut)} ${_.sample(ht)}`,this.symbol="@",this.inventory.push(new xt(!0)),this.inventory.push(new mt),this.bullets=12,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=n,this.cents=8e3,this.cashList=[],this.accounts={}}getInteractions(t){let e=[];return this.accounts[t]&&(this.accounts[t]>=1e3?e.push(new Lt(this,1e3)):this.accounts[t]>0&&e.push(new Lt(this,this.accounts[t]))),t.cents>=1e3&&e.push(new $t(this,1e3)),e}getEmptyVaultSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}onGameStart(){this.addMoneyToVault(2e3),this.addMoneyToVault(2e3)}takeMoney(t,e){e.cents-=t,this.accounts[e]?this.accounts[e]+=t:this.accounts[e]=t,this.addMoneyToVault(t)}addMoneyToVault(t){let e=this.getEmptyVaultSpace(),r=this.game.addObject(new Wt(t),e[0],e[1]);this.cashList.push(r)}giveMoney(t,e){for(e.cents+=t,this.accounts[e]-=t;t>=this.cashList[0].value;)t-=this.cashList[0].value,this.cashList[0].delete(),_.remove(this.cashList,this.cashList[0]);this.cashList[0].value=this.cashList[0].value-t}}class Qt extends class{constructor(t,e,r,n,i,a){this.top=t,this.left=e,this.width=r,this.height=n,this.seed=i,this.map=a}overlapsCell(t,e){return!(t<this.left||t>this.left+this.width-1)&&!(e<this.top||e>this.top+this.height-1)}getTile(t,e){return this.tiles[t][e]}}{constructor(t,e,r,n,i,a){super(t,e,r,n,i,a);let s=[],o=n/2+3,l=n/2-3-16;for(let t=4;t+16<r-4;t+=16)s.push({top:o,left:t,width:16,height:16,orientation:"S"}),s.push({top:l,left:t,width:16,height:16,orientation:"N"});this.createGround();let u=_.sample(s);_.remove(s,u),this.createSaloon(u.top,u.left,10,10,u.orientation),u=_.sample(s),_.remove(s,u),this.createSaloon(u.top,u.left,10,10,u.orientation),u=_.sample(s),_.remove(s,u),this.createChurch(u.top,u.left,8,12,u.orientation),u=_.sample(s),_.remove(s,u),this.createShop(u.top,u.left,8,8,u.orientation),u=_.sample(s),_.remove(s,u),this.createBank(u.top,u.left,8,8,u.orientation)}createGround(){this.tiles=[];for(let t=0;t<this.width;t++){this.tiles[t]=[];for(let e=0;e<this.height;e++)this.tiles[t][e]=_.sample([G,G,G,Y])}}createRoom(t,e,r,n){for(let i=e;i<e+r;i++)for(let e=t;e<t+n;e++)this.tiles[i][e]=tt;for(let i=e;i<e+r;i++)this.tiles[i][t]=et,this.tiles[i][t+n]=et;for(let i=t;i<t+n;i++)this.tiles[e][i]=et,this.tiles[e+r][i]=et;this.tiles[e+r][t+n]=et}createSaloon(t,e,r,n,i){this.createRoom(t,e,r,n);let a=e+5,s=t+5;this.tiles[a][s]=nt,"N"===i?this.tiles[e+6][t+n]=rt:this.tiles[e+6][t]=rt;let o=this.map.game.addPokerGame(this.left+a,this.top+s);for(let t of[[1,0],[-1,0],[0,1],[0,-1]])if(_.sample([!0,!1])){this.map.game.addCharacter(new Gt,this.left+a+t[0],this.top+s+t[1]).join(o)}}createChurch(t,e,r,n,i){if(this.createRoom(t,e,r,n),"N"===i){this.tiles[e+r/2][t+n]=rt,this.tiles[e+r/2][t+1]=at;for(let i=e+1;i<e+r;i++)for(let a=t+3;a<t+n;a+=2)i!=e+r/2&&(this.tiles[i][a]=it)}else{this.tiles[e+r/2][t]=rt,this.tiles[e+r/2][t+n-1]=at;for(let i=e+1;i<e+r;i++)for(let a=t+1;a<t+n-2;a+=2)i!=e+r/2&&(this.tiles[i][a]=it)}let a="N"===i?t+2:t+n-2;this.map.game.addCharacter(new Yt,this.left+e+r/2,this.top+a)}createShop(t,e,r,n,i){this.createRoom(t,e,r,n),"N"===i?this.tiles[e+r/2][t+n]=rt:this.tiles[e+r/2][t]=rt;let a="N"===i?t+1:t+n-1,s=this.map.game.addCharacter(new Jt(this.top+t,this.left+e,r,n),this.left+e+r/2,this.top+a);this.map.game.addObject(new Et(new yt,50,s),this.left+e+1,this.top+t+1)}createBank(t,e,r,n,i){let a=n-4,s="N"===i?t:t+4,o="N"===i?t+4:t;this.createRoom(o,e,r,4),this.createRoom(s,e,r,a),"N"===i?(this.tiles[e+r/2][t+n]=rt,this.tiles[e+r/2][o]=st):(this.tiles[e+r/2][t]=rt,this.tiles[e+r/2][s]=st);let l="N"===i?o+1:s-1;this.map.game.addCharacter(new Zt(this.top+s,this.left+e,r,a),this.left+e+r/2,this.top+l);this.map.game.addCharacter(new Kt,this.left+e+r/2+2,this.top+l),this.map.game.addCharacter(new Kt,this.left+e+r/2-2,this.top+l)}}class te{constructor(t){this.seed=ft.a.random(1e3),this.game=t,this.sites=[new Qt(-30,0,100,60,this.seed,this)]}getTile(t,e){let r=this.sites.find(r=>r.overlapsCell(t,e));if(r)return r.getTile(t-r.left,e-r.top);let n=E(this.seed,E(t,e));return t>40&&t<50?Q:(i=n,(a=[J,J,K,Z])[Math.floor(function(t,e=1,r=0){return r+(9301*t+49297)%233280/233280*(e-r)}(i)*a.length)]);var i,a}firstInterposingObstacleBetween(t,e){let r=pt()(t.x,t.y,e.x,e.y),n=r.next().value;for(;n;)if(n=r.next().value,n){let t=this.getTile(n.x,n.y);if(ot[t].blocksVision)return n.x===e.x&&n.y===e.y?null:n}return null}lineOfSightExistsBetween(t,e){return!this.firstInterposingObstacleBetween(t,e)}}var ee=r(8);const re=t=>t.startsWith("10")?10:t.startsWith("J")?11:t.startsWith("Q")?12:t.startsWith("K")?13:t.startsWith("A")?14:parseInt(t[0]),ne=(t,e)=>re(e)-re(t);function ie(t,e){let r=[...t],n=[...e];for(;r[0]===n[0]&&r.length&&n.length;)r.shift(),n.shift();return r.length&&n.length?Math.sign(n[0]-r[0]):0}function ae(t,e){if(t.comboRank!==e.comboRank)return Math.sign(e.comboRank-t.comboRank);let r=ie(t.cardsInCombo,e.cardsInCombo);return r||ie(t.bestCardsOutOfCombo,e.bestCardsOutOfCombo)}class se{constructor(t,e,r){this.rootGame=t,this.x=e,this.y=r,this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,this.round=0,this.dealer=null,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.smallBlind=100,this.bigBlind=200,this.unclaimedMoneyOnTable=0,this.deck=new le,this.communityCards=[],this.discardPile=[],this.players=[],this.playersWaitingToJoinHand=[],this.extraCard=null}getPot(){return this.players.reduce((t,e)=>t+e.currentBet,0)+this.unclaimedMoneyOnTable}getHighestBet(){return Math.max(...this.players.map(t=>t.currentBet))}addPlayer(t){let e=new oe(this,t);return this.playersWaitingToJoinHand.push(e),e}removePlayer(t){t.discardCards(),t===this.activePlayer&&(this.activePlayer=this.getNextPlayer(t,!0)),t===this.dealer&&(this.dealer=this.players[0]),_.remove(this.players,t),_.remove(this.playersWaitingToJoinHand,t),this.unclaimedMoneyOnTable+=t.currentBet,t.character.cents-=t.currentBet,t.character.activePokerPlayerRole=null}getPlayersInOrder(){const t=["0,-1","1,-1","1,0","1,1","0,1","-1,1","-1,0","-1,-1"];return this.players.sort((e,r)=>{let n=t.findIndex(t=>t===`${e.character.x-this.x},${e.character.y-this.y}`),i=t.findIndex(t=>t===`${r.character.x-this.x},${r.character.y-this.y}`);if(-1===n||-1===i)throw new Error("player is not at table");return n-i})}getNextPlayer(t,e){let r=e?this.getPlayersInOrder().filter(t=>t.inCurrentHand):this.getPlayersInOrder(),n=r.findIndex(e=>e===t)+1;return n>=r.length&&(n=0),r[n]}tick(){if(this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,0===this.round&&this.players.length+this.playersWaitingToJoinHand.length>=2)return this.players=this.players.concat(this.playersWaitingToJoinHand),this.playersWaitingToJoinHand=[],this.dealer||(this.dealer=this.players[0]),void(this.waitingForDealerAction=!0);1==this.players.filter(t=>t.inCurrentHand).length&&!this.players.filter(t=>t.inCurrentHand)[0].cardsMucked&&this.round>0?(this.dividePot(),this.players.filter(t=>t.inCurrentHand)[0].muckCards(),this.waitingForActivePlayerAction=!1):this.allPlayersHaveActed()?6===this.round?(this.cleanUp(),this.dealer=this.getNextPlayer(this.dealer,!1)):this.waitingForDealerAction=!0:this.waitingForActivePlayerAction=!0}cleanUp(){this.round=0,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.discardPile=this.discardPile.concat(this.communityCards),this.communityCards=[],this.players.forEach(t=>{t.currentWinnings=0,t.stake=0,t.currentBet=0,t.inCurrentHand=!1,t.hasTakenActionSinceLastRaise=!1,t.cardsRevealed=!1,t.cardsMucked=!1,t.discardCards()})}allPlayersHaveActed(){return this.round<5?this.players.filter(t=>t.inCurrentHand&&!t.isAllIn()).every(t=>t.hasTakenActionSinceLastRaise):this.players.filter(t=>t.inCurrentHand).every(t=>t.cardsRevealed||t.cardsMucked)}start(){this.dealer.character.say("Deal and ante."),this.round=1,this.deck.returnCards(this.discardPile),this.discardPile=[],this.deck.shuffle(),this.players.forEach(t=>{t.inCurrentHand=!0,t.extraCard&&(t.takeCard(t.extraCard),t.extraCard=null),t.takeCard(this.deck.draw()),t.takeCard(this.deck.draw())});let t=this.getNextPlayer(this.dealer,!0);t.bet(this.smallBlind);let e=this.getNextPlayer(t,!0);e.bet(this.bigBlind),this.activePlayer=this.getNextPlayer(e,!0),this.lastPlayerToBet=null,this.resetHasTakenActionSinceLastRaise()}resetHasTakenActionSinceLastRaise(){this.players.map(t=>t.hasTakenActionSinceLastRaise=!1)}flop(){this.resetHasTakenActionSinceLastRaise(),this.round=2;let t=[this.deck.draw(),this.deck.draw(),this.deck.draw()];this.communityCards.push(...t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.map(t=>t.getSpokenName()).join(", "))} on the flop.`)}turn(){this.round=3,this.resetHasTakenActionSinceLastRaise();let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the turn.`)}river(){this.round=4,this.resetHasTakenActionSinceLastRaise();let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the river.`)}reveal(){this.round=5,this.dealer.character.say("Show your cards!"),this.activePlayer=this.getNextPlayer(this.dealer,!0)}dividePot(){this.round=6,this.players.filter(t=>t.inCurrentHand).filter(t=>0===ae(this.winningHand,t.bestHand())).map(t=>t.character.say("I win!"));let t=0;this.players.forEach(e=>{t+=e.currentBet,e.character.cents-=e.currentBet,e.stake=e.currentBet});let e=[],r=this.players.sort((t,e)=>t.stake-e.stake);do{let t=r.filter(t=>t.stake===r[0].stake),n=t[0].stake;e.push({contestedBy:[...r],amount:n*r.length}),r=_.difference(r,t).sort((t,e)=>t.stake-e.stake),r.map(t=>t.stake-=n)}while(r.length);e[e.length-1].amount+=this.unclaimedMoneyOnTable,this.unclaimedMoneyOnTable=0,e.forEach(t=>{let e={comboRank:-1};t.contestedBy.forEach(t=>{let r=t.bestHand();ae(r,e)<=0&&(e=r)});let r=t.contestedBy.filter(t=>0===ae(e,t.bestHand()));r.map(e=>e.currentWinnings+=Math.floor(t.amount/r.length))});let n=0;this.players.forEach(t=>{t.character.cents+=t.currentWinnings,n+=t.currentWinnings,console.log(`${t.character.name} gets ${I(t.currentWinnings)} from the pot.`)});let i=t-n;this.unclaimedMoneyOnTable+=i,console.log(`${I(i)} is left on the table.`)}}class oe{constructor(t,e){this.game=t,this.character=e,this.currentWinnings=0,this.stake=0,this.currentBet=0,this.hole=[],this.inCurrentHand=!1,this.hasTakenActionSinceLastRaise=!1,this.cardsRevealed=!1,this.cardsMucked=!1}getBestCard(){return this.hole.sort((t,e)=>4*e.value+e.suit-4*t.value-t.suit)[0]}isDealer(){return this.game.dealer===this}isActivePlayer(){return this.game.activePlayer===this}isAllIn(){return this.inCurrentHand&&this.character.cents===this.currentBet}isMatchingHighestBet(){return this.inCurrentHand&&this.currentBet>=this.game.getHighestBet()}bestHand(){return function(t,e){let r=t.concat(e).map(t=>t.toRankingString()),n=Object(ee.evaluateAndFindCards)(r),i=ft.a.difference(r,n.cards).sort(ne).slice(0,5-n.cards.length);return{match:n.match,cardsInCombo:n.cards.map(re),bestCardsOutOfCombo:i.map(re),comboRank:(a=n.match,{"5ofakind":10,royalflush:9,straightflush:8,"4ofakind":7,fullhouse:6,flush:5,straight:4,"3ofakind":3,"2pair":2,pair:1,nothing:0}[a])};var a}(this.hole,this.game.communityCards)}takeCard(t){this.hole.push(t)}discardCards(){this.game.discardPile=this.game.discardPile.concat(this.hole),this.hole=[]}deal(){switch(this.game.waitingForDealerAction=!1,this.game.round){case 0:return this.game.start();case 1:return this.game.flop();case 2:return this.game.turn();case 3:return this.game.river();case 4:return this.game.reveal();case 5:return this.game.dividePot()}}getMaxValidBet(){let t=this.game.players.filter(t=>t.inCurrentHand&&t!==this).reduce((t,e)=>Math.max(t,e.character.cents),0);return Math.min(this.character.cents,t)}getMinValidBet(){return Math.min(this.game.bigBlind,this.character.cents)}getMaxValidRaise(){let t=this.game.players.filter(t=>t.inCurrentHand&&t!==this).reduce((t,e)=>Math.max(t,e.character.cents),0);return Math.min(this.character.cents-this.getCallAmount(),t)}getMinValidRaise(){return Math.min(this.getCallAmount(),this.character.cents-this.getCallAmount())}bet(t){this.currentBet+=t,this.game.lastPlayerToBet=this,this.character.say(`I bet ${I(t)}.`),this.game.resetHasTakenActionSinceLastRaise(),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}call(){this.currentBet=this.game.getHighestBet(),this.game.lastPlayerToBet=this,this.game.waitingForActivePlayerAction=!1,this.character.say("I call."),this.hasTakenActionSinceLastRaise=!0}getCallAmount(){return this.game.getHighestBet()-this.currentBet}canReveal(){return this.inCurrentHand&&!this.cardsRevealed}canCheck(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&(this.isAllIn()||this.isMatchingHighestBet())}canBet(){return this.canCheck()}canRaise(){return this.canCall()&&this.character.cents>this.getCallAmount()}canFold(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&this.currentBet<this.game.getHighestBet()}canCall(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&!this.isAllIn()&&this.currentBet<this.game.getHighestBet()}fold(){this.inCurrentHand=!1,this.character.say("I fold."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}foldAndKeepBestCard(){this.inCurrentHand=!1,this.character.say("I fold."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1,this.extraCard=this.getBestCard()}check(){this.character.say("Check."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}call(){this.currentBet+=this.getCallAmount(),this.game.lastPlayerToBet=this,this.character.say("I call."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}raise(t){this.currentBet+=this.getCallAmount()+t,this.game.lastPlayerToBet=this,this.character.say(`I raise ${I(t)}.`),this.game.resetHasTakenActionSinceLastRaise(),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}revealCards(){this.cardsRevealed=!0;let t=this.bestHand();this.character.say(`${_.capitalize(t.match)}.`),ae(t,this.game.winningHand)<=0&&(this.game.winningHand=t),this.game.waitingForActivePlayerAction=!1,this.hole.length>2&&this.game.players.filter(t=>t!==this).forEach(t=>t.character.onCheated(this.character))}muckCards(){this.cardsMucked=!0,this.character.say("Nothin'.")}}class le{constructor(){this.cards=[],[$,z,H,L].forEach(t=>{for(let e=2;e<15;e++)this.cards.push(new ue(e,t))}),this.shuffle()}shuffle(){this.cards=_.shuffle(this.cards)}draw(){return this.cards.pop()}count(){return this.cards.length}returnCards(t){this.cards=this.cards.concat(t)}}class ue{constructor(t,e){this.value=t,this.suit=e}toString(){return`${W(this.value)}${N(this.suit,!1)}`}toRankingString(){return`${W(this.value)}${N(this.suit,!0)}`}getSpokenName(){switch(this.value){case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";case 10:return"ten";case 11:return"jack";case 12:return"queen";case 13:return"king";case 14:return"ace"}}getColor(){return[$,z].includes(this.suit)?"red":"black"}}var he=r(6),ce=r.n(he);const fe=Math.floor(27.5),de=Math.floor(22.5),pe=function(t,e=!1){return t.map(t=>`%c{${e?"black":t.getColor()}}%b{white}${e?"??":t.toString()}%c{white}%b{black}`).join(" ")+"%c{}"};let ge=new M({width:85,height:55});document.body.appendChild(ge.getContainer());let ve=new class{constructor(){this.turn=0,this.gameOver=!1,this.characters=[],this.objects=[],this.pokerGames=[],this.projectiles=[],this.map=new te(this),this.player=new qt,this.addCharacter(this.player,0,0),this.characters.forEach(t=>{t.onGameStart()})}addCharacter(t,e,r){return this.characters.push(t),t.x=e,t.y=r,t.game=this,t}addObject(t,e,r){return this.objects.push(t),t.x=e,t.y=r,t.game=this,t}addPokerGame(t,e){let r=new se(this,t,e);return this.pokerGames.push(r),r}addProjectile(t,e,r,n){this.projectiles.push({ammoType:t,isHit:e,source:r,target:n})}getProjectiles(){let t=[...this.projectiles];return this.projectiles=[],t}getCharacters(t,e){return this.characters.filter(r=>r.x===t&&r.y===e)}getObjects(t,e){return this.objects.filter(r=>r.x===t&&r.y===e)}getPokerGame(t,e){return this.pokerGames.find(r=>r.x===t&&r.y===e)}getCellContents(t,e){return{terrain:this.map.getTile(t,e),characters:this.getCharacters(t,e),objects:this.getObjects(t,e)}}spaceIsPassable(t,e){return!ot[this.getCellContents(t,e).terrain].blocksMove&&(!this.getCharacters(t,e).length&&!this.getObjects(t,e).length)}movePlayer(t,e){let r=this.player.x+t,n=this.player.y+e;return!this.player.activePokerPlayerRole&&(this.spaceIsPassable(r,n)?(this.player.startTurn(),this.player.move(r,n),!0):this.getPokerGame(r,n)?(this.player.startTurn(),this.player.join(this.getPokerGame(r,n)),!0):(this.getObjects(r,n).length,!1))}playerPasses(){return this.player.startTurn(),this.player.wait(),!0}playTurn(){this.turn++,this.pokerGames.forEach(t=>{t.tick()}),this.characters.forEach(t=>{t.isNPC&&t.takeTurn()})}isSpaceBlocked(t,e){return!!ot[this.map.getTile(t,e)].blocksMove||!!this.getCharacters(t,e).length}},ye=new class{constructor(t,e){this.game=t,this.display=e,this.mouseCoords=[0,0],this.cursorCoords=[0,0],this.showCursor=!1,this.showInventory=!1,this.inventoryCursor=0,this.showPokerView=!1,this.tempBetValue=0,this.tempRaiseValue=0,this.messageLog=[]}log(t){this.messageLog.unshift(t),this.messageLog.length>10&&this.messageLog.pop(),console.log(t)}clearControls(){this.showCursor=!1,this.showInventory=!1,this.showPokerView=!1}toggleInventory(){this.showInventory=!this.showInventory,this.showInventory&&(this.showPokerView=!1)}togglePokerView(){this.showPokerView=!this.showPokerView,this.game.player.activePokerPlayerRole||(this.showPokerView=!1),this.showPokerView&&(this.showInventory=!1)}moveCursor(t,e){this.cursorCoords=[this.cursorCoords[0]+t,this.cursorCoords[1]+e]}moveInventoryCursor(t){this.inventoryCursor+=t,this.inventoryCursor>=this.game.player.inventory.length&&(this.inventoryCursor=0),this.inventoryCursor<0&&(this.inventoryCursor=this.game.player.inventory.length-1)}isMapSpaceInView(t){let{x:e,y:r}=this.mapCoordsToDisplayCoords(t);return!(e<0||r<0||e>=55||r>=45)}cycleTargets(){if(this.showCursor){let t=this.game.characters.filter(t=>t.isNPC&&this.isMapSpaceInView(t)).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player)),e=this.getMapCursorCoords(),r=this.game.getCharacters(e.x,e.y);if(r.length){let e=t[t.indexOf(r[0])+1];e||(e=t[0]),this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:e.x,y:e.y}))}else t.length&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}else{let t=this.game.characters.filter(t=>t.isNPC).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player));t&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}this.showCursor=!0}updateMouseCoords(t){let e=t[0]!==this.mouseCoords[0]||t[1]!==this.mouseCoords[1];return e&&(this.mouseCoords=t,this.cursorCoords=t),e}getDisplayCursorCoords(){return{x:this.cursorCoords[0],y:this.cursorCoords[1]}}getMapCursorCoords(){return this.displayCoordsToMapCoords(this.getDisplayCursorCoords())}getDisplayMouseCoords(){return{x:this.mouseCoords[0],y:this.mouseCoords[1]}}getMapMouseCoords(){return this.displayCoordsToMapCoords(this.getDisplayMouseCoords())}displayCoordsToMapCoords(t){return{x:t.x+this.game.player.x-fe,y:t.y+this.game.player.y-de}}mapCoordsToDisplayCoords(t){return{x:t.x-this.game.player.x+fe,y:t.y-this.game.player.y+de}}coordsToArray(t){return[t.x,t.y]}drawCursor(){if(!this.showCursor)return;let{x:t,y:e}=this.getDisplayCursorCoords();this.display.draw(t,e,"X","red","black");let r=this.getMapCursorCoords(),n=this.game.map.firstInterposingObstacleBetween(this.game.player,r);if(n){let t=this.mapCoordsToDisplayCoords(n),e=this.mapCoordsToDisplayCoords(this.game.player);ce()(e.x,e.y,t.x,t.y).slice(1).forEach(t=>{this.display.draw(t.x,t.y,"•","red","black")}),this.display.draw(t.x,t.y,"X","red","black")}}drawMap(){for(let t=-fe;t<fe+!0;t++)for(let e=-de;e<de+!0;e++){let r=t+fe,n=e+de,{x:i,y:a}=this.displayCoordsToMapCoords({x:r,y:n}),s=this.game.getCellContents(i,a),o=ot[s.terrain];if(this.display.draw(r,n,ft.a.sample(o.symbols),o.fore,o.back),s.characters.length){let t=s.characters[0].getDisplayChar();this.display.draw(r,n,t.symbol,t.color,o.back)}else if(s.objects.length){let t=s.objects[0].getDisplayChar();this.display.draw(r,n,t.symbol,t.color,o.back)}}this.showInventory?(this.clearSidebar(),this.drawInventory()):this.showPokerView?(this.clearSidebar(),this.drawPokerSidebar()):(this.clearSidebar(),this.drawSidebar()),this.drawUtterances(),this.drawOverlay(),this.drawCursor()}drawMessageLog(){for(let t=0;t<85;t++)for(let e=0;e<10;e++)this.display.draw(t,e+45," ");this.messageLog.forEach((t,e)=>{this.display.drawText(0,45+e,t)})}drawUtterances(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);(e.length?e:this.game.characters).forEach(t=>{if(t.utterance){let e=this.mapCoordsToDisplayCoords({x:t.x,y:t.y});e.x<55&&(this.display.draw(e.x+1,e.y-1,"/","black","white"),this.display.drawText(e.x,e.y-2,"%c{black}%b{white}"+t.utterance))}})}clearSidebar(){for(let t=0;t<30;t++)for(let e=0;e<45;e++)this.display.draw(55+t,e," ")}getKeyboardCommands(){if(this.game.gameOver)return[];let t=this.game.player,e=[];if(e.push({key:"TAB",description:"select target"}),e.push({key:"SPACE",description:"wait"}),this.showInventory?e.push({key:"ESC",description:"hide inventory"}):this.showPokerView?e.push({key:"ESC",description:"hide poker"}):this.showCursor&&e.push({key:"ESC",description:"hide cursor"}),e.push({key:"I",description:this.showInventory?"hide inventory":"show inventory"}),t.canReload()&&e.push({key:"R",description:"reload "+t.getCurrentWeapon().name}),this.showInventory){let r=t.inventory[this.inventoryCursor];r&&r.isWeapon&&(r!==t.getCurrentWeapon()?e.push({key:"E",description:"equip "+r.name}):e.push({key:"E",description:"unequip "+r.name}))}let r=this.game.player.activePokerPlayerRole;if(r){if(r&&e.push({key:"Q",description:"quit poker game"}),e.push({key:"P",description:this.showPokerView?"hide poker":"show poker"}),r.isActivePlayer()){let t=r.getMinValidBet(),n=r.getMaxValidBet(),i=r.getMinValidRaise(),a=r.getMaxValidRaise();this.tempBetValue=Math.max(t,this.tempBetValue),this.tempBetValue=Math.min(n,this.tempBetValue),this.tempRaiseValue=Math.max(t,this.tempRaiseValue),this.tempRaiseValue=Math.min(n,this.tempRaiseValue);let s=this.tempBetValue<n,o=this.tempBetValue>t,l=this.tempRaiseValue<a,u=this.tempRaiseValue>i;r.canReveal()&&e.push({key:"S",description:"show cards"}),r.canFold()&&(e.push({key:"F",description:"fold"}),e.push({key:"Z",description:"fold and keep "+pe([r.getBestCard()])})),r.canCheck()&&e.push({key:"C",description:"check"}),r.canCall()&&e.push({key:"C",description:"call"}),r.canRaise()&&(e.push({key:"R",description:`raise  ${I(this.tempRaiseValue)}`}),l&&u?e.push({key:"+/-",description:"increase/decrease raise"}):l?e.push({key:"+",description:"increase raise"}):u&&e.push({key:"-",description:"decrease raise"})),r.canBet()&&(e.push({key:"B",description:`bet ${I(this.tempBetValue)}`}),s&&o?e.push({key:"+/-",description:"increase/decrease bet"}):s?e.push({key:"+",description:"increase bet"}):o&&e.push({key:"-",description:"decrease bet"}))}r&&r.isDealer()&&r.game.waitingForDealerAction&&e.push({key:"D",description:"deal"})}let n=this.getTarget();n&&t.canAttack(n)&&e.push({key:"A",description:`attack with ${t.getCurrentWeapon().name}`});let i=0,a=[];for(let e of t.getAllowedInteractions())i+=1,a.push({key:i.toString(),description:e.text});return e=e.concat(a.reverse()),e}drawAvailableCommands(){this.getKeyboardCommands().forEach((t,e)=>{this.drawSidebarRow(44-e,t.key+":",t.description)})}drawSidebar(){let t=this.game.player;this.drawSidebarRow(0,t.name),this.drawSidebarRow(2,"Health:",`${t.health}/${t.getMaxHealth()}`),this.drawSidebarRow(3,"Vigilance:",`${t.vigilance}/${t.getMaxVigilance()}`),this.drawSidebarRow(4,"Subterfuge:",`${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.drawSidebarRow(5,"Money:",I(t.cents)),this.drawSidebarRow(7,"Level "+t.level,`${t.xp}/${lt[t.level+1]} xp`),this.drawSidebarRow(8,"Strength",t.strength),this.drawSidebarRow(9,"Quickness",t.quickness),this.drawSidebarRow(10,"Cunning",t.cunning),this.drawSidebarRow(11,"Guile",t.guile),this.drawSidebarRow(12,"Grit",t.grit);let e=t.getCurrentWeapon();this.drawWeaponSidebarRow(14,e),this.drawWeaponStatblock(15,e),this.drawAvailableCommands()}drawWeaponSidebarRow(t,e,r=!1){let n=e.isMelee?"[∞]":`[${e.currentAmmo}/${e.capacity}]`;this.drawSidebarRow(t,ft.a.capitalize(e.name),n,r)}drawCardSidebarRow(t,e,r,n,i=""){this.display.drawText(56,t,`${e} ${pe(r,n)}${i}`)}drawSidebarRow(t,e="",r="",n){let i=30-String(e).length-String(r).length-2;this.display.drawText(56,t,(n?"%c{white}":"")+String(e)+ft.a.repeat(" ",i)+String(r))}drawWeaponStatblock(t,e){let r=this.game.player.getDamageWithWeapon(e);this.drawSidebarRow(t,e.description),this.drawSidebarRow(t+1,"Draw delay:",`${e.drawDelay}`),this.drawSidebarRow(t+2,"Damage:",r.min===r.max?r.min:`${r.min}-${r.max}`),this.drawSidebarRow(t+3,"Range:",e.isMelee?"Melee":`[${[e.rangeModifiers[F],e.rangeModifiers[V],e.rangeModifiers[U],e.rangeModifiers[q]].join("/")}]`)}drawInventory(){let t=this.game.player;this.drawSidebarRow(0,"Inventory"),this.drawSidebarRow(2,"Wielding:"),this.drawWeaponSidebarRow(3,t.getCurrentWeapon()),this.drawSidebarRow(5,"Money:",I(t.cents)),this.drawSidebarRow(6,"Bullets:",t.bullets),this.drawSidebarRow(7,"Buckshot:",t.buckshot),this.drawSidebarRow(8,"Arrows:",t.arrows);let e=t.inventory[this.inventoryCursor];e&&(e.isWeapon?(this.drawWeaponSidebarRow(10,e,!0),this.drawWeaponStatblock(11,e)):(this.drawSidebarRow(10,ft.a.capitalize(e.name),"",!0),this.drawSidebarRow(11,e.description)));t.inventory.forEach((t,r)=>{t.isWeapon?this.drawWeaponSidebarRow(16+r,t,t===e):this.drawSidebarRow(16+r,ft.a.capitalize(t.name),"",t===e)}),this.drawAvailableCommands()}drawPokerPlayerStatblock(t,e){let r="";e.game.dealer===e&&(r=" (dealer)");let n=e.character.isPC||e.cardsRevealed,i="";n&&e.hole.length>=2&&(i=` (${e.bestHand().match})`),this.drawSidebarRow(t+0,e.character.name+r),this.drawSidebarRow(t+1,"Cash:",I(e.character.cents)),this.drawSidebarRow(t+2,"Current bet:",I(e.currentBet)),this.drawCardSidebarRow(t+3,"Cards:",e.hole,!n,i)}drawPokerSidebar(){let t=this.game.player.activePokerPlayerRole.game;this.drawSidebarRow(0,"Poker Game"),this.drawSidebarRow(2,"Blinds:",`${I(t.smallBlind)}/${I(t.bigBlind)}`),this.drawSidebarRow(3,"Pot:",`${I(t.getPot())}`),this.drawCardSidebarRow(4,"Common:",t.communityCards),t.getPlayersInOrder().forEach((t,e)=>{this.drawPokerPlayerStatblock(6+5*e,t)}),this.drawAvailableCommands()}drawOverlay(){let t=this.getMapMouseCoords(),e=this.getDisplayMouseCoords();this.display.drawText(0,0,`Turn: ${this.game.turn} Player: ${this.game.player.x},${this.game.player.y}`),this.display.drawText(0,1,`(Mouse) Map: ${t.x},${t.y} Display: ${e.x},${e.y}`),this.drawTooltip()}drawMuzzleFlash(){let t=!1;return this.game.getProjectiles().forEach(e=>{let r=ce()(e.source.x,e.source.y,e.target.x,e.target.y);r="bullets"===e.ammoType?r.slice(1,2):"buckshot"===e.ammoType?r.slice(1,3):[],r.forEach(e=>{let{x:r,y:n}=this.mapCoordsToDisplayCoords(e);this.display.draw(r,n,"*","orange","white"),t=!0})}),t}getTarget(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);return e.length?e[0]:null}drawTooltip(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.showCursor?this.getDisplayCursorCoords():this.getDisplayMouseCoords(),r=this.game.getCharacters(t.x,t.y);if(r.length){let t=r[0];if(this.display.drawText(e.x+2,e.y+0,t.name),this.display.drawText(e.x+2,e.y+1,`Health: ${t.health}/${t.getMaxHealth()}`),this.display.drawText(e.x+2,e.y+2,`Vigilance: ${t.vigilance}/${t.getMaxVigilance()}`),this.display.drawText(e.x+2,e.y+3,`Subterfuge: ${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.display.drawText(e.x+2,e.y+4,`Money: ${I(t.cents)}`),t.activePokerPlayerRole){this.display.drawText(e.x+2,e.y+5,`Current bet: ${I(t.activePokerPlayerRole.currentBet)}`);let r=t.isPC||t.activePokerPlayerRole.cardsRevealed;this.display.drawText(e.x+2,e.y+6,`Cards: ${pe(t.activePokerPlayerRole.hole,!r)}`)}}let n=this.game.getPokerGame(t.x,t.y);n&&(this.display.drawText(e.x+2,e.y,"Poker Game"),this.display.drawText(e.x+2,e.y+1,`Blinds: ${I(n.smallBlind)}/${I(n.bigBlind)}`),this.display.drawText(e.x+2,e.y+2,`Pot: ${I(n.getPot())}`),this.display.drawText(e.x+2,e.y+3,`Common: ${pe(n.communityCards)}`),n.unclaimedMoneyOnTable)}}(ve,ge);ve.log=ye.log.bind(ye);let me=new class{constructor(t,e){this.game=t,this.view=e}handleEvent(t){switch(t.type){case"mousemove":return this.handleMouseMove(t);case"click":return this.handleMouseClick(t);case"keydown":return this.handleKeyDown(t)}}movePlayerOrCursor(t,e){if(this.view.showInventory&&0===t)this.view.moveInventoryCursor(e);else{if(!this.view.showCursor){let r=this.game.movePlayer(t,e);return r&&this.game.player.activePokerPlayerRole&&!this.view.showPokerView&&this.view.togglePokerView(),r}this.view.moveCursor(t,e)}}handleKeyDown(t){console.log(t.keyCode);let e=this.game.player,r=!1;if(!this.game.gameOver)switch(t.keyCode){case 32:this.game.playerPasses(),r=!0;break;case 33:r=this.movePlayerOrCursor(1,-1);break;case 34:r=this.movePlayerOrCursor(1,1);break;case 35:r=this.movePlayerOrCursor(-1,1);break;case 36:r=this.movePlayerOrCursor(-1,-1);break;case 37:r=this.movePlayerOrCursor(-1,0);break;case 38:r=this.movePlayerOrCursor(0,-1);break;case 39:r=this.movePlayerOrCursor(1,0);break;case 40:r=this.movePlayerOrCursor(0,1);break;case 27:this.view.clearControls();break;case 9:t.preventDefault(),this.view.cycleTargets();break;case 73:this.view.toggleInventory();break;case 80:this.view.togglePokerView();break;case 67:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCheck()?(e.activePokerPlayerRole.check(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0):e.activePokerPlayerRole&&e.activePokerPlayerRole.canCall()&&(e.activePokerPlayerRole.call(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 65:let n=this.view.getTarget();n&&e.canAttack(n)&&(e.attack(this.view.getTarget()),r=!0);break;case 66:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()&&(e.activePokerPlayerRole.bet(this.view.tempBetValue),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 70:e.activePokerPlayerRole&&e.activePokerPlayerRole.canFold()&&(e.activePokerPlayerRole.fold(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 83:e.activePokerPlayerRole&&e.activePokerPlayerRole.canReveal()&&(e.activePokerPlayerRole.revealCards(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 68:e.activePokerPlayerRole&&e.activePokerPlayerRole.isDealer()&&e.activePokerPlayerRole.game.waitingForDealerAction&&(e.activePokerPlayerRole.deal(),r=!0);break;case 81:e.activePokerPlayerRole&&(e.activePokerPlayerRole.game.removePlayer(e.activePokerPlayerRole),this.view.showPokerView=!1);break;case 189:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()?this.view.tempBetValue-=100:e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(this.view.tempRaiseValue-=100);break;case 187:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()?this.view.tempBetValue+=100:e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(this.view.tempRaiseValue+=100);break;case 69:if(this.view.showInventory){let t=e.inventory[this.view.inventoryCursor];t&&t.isWeapon&&(t!==e.getCurrentWeapon()?(e.equip(t),r=!0):(e.unequip(),r=!0))}break;case 82:e.canReload()?(e.reload(),r=!0):e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(e.activePokerPlayerRole.raise(this.view.tempRaiseValue),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 90:e.activePokerPlayerRole&&e.activePokerPlayerRole.canFold()&&(e.activePokerPlayerRole.foldAndKeepBestCard(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 49:e.getAllowedInteractions().length>=1&&e.getAllowedInteractions()[0].onInteract(e);break;case 50:e.getAllowedInteractions().length>=2&&e.getAllowedInteractions()[1].onInteract(e);break;case 51:e.getAllowedInteractions().length>=3&&e.getAllowedInteractions()[2].onInteract(e);break;case 52:e.getAllowedInteractions().length>=4&&e.getAllowedInteractions()[3].onInteract(e);break;case 53:e.getAllowedInteractions().length>=5&&e.getAllowedInteractions()[4].onInteract(e);break;case 54:e.getAllowedInteractions().length>=6&&e.getAllowedInteractions()[5].onInteract(e);break;case 55:e.getAllowedInteractions().length>=7&&e.getAllowedInteractions()[6].onInteract(e);break;case 56:e.getAllowedInteractions().length>=8&&e.getAllowedInteractions()[7].onInteract(e);break;case 57:e.getAllowedInteractions().length>=9&&e.getAllowedInteractions()[9].onInteract(e)}r&&this.game.playTurn(),this.view.drawMessageLog(),this.view.drawMap(),this.view.drawOverlay(),this.view.drawMuzzleFlash()&&setTimeout(()=>this.view.drawMap(),50)}handleMouseMove(t){let e=this.view.display.eventToPosition(t);this.view.updateMouseCoords(e)&&this.view.drawMap()}handleMouseClick(t){this.view.display.eventToPosition(t)}}(ve,ye);window.addEventListener("keydown",me),window.addEventListener("mousemove",me),window.addEventListener("click",me);let _e=()=>{ye.drawMap(),setTimeout(_e,900)};_e()}]);
!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e,r){"use strict";const i=2.3283064365386963e-10;class n{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*i,t=69069*t+1>>>0,this._s1=t*i,t=69069*t+1>>>0,this._s2=t*i,this._c=1,this}getUniform(){let t=2091639*this._s0+this._c*i;return this._s0=this._s1,this._s1=this._s2,this._c=0|t,this._s2=t-this._c,this._s2}getUniformInt(t,e){let r=Math.max(t,e),i=Math.min(t,e);return Math.floor(this.getUniform()*(r-i+1))+i}getNormal(t=0,e=1){let r,i,n;do{r=2*this.getUniform()-1,i=2*this.getUniform()-1,n=r*r+i*i}while(n>1||0==n);return t+r*Math.sqrt(-2*Math.log(n)/n)*e}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){let e=[],r=t.slice();for(;r.length;){let t=r.indexOf(this.getItem(r));e.push(r.splice(t,1)[0])}return e}getWeightedValue(t){let e=0;for(let r in t)e+=t[r];let r,i=this.getUniform()*e,n=0;for(r in t)if(n+=t[r],i<n)return r;return r}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return(new n).setState(this.getState())}}e.a=(new n).setSeed(Date.now())},function(t,e,r){"use strict";function i(t,e){return(t%e+e)%e}function n(t,e=0,r=1){return t<e?e:t>r?r:t}function s(t){return t.charAt(0).toUpperCase()+t.substring(1)}function a(t,...e){let r=a.map;return t.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,(function(i,n,a,o){if("%"==t.charAt(o-1))return i.substring(1);if(!e.length)return i;let l=e[0],h=(n||a).split(","),c=h.shift()||"",u=r[c.toLowerCase()];if(!u)return i;l=e.shift();let f=l[u].apply(l,h),d=c.charAt(0);return d!=d.toLowerCase()&&(f=s(f)),f}))}r.r(e),r.d(e,"mod",(function(){return i})),r.d(e,"clamp",(function(){return n})),r.d(e,"capitalize",(function(){return s})),r.d(e,"format",(function(){return a})),a.map={s:"toString"}},function(t,e,r){(function(t,i){var n;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var s="Expected a function",a="__lodash_placeholder__",o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],l="[object Arguments]",h="[object Array]",c="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",m="[object Object]",y="[object RegExp]",_="[object Set]",w="[object String]",b="[object Symbol]",k="[object WeakMap]",x="[object ArrayBuffer]",P="[object DataView]",C="[object Float32Array]",S="[object Float64Array]",R="[object Int8Array]",T="[object Int16Array]",M="[object Int32Array]",A="[object Uint8Array]",B="[object Uint16Array]",O="[object Uint32Array]",I=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,j=/[&<>"']/g,L=RegExp(D.source),$=RegExp(j.source),z=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,N=/<%=([\s\S]+?)%>/g,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,G=RegExp(q.source),X=/^\s+|\s+$/g,Y=/^\s+/,J=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,nt=/^[-+]0x[0-9a-f]+$/i,st=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,ot=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,ht=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ut=/['\n\r\u2028\u2029\\]/g,ft="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",gt="["+dt+"]",vt="["+ft+"]",mt="\\d+",yt="[\\u2700-\\u27bf]",_t="[a-z\\xdf-\\xf6\\xf8-\\xff]",wt="[^\\ud800-\\udfff"+dt+mt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",bt="\\ud83c[\\udffb-\\udfff]",kt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ct="[A-Z\\xc0-\\xd6\\xd8-\\xde]",St="(?:"+_t+"|"+wt+")",Rt="(?:"+Ct+"|"+wt+")",Tt="(?:"+vt+"|"+bt+")"+"?",Mt="[\\ufe0e\\ufe0f]?"+Tt+("(?:\\u200d(?:"+[kt,xt,Pt].join("|")+")[\\ufe0e\\ufe0f]?"+Tt+")*"),At="(?:"+[yt,xt,Pt].join("|")+")"+Mt,Bt="(?:"+[kt+vt+"?",vt,xt,Pt,pt].join("|")+")",Ot=RegExp("['’]","g"),It=RegExp(vt,"g"),Et=RegExp(bt+"(?="+bt+")|"+Bt+Mt,"g"),Wt=RegExp([Ct+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[gt,Ct,"$"].join("|")+")",Rt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[gt,Ct+St,"$"].join("|")+")",Ct+"?"+St+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Ct+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mt,At].join("|"),"g"),Dt=RegExp("[\\u200d\\ud800-\\udfff"+ft+"\\ufe0e\\ufe0f]"),jt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$t=-1,zt={};zt[C]=zt[S]=zt[R]=zt[T]=zt[M]=zt[A]=zt["[object Uint8ClampedArray]"]=zt[B]=zt[O]=!0,zt[l]=zt[h]=zt[x]=zt[c]=zt[P]=zt[u]=zt[f]=zt[d]=zt[g]=zt[v]=zt[m]=zt[y]=zt[_]=zt[w]=zt[k]=!1;var Ht={};Ht[l]=Ht[h]=Ht[x]=Ht[P]=Ht[c]=Ht[u]=Ht[C]=Ht[S]=Ht[R]=Ht[T]=Ht[M]=Ht[g]=Ht[v]=Ht[m]=Ht[y]=Ht[_]=Ht[w]=Ht[b]=Ht[A]=Ht["[object Uint8ClampedArray]"]=Ht[B]=Ht[O]=!0,Ht[f]=Ht[d]=Ht[k]=!1;var Nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=parseFloat,Vt=parseInt,Ut="object"==typeof t&&t&&t.Object===Object&&t,qt="object"==typeof self&&self&&self.Object===Object&&self,Gt=Ut||qt||Function("return this")(),Xt=e&&!e.nodeType&&e,Yt=Xt&&"object"==typeof i&&i&&!i.nodeType&&i,Jt=Yt&&Yt.exports===Xt,Kt=Jt&&Ut.process,Zt=function(){try{var t=Yt&&Yt.require&&Yt.require("util").types;return t||Kt&&Kt.binding&&Kt.binding("util")}catch(t){}}(),Qt=Zt&&Zt.isArrayBuffer,te=Zt&&Zt.isDate,ee=Zt&&Zt.isMap,re=Zt&&Zt.isRegExp,ie=Zt&&Zt.isSet,ne=Zt&&Zt.isTypedArray;function se(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function ae(t,e,r,i){for(var n=-1,s=null==t?0:t.length;++n<s;){var a=t[n];e(i,a,r(a),t)}return i}function oe(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}function le(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function he(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(!e(t[r],r,t))return!1;return!0}function ce(t,e){for(var r=-1,i=null==t?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s}function ue(t,e){return!!(null==t?0:t.length)&&be(t,e,0)>-1}function fe(t,e,r){for(var i=-1,n=null==t?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}function de(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}function pe(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function ge(t,e,r,i){var n=-1,s=null==t?0:t.length;for(i&&s&&(r=t[++n]);++n<s;)r=e(r,t[n],n,t);return r}function ve(t,e,r,i){var n=null==t?0:t.length;for(i&&n&&(r=t[--n]);n--;)r=e(r,t[n],n,t);return r}function me(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var ye=Ce("length");function _e(t,e,r){var i;return r(t,(function(t,r,n){if(e(t,r,n))return i=r,!1})),i}function we(t,e,r,i){for(var n=t.length,s=r+(i?1:-1);i?s--:++s<n;)if(e(t[s],s,t))return s;return-1}function be(t,e,r){return e==e?function(t,e,r){var i=r-1,n=t.length;for(;++i<n;)if(t[i]===e)return i;return-1}(t,e,r):we(t,xe,r)}function ke(t,e,r,i){for(var n=r-1,s=t.length;++n<s;)if(i(t[n],e))return n;return-1}function xe(t){return t!=t}function Pe(t,e){var r=null==t?0:t.length;return r?Te(t,e)/r:NaN}function Ce(t){return function(e){return null==e?void 0:e[t]}}function Se(t){return function(e){return null==t?void 0:t[e]}}function Re(t,e,r,i,n){return n(t,(function(t,n,s){r=i?(i=!1,t):e(r,t,n,s)})),r}function Te(t,e){for(var r,i=-1,n=t.length;++i<n;){var s=e(t[i]);void 0!==s&&(r=void 0===r?s:r+s)}return r}function Me(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function Ae(t){return function(e){return t(e)}}function Be(t,e){return de(e,(function(e){return t[e]}))}function Oe(t,e){return t.has(e)}function Ie(t,e){for(var r=-1,i=t.length;++r<i&&be(e,t[r],0)>-1;);return r}function Ee(t,e){for(var r=t.length;r--&&be(e,t[r],0)>-1;);return r}function We(t,e){for(var r=t.length,i=0;r--;)t[r]===e&&++i;return i}var De=Se({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),je=Se({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Le(t){return"\\"+Nt[t]}function $e(t){return Dt.test(t)}function ze(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r}function He(t,e){return function(r){return t(e(r))}}function Ne(t,e){for(var r=-1,i=t.length,n=0,s=[];++r<i;){var o=t[r];o!==e&&o!==a||(t[r]=a,s[n++]=r)}return s}function Fe(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function Ve(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function Ue(t){return $e(t)?function(t){var e=Et.lastIndex=0;for(;Et.test(t);)++e;return e}(t):ye(t)}function qe(t){return $e(t)?function(t){return t.match(Et)||[]}(t):function(t){return t.split("")}(t)}var Ge=Se({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Xe=function t(e){var r,i=(e=null==e?Gt:Xe.defaults(Gt.Object(),e,Xe.pick(Gt,Lt))).Array,n=e.Date,ft=e.Error,dt=e.Function,pt=e.Math,gt=e.Object,vt=e.RegExp,mt=e.String,yt=e.TypeError,_t=i.prototype,wt=dt.prototype,bt=gt.prototype,kt=e["__core-js_shared__"],xt=wt.toString,Pt=bt.hasOwnProperty,Ct=0,St=(r=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Rt=bt.toString,Tt=xt.call(gt),Mt=Gt._,At=vt("^"+xt.call(Pt).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=Jt?e.Buffer:void 0,Et=e.Symbol,Dt=e.Uint8Array,Nt=Bt?Bt.allocUnsafe:void 0,Ut=He(gt.getPrototypeOf,gt),qt=gt.create,Xt=bt.propertyIsEnumerable,Yt=_t.splice,Kt=Et?Et.isConcatSpreadable:void 0,Zt=Et?Et.iterator:void 0,ye=Et?Et.toStringTag:void 0,Se=function(){try{var t=Qn(gt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ye=e.clearTimeout!==Gt.clearTimeout&&e.clearTimeout,Je=n&&n.now!==Gt.Date.now&&n.now,Ke=e.setTimeout!==Gt.setTimeout&&e.setTimeout,Ze=pt.ceil,Qe=pt.floor,tr=gt.getOwnPropertySymbols,er=Bt?Bt.isBuffer:void 0,rr=e.isFinite,ir=_t.join,nr=He(gt.keys,gt),sr=pt.max,ar=pt.min,or=n.now,lr=e.parseInt,hr=pt.random,cr=_t.reverse,ur=Qn(e,"DataView"),fr=Qn(e,"Map"),dr=Qn(e,"Promise"),pr=Qn(e,"Set"),gr=Qn(e,"WeakMap"),vr=Qn(gt,"create"),mr=gr&&new gr,yr={},_r=Ss(ur),wr=Ss(fr),br=Ss(dr),kr=Ss(pr),xr=Ss(gr),Pr=Et?Et.prototype:void 0,Cr=Pr?Pr.valueOf:void 0,Sr=Pr?Pr.toString:void 0;function Rr(t){if(Fa(t)&&!Oa(t)&&!(t instanceof Br)){if(t instanceof Ar)return t;if(Pt.call(t,"__wrapped__"))return Rs(t)}return new Ar(t)}var Tr=function(){function t(){}return function(e){if(!Na(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Mr(){}function Ar(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Br(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Or(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Er(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Er;++e<r;)this.add(t[e])}function Dr(t){var e=this.__data__=new Ir(t);this.size=e.size}function jr(t,e){var r=Oa(t),i=!r&&Ba(t),n=!r&&!i&&Da(t),s=!r&&!i&&!n&&Ka(t),a=r||i||n||s,o=a?Me(t.length,mt):[],l=o.length;for(var h in t)!e&&!Pt.call(t,h)||a&&("length"==h||n&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||as(h,l))||o.push(h);return o}function Lr(t){var e=t.length;return e?t[Wi(0,e-1)]:void 0}function $r(t,e){return xs(mn(t),Xr(e,0,t.length))}function zr(t){return xs(mn(t))}function Hr(t,e,r){(void 0===r||Ta(t[e],r))&&(void 0!==r||e in t)||qr(t,e,r)}function Nr(t,e,r){var i=t[e];Pt.call(t,e)&&Ta(i,r)&&(void 0!==r||e in t)||qr(t,e,r)}function Fr(t,e){for(var r=t.length;r--;)if(Ta(t[r][0],e))return r;return-1}function Vr(t,e,r,i){return Qr(t,(function(t,n,s){e(i,t,r(t),s)})),i}function Ur(t,e){return t&&yn(e,wo(e),t)}function qr(t,e,r){"__proto__"==e&&Se?Se(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Gr(t,e){for(var r=-1,n=e.length,s=i(n),a=null==t;++r<n;)s[r]=a?void 0:go(t,e[r]);return s}function Xr(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Yr(t,e,r,i,n,s){var a,o=1&e,h=2&e,f=4&e;if(r&&(a=n?r(t,i,n,s):r(t)),void 0!==a)return a;if(!Na(t))return t;var k=Oa(t);if(k){if(a=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!o)return mn(t,a)}else{var I=rs(t),E=I==d||I==p;if(Da(t))return un(t,o);if(I==m||I==l||E&&!n){if(a=h||E?{}:ns(t),!o)return h?function(t,e){return yn(t,es(t),e)}(t,function(t,e){return t&&yn(e,bo(e),t)}(a,t)):function(t,e){return yn(t,ts(t),e)}(t,Ur(a,t))}else{if(!Ht[I])return n?t:{};a=function(t,e,r){var i=t.constructor;switch(e){case x:return fn(t);case c:case u:return new i(+t);case P:return function(t,e){var r=e?fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case C:case S:case R:case T:case M:case A:case"[object Uint8ClampedArray]":case B:case O:return dn(t,r);case g:return new i;case v:case w:return new i(t);case y:return function(t){var e=new t.constructor(t.source,it.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new i;case b:return n=t,Cr?gt(Cr.call(n)):{}}var n}(t,I,o)}}s||(s=new Dr);var W=s.get(t);if(W)return W;s.set(t,a),Xa(t)?t.forEach((function(i){a.add(Yr(i,e,r,i,t,s))})):Va(t)&&t.forEach((function(i,n){a.set(n,Yr(i,e,r,n,t,s))}));var D=k?void 0:(f?h?qn:Un:h?bo:wo)(t);return oe(D||t,(function(i,n){D&&(i=t[n=i]),Nr(a,n,Yr(i,e,r,n,t,s))})),a}function Jr(t,e,r){var i=r.length;if(null==t)return!i;for(t=gt(t);i--;){var n=r[i],s=e[n],a=t[n];if(void 0===a&&!(n in t)||!s(a))return!1}return!0}function Kr(t,e,r){if("function"!=typeof t)throw new yt(s);return _s((function(){t.apply(void 0,r)}),e)}function Zr(t,e,r,i){var n=-1,s=ue,a=!0,o=t.length,l=[],h=e.length;if(!o)return l;r&&(e=de(e,Ae(r))),i?(s=fe,a=!1):e.length>=200&&(s=Oe,a=!1,e=new Wr(e));t:for(;++n<o;){var c=t[n],u=null==r?c:r(c);if(c=i||0!==c?c:0,a&&u==u){for(var f=h;f--;)if(e[f]===u)continue t;l.push(c)}else s(e,u,i)||l.push(c)}return l}Rr.templateSettings={escape:z,evaluate:H,interpolate:N,variable:"",imports:{_:Rr}},Rr.prototype=Mr.prototype,Rr.prototype.constructor=Rr,Ar.prototype=Tr(Mr.prototype),Ar.prototype.constructor=Ar,Br.prototype=Tr(Mr.prototype),Br.prototype.constructor=Br,Or.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},Or.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Or.prototype.get=function(t){var e=this.__data__;if(vr){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Pt.call(e,t)?e[t]:void 0},Or.prototype.has=function(t){var e=this.__data__;return vr?void 0!==e[t]:Pt.call(e,t)},Or.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vr&&void 0===e?"__lodash_hash_undefined__":e,this},Ir.prototype.clear=function(){this.__data__=[],this.size=0},Ir.prototype.delete=function(t){var e=this.__data__,r=Fr(e,t);return!(r<0)&&(r==e.length-1?e.pop():Yt.call(e,r,1),--this.size,!0)},Ir.prototype.get=function(t){var e=this.__data__,r=Fr(e,t);return r<0?void 0:e[r][1]},Ir.prototype.has=function(t){return Fr(this.__data__,t)>-1},Ir.prototype.set=function(t,e){var r=this.__data__,i=Fr(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this},Er.prototype.clear=function(){this.size=0,this.__data__={hash:new Or,map:new(fr||Ir),string:new Or}},Er.prototype.delete=function(t){var e=Kn(this,t).delete(t);return this.size-=e?1:0,e},Er.prototype.get=function(t){return Kn(this,t).get(t)},Er.prototype.has=function(t){return Kn(this,t).has(t)},Er.prototype.set=function(t,e){var r=Kn(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this},Wr.prototype.add=Wr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Wr.prototype.has=function(t){return this.__data__.has(t)},Dr.prototype.clear=function(){this.__data__=new Ir,this.size=0},Dr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Dr.prototype.get=function(t){return this.__data__.get(t)},Dr.prototype.has=function(t){return this.__data__.has(t)},Dr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Ir){var i=r.__data__;if(!fr||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Er(i)}return r.set(t,e),this.size=r.size,this};var Qr=bn(oi),ti=bn(li,!0);function ei(t,e){var r=!0;return Qr(t,(function(t,i,n){return r=!!e(t,i,n)})),r}function ri(t,e,r){for(var i=-1,n=t.length;++i<n;){var s=t[i],a=e(s);if(null!=a&&(void 0===o?a==a&&!Ja(a):r(a,o)))var o=a,l=s}return l}function ii(t,e){var r=[];return Qr(t,(function(t,i,n){e(t,i,n)&&r.push(t)})),r}function ni(t,e,r,i,n){var s=-1,a=t.length;for(r||(r=ss),n||(n=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?ni(o,e-1,r,i,n):pe(n,o):i||(n[n.length]=o)}return n}var si=kn(),ai=kn(!0);function oi(t,e){return t&&si(t,e,wo)}function li(t,e){return t&&ai(t,e,wo)}function hi(t,e){return ce(e,(function(e){return $a(t[e])}))}function ci(t,e){for(var r=0,i=(e=on(e,t)).length;null!=t&&r<i;)t=t[Cs(e[r++])];return r&&r==i?t:void 0}function ui(t,e,r){var i=e(t);return Oa(t)?i:pe(i,r(t))}function fi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ye&&ye in gt(t)?function(t){var e=Pt.call(t,ye),r=t[ye];try{t[ye]=void 0;var i=!0}catch(t){}var n=Rt.call(t);i&&(e?t[ye]=r:delete t[ye]);return n}(t):function(t){return Rt.call(t)}(t)}function di(t,e){return t>e}function pi(t,e){return null!=t&&Pt.call(t,e)}function gi(t,e){return null!=t&&e in gt(t)}function vi(t,e,r){for(var n=r?fe:ue,s=t[0].length,a=t.length,o=a,l=i(a),h=1/0,c=[];o--;){var u=t[o];o&&e&&(u=de(u,Ae(e))),h=ar(u.length,h),l[o]=!r&&(e||s>=120&&u.length>=120)?new Wr(o&&u):void 0}u=t[0];var f=-1,d=l[0];t:for(;++f<s&&c.length<h;){var p=u[f],g=e?e(p):p;if(p=r||0!==p?p:0,!(d?Oe(d,g):n(c,g,r))){for(o=a;--o;){var v=l[o];if(!(v?Oe(v,g):n(t[o],g,r)))continue t}d&&d.push(g),c.push(p)}}return c}function mi(t,e,r){var i=null==(t=gs(t,e=on(e,t)))?t:t[Cs(Ls(e))];return null==i?void 0:se(i,t,r)}function yi(t){return Fa(t)&&fi(t)==l}function _i(t,e,r,i,n){return t===e||(null==t||null==e||!Fa(t)&&!Fa(e)?t!=t&&e!=e:function(t,e,r,i,n,s){var a=Oa(t),o=Oa(e),d=a?h:rs(t),p=o?h:rs(e),k=(d=d==l?m:d)==m,C=(p=p==l?m:p)==m,S=d==p;if(S&&Da(t)){if(!Da(e))return!1;a=!0,k=!1}if(S&&!k)return s||(s=new Dr),a||Ka(t)?Fn(t,e,r,i,n,s):function(t,e,r,i,n,s,a){switch(r){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!s(new Dt(t),new Dt(e)));case c:case u:case v:return Ta(+t,+e);case f:return t.name==e.name&&t.message==e.message;case y:case w:return t==e+"";case g:var o=ze;case _:var l=1&i;if(o||(o=Fe),t.size!=e.size&&!l)return!1;var h=a.get(t);if(h)return h==e;i|=2,a.set(t,e);var d=Fn(o(t),o(e),i,n,s,a);return a.delete(t),d;case b:if(Cr)return Cr.call(t)==Cr.call(e)}return!1}(t,e,d,r,i,n,s);if(!(1&r)){var R=k&&Pt.call(t,"__wrapped__"),T=C&&Pt.call(e,"__wrapped__");if(R||T){var M=R?t.value():t,A=T?e.value():e;return s||(s=new Dr),n(M,A,r,i,s)}}if(!S)return!1;return s||(s=new Dr),function(t,e,r,i,n,s){var a=1&r,o=Un(t),l=o.length,h=Un(e).length;if(l!=h&&!a)return!1;var c=l;for(;c--;){var u=o[c];if(!(a?u in e:Pt.call(e,u)))return!1}var f=s.get(t);if(f&&s.get(e))return f==e;var d=!0;s.set(t,e),s.set(e,t);var p=a;for(;++c<l;){u=o[c];var g=t[u],v=e[u];if(i)var m=a?i(v,g,u,e,t,s):i(g,v,u,t,e,s);if(!(void 0===m?g===v||n(g,v,r,i,s):m)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return s.delete(t),s.delete(e),d}(t,e,r,i,n,s)}(t,e,r,i,_i,n))}function wi(t,e,r,i){var n=r.length,s=n,a=!i;if(null==t)return!s;for(t=gt(t);n--;){var o=r[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){var l=(o=r[n])[0],h=t[l],c=o[1];if(a&&o[2]){if(void 0===h&&!(l in t))return!1}else{var u=new Dr;if(i)var f=i(h,c,l,t,e,u);if(!(void 0===f?_i(c,h,3,i,u):f))return!1}}return!0}function bi(t){return!(!Na(t)||(e=t,St&&St in e))&&($a(t)?At:at).test(Ss(t));var e}function ki(t){return"function"==typeof t?t:null==t?qo:"object"==typeof t?Oa(t)?Ti(t[0],t[1]):Ri(t):el(t)}function xi(t){if(!us(t))return nr(t);var e=[];for(var r in gt(t))Pt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Pi(t){if(!Na(t))return function(t){var e=[];if(null!=t)for(var r in gt(t))e.push(r);return e}(t);var e=us(t),r=[];for(var i in t)("constructor"!=i||!e&&Pt.call(t,i))&&r.push(i);return r}function Ci(t,e){return t<e}function Si(t,e){var r=-1,n=Ea(t)?i(t.length):[];return Qr(t,(function(t,i,s){n[++r]=e(t,i,s)})),n}function Ri(t){var e=Zn(t);return 1==e.length&&e[0][2]?ds(e[0][0],e[0][1]):function(r){return r===t||wi(r,t,e)}}function Ti(t,e){return ls(t)&&fs(e)?ds(Cs(t),e):function(r){var i=go(r,t);return void 0===i&&i===e?vo(r,t):_i(e,i,3)}}function Mi(t,e,r,i,n){t!==e&&si(e,(function(s,a){if(n||(n=new Dr),Na(s))!function(t,e,r,i,n,s,a){var o=ms(t,r),l=ms(e,r),h=a.get(l);if(h)return void Hr(t,r,h);var c=s?s(o,l,r+"",t,e,a):void 0,u=void 0===c;if(u){var f=Oa(l),d=!f&&Da(l),p=!f&&!d&&Ka(l);c=l,f||d||p?Oa(o)?c=o:Wa(o)?c=mn(o):d?(u=!1,c=un(l,!0)):p?(u=!1,c=dn(l,!0)):c=[]:qa(l)||Ba(l)?(c=o,Ba(o)?c=so(o):Na(o)&&!$a(o)||(c=ns(l))):u=!1}u&&(a.set(l,c),n(c,l,i,s,a),a.delete(l));Hr(t,r,c)}(t,e,a,r,Mi,i,n);else{var o=i?i(ms(t,a),s,a+"",t,e,n):void 0;void 0===o&&(o=s),Hr(t,a,o)}}),bo)}function Ai(t,e){var r=t.length;if(r)return as(e+=e<0?r:0,r)?t[e]:void 0}function Bi(t,e,r){var i=-1;return e=de(e.length?e:[qo],Ae(Jn())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Si(t,(function(t,r,n){return{criteria:de(e,(function(e){return e(t)})),index:++i,value:t}})),(function(t,e){return function(t,e,r){var i=-1,n=t.criteria,s=e.criteria,a=n.length,o=r.length;for(;++i<a;){var l=pn(n[i],s[i]);if(l){if(i>=o)return l;var h=r[i];return l*("desc"==h?-1:1)}}return t.index-e.index}(t,e,r)}))}function Oi(t,e,r){for(var i=-1,n=e.length,s={};++i<n;){var a=e[i],o=ci(t,a);r(o,a)&&zi(s,on(a,t),o)}return s}function Ii(t,e,r,i){var n=i?ke:be,s=-1,a=e.length,o=t;for(t===e&&(e=mn(e)),r&&(o=de(t,Ae(r)));++s<a;)for(var l=0,h=e[s],c=r?r(h):h;(l=n(o,c,l,i))>-1;)o!==t&&Yt.call(o,l,1),Yt.call(t,l,1);return t}function Ei(t,e){for(var r=t?e.length:0,i=r-1;r--;){var n=e[r];if(r==i||n!==s){var s=n;as(n)?Yt.call(t,n,1):Zi(t,n)}}return t}function Wi(t,e){return t+Qe(hr()*(e-t+1))}function Di(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Qe(e/2))&&(t+=t)}while(e);return r}function ji(t,e){return ws(ps(t,e,qo),t+"")}function Li(t){return Lr(Mo(t))}function $i(t,e){var r=Mo(t);return xs(r,Xr(e,0,r.length))}function zi(t,e,r,i){if(!Na(t))return t;for(var n=-1,s=(e=on(e,t)).length,a=s-1,o=t;null!=o&&++n<s;){var l=Cs(e[n]),h=r;if(n!=a){var c=o[l];void 0===(h=i?i(c,l,o):void 0)&&(h=Na(c)?c:as(e[n+1])?[]:{})}Nr(o,l,h),o=o[l]}return t}var Hi=mr?function(t,e){return mr.set(t,e),t}:qo,Ni=Se?function(t,e){return Se(t,"toString",{configurable:!0,enumerable:!1,value:Fo(e),writable:!0})}:qo;function Fi(t){return xs(Mo(t))}function Vi(t,e,r){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(r=r>s?s:r)<0&&(r+=s),s=e>r?0:r-e>>>0,e>>>=0;for(var a=i(s);++n<s;)a[n]=t[n+e];return a}function Ui(t,e){var r;return Qr(t,(function(t,i,n){return!(r=e(t,i,n))})),!!r}function qi(t,e,r){var i=0,n=null==t?i:t.length;if("number"==typeof e&&e==e&&n<=2147483647){for(;i<n;){var s=i+n>>>1,a=t[s];null!==a&&!Ja(a)&&(r?a<=e:a<e)?i=s+1:n=s}return n}return Gi(t,e,qo,r)}function Gi(t,e,r,i){e=r(e);for(var n=0,s=null==t?0:t.length,a=e!=e,o=null===e,l=Ja(e),h=void 0===e;n<s;){var c=Qe((n+s)/2),u=r(t[c]),f=void 0!==u,d=null===u,p=u==u,g=Ja(u);if(a)var v=i||p;else v=h?p&&(i||f):o?p&&f&&(i||!d):l?p&&f&&!d&&(i||!g):!d&&!g&&(i?u<=e:u<e);v?n=c+1:s=c}return ar(s,4294967294)}function Xi(t,e){for(var r=-1,i=t.length,n=0,s=[];++r<i;){var a=t[r],o=e?e(a):a;if(!r||!Ta(o,l)){var l=o;s[n++]=0===a?0:a}}return s}function Yi(t){return"number"==typeof t?t:Ja(t)?NaN:+t}function Ji(t){if("string"==typeof t)return t;if(Oa(t))return de(t,Ji)+"";if(Ja(t))return Sr?Sr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ki(t,e,r){var i=-1,n=ue,s=t.length,a=!0,o=[],l=o;if(r)a=!1,n=fe;else if(s>=200){var h=e?null:jn(t);if(h)return Fe(h);a=!1,n=Oe,l=new Wr}else l=e?[]:o;t:for(;++i<s;){var c=t[i],u=e?e(c):c;if(c=r||0!==c?c:0,a&&u==u){for(var f=l.length;f--;)if(l[f]===u)continue t;e&&l.push(u),o.push(c)}else n(l,u,r)||(l!==o&&l.push(u),o.push(c))}return o}function Zi(t,e){return null==(t=gs(t,e=on(e,t)))||delete t[Cs(Ls(e))]}function Qi(t,e,r,i){return zi(t,e,r(ci(t,e)),i)}function tn(t,e,r,i){for(var n=t.length,s=i?n:-1;(i?s--:++s<n)&&e(t[s],s,t););return r?Vi(t,i?0:s,i?s+1:n):Vi(t,i?s+1:0,i?n:s)}function en(t,e){var r=t;return r instanceof Br&&(r=r.value()),ge(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),r)}function rn(t,e,r){var n=t.length;if(n<2)return n?Ki(t[0]):[];for(var s=-1,a=i(n);++s<n;)for(var o=t[s],l=-1;++l<n;)l!=s&&(a[s]=Zr(a[s]||o,t[l],e,r));return Ki(ni(a,1),e,r)}function nn(t,e,r){for(var i=-1,n=t.length,s=e.length,a={};++i<n;){var o=i<s?e[i]:void 0;r(a,t[i],o)}return a}function sn(t){return Wa(t)?t:[]}function an(t){return"function"==typeof t?t:qo}function on(t,e){return Oa(t)?t:ls(t,e)?[t]:Ps(ao(t))}var ln=ji;function hn(t,e,r){var i=t.length;return r=void 0===r?i:r,!e&&r>=i?t:Vi(t,e,r)}var cn=Ye||function(t){return Gt.clearTimeout(t)};function un(t,e){if(e)return t.slice();var r=t.length,i=Nt?Nt(r):new t.constructor(r);return t.copy(i),i}function fn(t){var e=new t.constructor(t.byteLength);return new Dt(e).set(new Dt(t)),e}function dn(t,e){var r=e?fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pn(t,e){if(t!==e){var r=void 0!==t,i=null===t,n=t==t,s=Ja(t),a=void 0!==e,o=null===e,l=e==e,h=Ja(e);if(!o&&!h&&!s&&t>e||s&&a&&l&&!o&&!h||i&&a&&l||!r&&l||!n)return 1;if(!i&&!s&&!h&&t<e||h&&r&&n&&!i&&!s||o&&r&&n||!a&&n||!l)return-1}return 0}function gn(t,e,r,n){for(var s=-1,a=t.length,o=r.length,l=-1,h=e.length,c=sr(a-o,0),u=i(h+c),f=!n;++l<h;)u[l]=e[l];for(;++s<o;)(f||s<a)&&(u[r[s]]=t[s]);for(;c--;)u[l++]=t[s++];return u}function vn(t,e,r,n){for(var s=-1,a=t.length,o=-1,l=r.length,h=-1,c=e.length,u=sr(a-l,0),f=i(u+c),d=!n;++s<u;)f[s]=t[s];for(var p=s;++h<c;)f[p+h]=e[h];for(;++o<l;)(d||s<a)&&(f[p+r[o]]=t[s++]);return f}function mn(t,e){var r=-1,n=t.length;for(e||(e=i(n));++r<n;)e[r]=t[r];return e}function yn(t,e,r,i){var n=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=i?i(r[o],t[o],o,r,t):void 0;void 0===l&&(l=t[o]),n?qr(r,o,l):Nr(r,o,l)}return r}function _n(t,e){return function(r,i){var n=Oa(r)?ae:Vr,s=e?e():{};return n(r,t,Jn(i,2),s)}}function wn(t){return ji((function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=t.length>3&&"function"==typeof s?(n--,s):void 0,a&&os(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),e=gt(e);++i<n;){var o=r[i];o&&t(e,o,i,s)}return e}))}function bn(t,e){return function(r,i){if(null==r)return r;if(!Ea(r))return t(r,i);for(var n=r.length,s=e?n:-1,a=gt(r);(e?s--:++s<n)&&!1!==i(a[s],s,a););return r}}function kn(t){return function(e,r,i){for(var n=-1,s=gt(e),a=i(e),o=a.length;o--;){var l=a[t?o:++n];if(!1===r(s[l],l,s))break}return e}}function xn(t){return function(e){var r=$e(e=ao(e))?qe(e):void 0,i=r?r[0]:e.charAt(0),n=r?hn(r,1).join(""):e.slice(1);return i[t]()+n}}function Pn(t){return function(e){return ge(zo(Oo(e).replace(Ot,"")),t,"")}}function Cn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Tr(t.prototype),i=t.apply(r,e);return Na(i)?i:r}}function Sn(t){return function(e,r,i){var n=gt(e);if(!Ea(e)){var s=Jn(r,3);e=wo(e),r=function(t){return s(n[t],t,n)}}var a=t(e,r,i);return a>-1?n[s?e[a]:a]:void 0}}function Rn(t){return Vn((function(e){var r=e.length,i=r,n=Ar.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new yt(s);if(n&&!o&&"wrapper"==Xn(a))var o=new Ar([],!0)}for(i=o?i:r;++i<r;){var l=Xn(a=e[i]),h="wrapper"==l?Gn(a):void 0;o=h&&hs(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?o[Xn(h[0])].apply(o,h[3]):1==a.length&&hs(a)?o[l]():o.thru(a)}return function(){var t=arguments,i=t[0];if(o&&1==t.length&&Oa(i))return o.plant(i).value();for(var n=0,s=r?e[n].apply(this,t):i;++n<r;)s=e[n].call(this,s);return s}}))}function Tn(t,e,r,n,s,a,o,l,h,c){var u=128&e,f=1&e,d=2&e,p=24&e,g=512&e,v=d?void 0:Cn(t);return function m(){for(var y=arguments.length,_=i(y),w=y;w--;)_[w]=arguments[w];if(p)var b=Yn(m),k=We(_,b);if(n&&(_=gn(_,n,s,p)),a&&(_=vn(_,a,o,p)),y-=k,p&&y<c){var x=Ne(_,b);return Wn(t,e,Tn,m.placeholder,r,_,x,l,h,c-y)}var P=f?r:this,C=d?P[t]:t;return y=_.length,l?_=vs(_,l):g&&y>1&&_.reverse(),u&&h<y&&(_.length=h),this&&this!==Gt&&this instanceof m&&(C=v||Cn(C)),C.apply(P,_)}}function Mn(t,e){return function(r,i){return function(t,e,r,i){return oi(t,(function(t,n,s){e(i,r(t),n,s)})),i}(r,t,e(i),{})}}function An(t,e){return function(r,i){var n;if(void 0===r&&void 0===i)return e;if(void 0!==r&&(n=r),void 0!==i){if(void 0===n)return i;"string"==typeof r||"string"==typeof i?(r=Ji(r),i=Ji(i)):(r=Yi(r),i=Yi(i)),n=t(r,i)}return n}}function Bn(t){return Vn((function(e){return e=de(e,Ae(Jn())),ji((function(r){var i=this;return t(e,(function(t){return se(t,i,r)}))}))}))}function On(t,e){var r=(e=void 0===e?" ":Ji(e)).length;if(r<2)return r?Di(e,t):e;var i=Di(e,Ze(t/Ue(e)));return $e(e)?hn(qe(i),0,t).join(""):i.slice(0,t)}function In(t){return function(e,r,n){return n&&"number"!=typeof n&&os(e,r,n)&&(r=n=void 0),e=eo(e),void 0===r?(r=e,e=0):r=eo(r),function(t,e,r,n){for(var s=-1,a=sr(Ze((e-t)/(r||1)),0),o=i(a);a--;)o[n?a:++s]=t,t+=r;return o}(e,r,n=void 0===n?e<r?1:-1:eo(n),t)}}function En(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=no(e),r=no(r)),t(e,r)}}function Wn(t,e,r,i,n,s,a,o,l,h){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var u=[t,e,n,c?s:void 0,c?a:void 0,c?void 0:s,c?void 0:a,o,l,h],f=r.apply(void 0,u);return hs(t)&&ys(f,u),f.placeholder=i,bs(f,t,e)}function Dn(t){var e=pt[t];return function(t,r){if(t=no(t),(r=null==r?0:ar(ro(r),292))&&rr(t)){var i=(ao(t)+"e").split("e");return+((i=(ao(e(i[0]+"e"+(+i[1]+r)))+"e").split("e"))[0]+"e"+(+i[1]-r))}return e(t)}}var jn=pr&&1/Fe(new pr([,-0]))[1]==1/0?function(t){return new pr(t)}:Ko;function Ln(t){return function(e){var r=rs(e);return r==g?ze(e):r==_?Ve(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $n(t,e,r,n,o,l,h,c){var u=2&e;if(!u&&"function"!=typeof t)throw new yt(s);var f=n?n.length:0;if(f||(e&=-97,n=o=void 0),h=void 0===h?h:sr(ro(h),0),c=void 0===c?c:ro(c),f-=o?o.length:0,64&e){var d=n,p=o;n=o=void 0}var g=u?void 0:Gn(t),v=[t,e,r,n,o,d,p,l,h,c];if(g&&function(t,e){var r=t[1],i=e[1],n=r|i,s=n<131,o=128==i&&8==r||128==i&&256==r&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==r;if(!s&&!o)return t;1&i&&(t[2]=e[2],n|=1&r?0:4);var l=e[3];if(l){var h=t[3];t[3]=h?gn(h,l,e[4]):l,t[4]=h?Ne(t[3],a):e[4]}(l=e[5])&&(h=t[5],t[5]=h?vn(h,l,e[6]):l,t[6]=h?Ne(t[5],a):e[6]);(l=e[7])&&(t[7]=l);128&i&&(t[8]=null==t[8]?e[8]:ar(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=n}(v,g),t=v[0],e=v[1],r=v[2],n=v[3],o=v[4],!(c=v[9]=void 0===v[9]?u?0:t.length:sr(v[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)m=8==e||16==e?function(t,e,r){var n=Cn(t);return function s(){for(var a=arguments.length,o=i(a),l=a,h=Yn(s);l--;)o[l]=arguments[l];var c=a<3&&o[0]!==h&&o[a-1]!==h?[]:Ne(o,h);if((a-=c.length)<r)return Wn(t,e,Tn,s.placeholder,void 0,o,c,void 0,void 0,r-a);var u=this&&this!==Gt&&this instanceof s?n:t;return se(u,this,o)}}(t,e,c):32!=e&&33!=e||o.length?Tn.apply(void 0,v):function(t,e,r,n){var s=1&e,a=Cn(t);return function e(){for(var o=-1,l=arguments.length,h=-1,c=n.length,u=i(c+l),f=this&&this!==Gt&&this instanceof e?a:t;++h<c;)u[h]=n[h];for(;l--;)u[h++]=arguments[++o];return se(f,s?r:this,u)}}(t,e,r,n);else var m=function(t,e,r){var i=1&e,n=Cn(t);return function e(){var s=this&&this!==Gt&&this instanceof e?n:t;return s.apply(i?r:this,arguments)}}(t,e,r);return bs((g?Hi:ys)(m,v),t,e)}function zn(t,e,r,i){return void 0===t||Ta(t,bt[r])&&!Pt.call(i,r)?e:t}function Hn(t,e,r,i,n,s){return Na(t)&&Na(e)&&(s.set(e,t),Mi(t,e,void 0,Hn,s),s.delete(e)),t}function Nn(t){return qa(t)?void 0:t}function Fn(t,e,r,i,n,s){var a=1&r,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(t);if(h&&s.get(e))return h==e;var c=-1,u=!0,f=2&r?new Wr:void 0;for(s.set(t,e),s.set(e,t);++c<o;){var d=t[c],p=e[c];if(i)var g=a?i(p,d,c,e,t,s):i(d,p,c,t,e,s);if(void 0!==g){if(g)continue;u=!1;break}if(f){if(!me(e,(function(t,e){if(!Oe(f,e)&&(d===t||n(d,t,r,i,s)))return f.push(e)}))){u=!1;break}}else if(d!==p&&!n(d,p,r,i,s)){u=!1;break}}return s.delete(t),s.delete(e),u}function Vn(t){return ws(ps(t,void 0,Is),t+"")}function Un(t){return ui(t,wo,ts)}function qn(t){return ui(t,bo,es)}var Gn=mr?function(t){return mr.get(t)}:Ko;function Xn(t){for(var e=t.name+"",r=yr[e],i=Pt.call(yr,e)?r.length:0;i--;){var n=r[i],s=n.func;if(null==s||s==t)return n.name}return e}function Yn(t){return(Pt.call(Rr,"placeholder")?Rr:t).placeholder}function Jn(){var t=Rr.iteratee||Go;return t=t===Go?ki:t,arguments.length?t(arguments[0],arguments[1]):t}function Kn(t,e){var r,i,n=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof e?"string":"hash"]:n.map}function Zn(t){for(var e=wo(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,fs(n)]}return e}function Qn(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return bi(r)?r:void 0}var ts=tr?function(t){return null==t?[]:(t=gt(t),ce(tr(t),(function(e){return Xt.call(t,e)})))}:nl,es=tr?function(t){for(var e=[];t;)pe(e,ts(t)),t=Ut(t);return e}:nl,rs=fi;function is(t,e,r){for(var i=-1,n=(e=on(e,t)).length,s=!1;++i<n;){var a=Cs(e[i]);if(!(s=null!=t&&r(t,a)))break;t=t[a]}return s||++i!=n?s:!!(n=null==t?0:t.length)&&Ha(n)&&as(a,n)&&(Oa(t)||Ba(t))}function ns(t){return"function"!=typeof t.constructor||us(t)?{}:Tr(Ut(t))}function ss(t){return Oa(t)||Ba(t)||!!(Kt&&t&&t[Kt])}function as(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&lt.test(t))&&t>-1&&t%1==0&&t<e}function os(t,e,r){if(!Na(r))return!1;var i=typeof e;return!!("number"==i?Ea(r)&&as(e,r.length):"string"==i&&e in r)&&Ta(r[e],t)}function ls(t,e){if(Oa(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ja(t))||(V.test(t)||!F.test(t)||null!=e&&t in gt(e))}function hs(t){var e=Xn(t),r=Rr[e];if("function"!=typeof r||!(e in Br.prototype))return!1;if(t===r)return!0;var i=Gn(r);return!!i&&t===i[0]}(ur&&rs(new ur(new ArrayBuffer(1)))!=P||fr&&rs(new fr)!=g||dr&&"[object Promise]"!=rs(dr.resolve())||pr&&rs(new pr)!=_||gr&&rs(new gr)!=k)&&(rs=function(t){var e=fi(t),r=e==m?t.constructor:void 0,i=r?Ss(r):"";if(i)switch(i){case _r:return P;case wr:return g;case br:return"[object Promise]";case kr:return _;case xr:return k}return e});var cs=kt?$a:sl;function us(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function fs(t){return t==t&&!Na(t)}function ds(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in gt(r)))}}function ps(t,e,r){return e=sr(void 0===e?t.length-1:e,0),function(){for(var n=arguments,s=-1,a=sr(n.length-e,0),o=i(a);++s<a;)o[s]=n[e+s];s=-1;for(var l=i(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),se(t,this,l)}}function gs(t,e){return e.length<2?t:ci(t,Vi(e,0,-1))}function vs(t,e){for(var r=t.length,i=ar(e.length,r),n=mn(t);i--;){var s=e[i];t[i]=as(s,r)?n[s]:void 0}return t}function ms(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ys=ks(Hi),_s=Ke||function(t,e){return Gt.setTimeout(t,e)},ws=ks(Ni);function bs(t,e,r){var i=e+"";return ws(t,function(t,e){var r=e.length;if(!r)return t;var i=r-1;return e[i]=(r>1?"& ":"")+e[i],e=e.join(r>2?", ":" "),t.replace(K,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return oe(o,(function(r){var i="_."+r[0];e&r[1]&&!ue(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(Z);return e?e[1].split(Q):[]}(i),r)))}function ks(t){var e=0,r=0;return function(){var i=or(),n=16-(i-r);if(r=i,n>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xs(t,e){var r=-1,i=t.length,n=i-1;for(e=void 0===e?i:e;++r<e;){var s=Wi(r,n),a=t[s];t[s]=t[r],t[r]=a}return t.length=e,t}var Ps=function(t){var e=ka(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(U,(function(t,r,i,n){e.push(i?n.replace(et,"$1"):r||t)})),e}));function Cs(t){if("string"==typeof t||Ja(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Ss(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Rs(t){if(t instanceof Br)return t.clone();var e=new Ar(t.__wrapped__,t.__chain__);return e.__actions__=mn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ts=ji((function(t,e){return Wa(t)?Zr(t,ni(e,1,Wa,!0)):[]})),Ms=ji((function(t,e){var r=Ls(e);return Wa(r)&&(r=void 0),Wa(t)?Zr(t,ni(e,1,Wa,!0),Jn(r,2)):[]})),As=ji((function(t,e){var r=Ls(e);return Wa(r)&&(r=void 0),Wa(t)?Zr(t,ni(e,1,Wa,!0),void 0,r):[]}));function Bs(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:ro(r);return n<0&&(n=sr(i+n,0)),we(t,Jn(e,3),n)}function Os(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=i-1;return void 0!==r&&(n=ro(r),n=r<0?sr(i+n,0):ar(n,i-1)),we(t,Jn(e,3),n,!0)}function Is(t){return(null==t?0:t.length)?ni(t,1):[]}function Es(t){return t&&t.length?t[0]:void 0}var Ws=ji((function(t){var e=de(t,sn);return e.length&&e[0]===t[0]?vi(e):[]})),Ds=ji((function(t){var e=Ls(t),r=de(t,sn);return e===Ls(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?vi(r,Jn(e,2)):[]})),js=ji((function(t){var e=Ls(t),r=de(t,sn);return(e="function"==typeof e?e:void 0)&&r.pop(),r.length&&r[0]===t[0]?vi(r,void 0,e):[]}));function Ls(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var $s=ji(zs);function zs(t,e){return t&&t.length&&e&&e.length?Ii(t,e):t}var Hs=Vn((function(t,e){var r=null==t?0:t.length,i=Gr(t,e);return Ei(t,de(e,(function(t){return as(t,r)?+t:t})).sort(pn)),i}));function Ns(t){return null==t?t:cr.call(t)}var Fs=ji((function(t){return Ki(ni(t,1,Wa,!0))})),Vs=ji((function(t){var e=Ls(t);return Wa(e)&&(e=void 0),Ki(ni(t,1,Wa,!0),Jn(e,2))})),Us=ji((function(t){var e=Ls(t);return e="function"==typeof e?e:void 0,Ki(ni(t,1,Wa,!0),void 0,e)}));function qs(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(Wa(t))return e=sr(t.length,e),!0})),Me(e,(function(e){return de(t,Ce(e))}))}function Gs(t,e){if(!t||!t.length)return[];var r=qs(t);return null==e?r:de(r,(function(t){return se(e,void 0,t)}))}var Xs=ji((function(t,e){return Wa(t)?Zr(t,e):[]})),Ys=ji((function(t){return rn(ce(t,Wa))})),Js=ji((function(t){var e=Ls(t);return Wa(e)&&(e=void 0),rn(ce(t,Wa),Jn(e,2))})),Ks=ji((function(t){var e=Ls(t);return e="function"==typeof e?e:void 0,rn(ce(t,Wa),void 0,e)})),Zs=ji(qs);var Qs=ji((function(t){var e=t.length,r=e>1?t[e-1]:void 0;return r="function"==typeof r?(t.pop(),r):void 0,Gs(t,r)}));function ta(t){var e=Rr(t);return e.__chain__=!0,e}function ea(t,e){return e(t)}var ra=Vn((function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,n=function(e){return Gr(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Br&&as(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:ea,args:[n],thisArg:void 0}),new Ar(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(n)}));var ia=_n((function(t,e,r){Pt.call(t,r)?++t[r]:qr(t,r,1)}));var na=Sn(Bs),sa=Sn(Os);function aa(t,e){return(Oa(t)?oe:Qr)(t,Jn(e,3))}function oa(t,e){return(Oa(t)?le:ti)(t,Jn(e,3))}var la=_n((function(t,e,r){Pt.call(t,r)?t[r].push(e):qr(t,r,[e])}));var ha=ji((function(t,e,r){var n=-1,s="function"==typeof e,a=Ea(t)?i(t.length):[];return Qr(t,(function(t){a[++n]=s?se(e,t,r):mi(t,e,r)})),a})),ca=_n((function(t,e,r){qr(t,r,e)}));function ua(t,e){return(Oa(t)?de:Si)(t,Jn(e,3))}var fa=_n((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var da=ji((function(t,e){if(null==t)return[];var r=e.length;return r>1&&os(t,e[0],e[1])?e=[]:r>2&&os(e[0],e[1],e[2])&&(e=[e[0]]),Bi(t,ni(e,1),[])})),pa=Je||function(){return Gt.Date.now()};function ga(t,e,r){return e=r?void 0:e,$n(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function va(t,e){var r;if("function"!=typeof e)throw new yt(s);return t=ro(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var ma=ji((function(t,e,r){var i=1;if(r.length){var n=Ne(r,Yn(ma));i|=32}return $n(t,i,e,r,n)})),ya=ji((function(t,e,r){var i=3;if(r.length){var n=Ne(r,Yn(ya));i|=32}return $n(e,i,t,r,n)}));function _a(t,e,r){var i,n,a,o,l,h,c=0,u=!1,f=!1,d=!0;if("function"!=typeof t)throw new yt(s);function p(e){var r=i,s=n;return i=n=void 0,c=e,o=t.apply(s,r)}function g(t){return c=t,l=_s(m,e),u?p(t):o}function v(t){var r=t-h;return void 0===h||r>=e||r<0||f&&t-c>=a}function m(){var t=pa();if(v(t))return y(t);l=_s(m,function(t){var r=e-(t-h);return f?ar(r,a-(t-c)):r}(t))}function y(t){return l=void 0,d&&i?p(t):(i=n=void 0,o)}function _(){var t=pa(),r=v(t);if(i=arguments,n=this,h=t,r){if(void 0===l)return g(h);if(f)return cn(l),l=_s(m,e),p(h)}return void 0===l&&(l=_s(m,e)),o}return e=no(e)||0,Na(r)&&(u=!!r.leading,a=(f="maxWait"in r)?sr(no(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d),_.cancel=function(){void 0!==l&&cn(l),c=0,i=h=n=l=void 0},_.flush=function(){return void 0===l?o:y(pa())},_}var wa=ji((function(t,e){return Kr(t,1,e)})),ba=ji((function(t,e,r){return Kr(t,no(e)||0,r)}));function ka(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(s);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(ka.Cache||Er),r}function xa(t){if("function"!=typeof t)throw new yt(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ka.Cache=Er;var Pa=ln((function(t,e){var r=(e=1==e.length&&Oa(e[0])?de(e[0],Ae(Jn())):de(ni(e,1),Ae(Jn()))).length;return ji((function(i){for(var n=-1,s=ar(i.length,r);++n<s;)i[n]=e[n].call(this,i[n]);return se(t,this,i)}))})),Ca=ji((function(t,e){return $n(t,32,void 0,e,Ne(e,Yn(Ca)))})),Sa=ji((function(t,e){return $n(t,64,void 0,e,Ne(e,Yn(Sa)))})),Ra=Vn((function(t,e){return $n(t,256,void 0,void 0,void 0,e)}));function Ta(t,e){return t===e||t!=t&&e!=e}var Ma=En(di),Aa=En((function(t,e){return t>=e})),Ba=yi(function(){return arguments}())?yi:function(t){return Fa(t)&&Pt.call(t,"callee")&&!Xt.call(t,"callee")},Oa=i.isArray,Ia=Qt?Ae(Qt):function(t){return Fa(t)&&fi(t)==x};function Ea(t){return null!=t&&Ha(t.length)&&!$a(t)}function Wa(t){return Fa(t)&&Ea(t)}var Da=er||sl,ja=te?Ae(te):function(t){return Fa(t)&&fi(t)==u};function La(t){if(!Fa(t))return!1;var e=fi(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!qa(t)}function $a(t){if(!Na(t))return!1;var e=fi(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function za(t){return"number"==typeof t&&t==ro(t)}function Ha(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Na(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Fa(t){return null!=t&&"object"==typeof t}var Va=ee?Ae(ee):function(t){return Fa(t)&&rs(t)==g};function Ua(t){return"number"==typeof t||Fa(t)&&fi(t)==v}function qa(t){if(!Fa(t)||fi(t)!=m)return!1;var e=Ut(t);if(null===e)return!0;var r=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xt.call(r)==Tt}var Ga=re?Ae(re):function(t){return Fa(t)&&fi(t)==y};var Xa=ie?Ae(ie):function(t){return Fa(t)&&rs(t)==_};function Ya(t){return"string"==typeof t||!Oa(t)&&Fa(t)&&fi(t)==w}function Ja(t){return"symbol"==typeof t||Fa(t)&&fi(t)==b}var Ka=ne?Ae(ne):function(t){return Fa(t)&&Ha(t.length)&&!!zt[fi(t)]};var Za=En(Ci),Qa=En((function(t,e){return t<=e}));function to(t){if(!t)return[];if(Ea(t))return Ya(t)?qe(t):mn(t);if(Zt&&t[Zt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Zt]());var e=rs(t);return(e==g?ze:e==_?Fe:Mo)(t)}function eo(t){return t?(t=no(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ro(t){var e=eo(t),r=e%1;return e==e?r?e-r:e:0}function io(t){return t?Xr(ro(t),0,4294967295):0}function no(t){if("number"==typeof t)return t;if(Ja(t))return NaN;if(Na(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Na(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(X,"");var r=st.test(t);return r||ot.test(t)?Vt(t.slice(2),r?2:8):nt.test(t)?NaN:+t}function so(t){return yn(t,bo(t))}function ao(t){return null==t?"":Ji(t)}var oo=wn((function(t,e){if(us(e)||Ea(e))yn(e,wo(e),t);else for(var r in e)Pt.call(e,r)&&Nr(t,r,e[r])})),lo=wn((function(t,e){yn(e,bo(e),t)})),ho=wn((function(t,e,r,i){yn(e,bo(e),t,i)})),co=wn((function(t,e,r,i){yn(e,wo(e),t,i)})),uo=Vn(Gr);var fo=ji((function(t,e){t=gt(t);var r=-1,i=e.length,n=i>2?e[2]:void 0;for(n&&os(e[0],e[1],n)&&(i=1);++r<i;)for(var s=e[r],a=bo(s),o=-1,l=a.length;++o<l;){var h=a[o],c=t[h];(void 0===c||Ta(c,bt[h])&&!Pt.call(t,h))&&(t[h]=s[h])}return t})),po=ji((function(t){return t.push(void 0,Hn),se(xo,void 0,t)}));function go(t,e,r){var i=null==t?void 0:ci(t,e);return void 0===i?r:i}function vo(t,e){return null!=t&&is(t,e,gi)}var mo=Mn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),t[e]=r}),Fo(qo)),yo=Mn((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),Pt.call(t,e)?t[e].push(r):t[e]=[r]}),Jn),_o=ji(mi);function wo(t){return Ea(t)?jr(t):xi(t)}function bo(t){return Ea(t)?jr(t,!0):Pi(t)}var ko=wn((function(t,e,r){Mi(t,e,r)})),xo=wn((function(t,e,r,i){Mi(t,e,r,i)})),Po=Vn((function(t,e){var r={};if(null==t)return r;var i=!1;e=de(e,(function(e){return e=on(e,t),i||(i=e.length>1),e})),yn(t,qn(t),r),i&&(r=Yr(r,7,Nn));for(var n=e.length;n--;)Zi(r,e[n]);return r}));var Co=Vn((function(t,e){return null==t?{}:function(t,e){return Oi(t,e,(function(e,r){return vo(t,r)}))}(t,e)}));function So(t,e){if(null==t)return{};var r=de(qn(t),(function(t){return[t]}));return e=Jn(e),Oi(t,r,(function(t,r){return e(t,r[0])}))}var Ro=Ln(wo),To=Ln(bo);function Mo(t){return null==t?[]:Be(t,wo(t))}var Ao=Pn((function(t,e,r){return e=e.toLowerCase(),t+(r?Bo(e):e)}));function Bo(t){return $o(ao(t).toLowerCase())}function Oo(t){return(t=ao(t))&&t.replace(ht,De).replace(It,"")}var Io=Pn((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Eo=Pn((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Wo=xn("toLowerCase");var Do=Pn((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var jo=Pn((function(t,e,r){return t+(r?" ":"")+$o(e)}));var Lo=Pn((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),$o=xn("toUpperCase");function zo(t,e,r){return t=ao(t),void 0===(e=r?void 0:e)?function(t){return jt.test(t)}(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Ho=ji((function(t,e){try{return se(t,void 0,e)}catch(t){return La(t)?t:new ft(t)}})),No=Vn((function(t,e){return oe(e,(function(e){e=Cs(e),qr(t,e,ma(t[e],t))})),t}));function Fo(t){return function(){return t}}var Vo=Rn(),Uo=Rn(!0);function qo(t){return t}function Go(t){return ki("function"==typeof t?t:Yr(t,1))}var Xo=ji((function(t,e){return function(r){return mi(r,t,e)}})),Yo=ji((function(t,e){return function(r){return mi(t,r,e)}}));function Jo(t,e,r){var i=wo(e),n=hi(e,i);null!=r||Na(e)&&(n.length||!i.length)||(r=e,e=t,t=this,n=hi(e,wo(e)));var s=!(Na(r)&&"chain"in r&&!r.chain),a=$a(t);return oe(n,(function(r){var i=e[r];t[r]=i,a&&(t.prototype[r]=function(){var e=this.__chain__;if(s||e){var r=t(this.__wrapped__),n=r.__actions__=mn(this.__actions__);return n.push({func:i,args:arguments,thisArg:t}),r.__chain__=e,r}return i.apply(t,pe([this.value()],arguments))})})),t}function Ko(){}var Zo=Bn(de),Qo=Bn(he),tl=Bn(me);function el(t){return ls(t)?Ce(Cs(t)):function(t){return function(e){return ci(e,t)}}(t)}var rl=In(),il=In(!0);function nl(){return[]}function sl(){return!1}var al=An((function(t,e){return t+e}),0),ol=Dn("ceil"),ll=An((function(t,e){return t/e}),1),hl=Dn("floor");var cl,ul=An((function(t,e){return t*e}),1),fl=Dn("round"),dl=An((function(t,e){return t-e}),0);return Rr.after=function(t,e){if("function"!=typeof e)throw new yt(s);return t=ro(t),function(){if(--t<1)return e.apply(this,arguments)}},Rr.ary=ga,Rr.assign=oo,Rr.assignIn=lo,Rr.assignInWith=ho,Rr.assignWith=co,Rr.at=uo,Rr.before=va,Rr.bind=ma,Rr.bindAll=No,Rr.bindKey=ya,Rr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Oa(t)?t:[t]},Rr.chain=ta,Rr.chunk=function(t,e,r){e=(r?os(t,e,r):void 0===e)?1:sr(ro(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var s=0,a=0,o=i(Ze(n/e));s<n;)o[a++]=Vi(t,s,s+=e);return o},Rr.compact=function(t){for(var e=-1,r=null==t?0:t.length,i=0,n=[];++e<r;){var s=t[e];s&&(n[i++]=s)}return n},Rr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return pe(Oa(r)?mn(r):[r],ni(e,1))},Rr.cond=function(t){var e=null==t?0:t.length,r=Jn();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new yt(s);return[r(t[0]),t[1]]})):[],ji((function(r){for(var i=-1;++i<e;){var n=t[i];if(se(n[0],this,r))return se(n[1],this,r)}}))},Rr.conforms=function(t){return function(t){var e=wo(t);return function(r){return Jr(r,t,e)}}(Yr(t,1))},Rr.constant=Fo,Rr.countBy=ia,Rr.create=function(t,e){var r=Tr(t);return null==e?r:Ur(r,e)},Rr.curry=function t(e,r,i){var n=$n(e,8,void 0,void 0,void 0,void 0,void 0,r=i?void 0:r);return n.placeholder=t.placeholder,n},Rr.curryRight=function t(e,r,i){var n=$n(e,16,void 0,void 0,void 0,void 0,void 0,r=i?void 0:r);return n.placeholder=t.placeholder,n},Rr.debounce=_a,Rr.defaults=fo,Rr.defaultsDeep=po,Rr.defer=wa,Rr.delay=ba,Rr.difference=Ts,Rr.differenceBy=Ms,Rr.differenceWith=As,Rr.drop=function(t,e,r){var i=null==t?0:t.length;return i?Vi(t,(e=r||void 0===e?1:ro(e))<0?0:e,i):[]},Rr.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?Vi(t,0,(e=i-(e=r||void 0===e?1:ro(e)))<0?0:e):[]},Rr.dropRightWhile=function(t,e){return t&&t.length?tn(t,Jn(e,3),!0,!0):[]},Rr.dropWhile=function(t,e){return t&&t.length?tn(t,Jn(e,3),!0):[]},Rr.fill=function(t,e,r,i){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&os(t,e,r)&&(r=0,i=n),function(t,e,r,i){var n=t.length;for((r=ro(r))<0&&(r=-r>n?0:n+r),(i=void 0===i||i>n?n:ro(i))<0&&(i+=n),i=r>i?0:io(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},Rr.filter=function(t,e){return(Oa(t)?ce:ii)(t,Jn(e,3))},Rr.flatMap=function(t,e){return ni(ua(t,e),1)},Rr.flatMapDeep=function(t,e){return ni(ua(t,e),1/0)},Rr.flatMapDepth=function(t,e,r){return r=void 0===r?1:ro(r),ni(ua(t,e),r)},Rr.flatten=Is,Rr.flattenDeep=function(t){return(null==t?0:t.length)?ni(t,1/0):[]},Rr.flattenDepth=function(t,e){return(null==t?0:t.length)?ni(t,e=void 0===e?1:ro(e)):[]},Rr.flip=function(t){return $n(t,512)},Rr.flow=Vo,Rr.flowRight=Uo,Rr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,i={};++e<r;){var n=t[e];i[n[0]]=n[1]}return i},Rr.functions=function(t){return null==t?[]:hi(t,wo(t))},Rr.functionsIn=function(t){return null==t?[]:hi(t,bo(t))},Rr.groupBy=la,Rr.initial=function(t){return(null==t?0:t.length)?Vi(t,0,-1):[]},Rr.intersection=Ws,Rr.intersectionBy=Ds,Rr.intersectionWith=js,Rr.invert=mo,Rr.invertBy=yo,Rr.invokeMap=ha,Rr.iteratee=Go,Rr.keyBy=ca,Rr.keys=wo,Rr.keysIn=bo,Rr.map=ua,Rr.mapKeys=function(t,e){var r={};return e=Jn(e,3),oi(t,(function(t,i,n){qr(r,e(t,i,n),t)})),r},Rr.mapValues=function(t,e){var r={};return e=Jn(e,3),oi(t,(function(t,i,n){qr(r,i,e(t,i,n))})),r},Rr.matches=function(t){return Ri(Yr(t,1))},Rr.matchesProperty=function(t,e){return Ti(t,Yr(e,1))},Rr.memoize=ka,Rr.merge=ko,Rr.mergeWith=xo,Rr.method=Xo,Rr.methodOf=Yo,Rr.mixin=Jo,Rr.negate=xa,Rr.nthArg=function(t){return t=ro(t),ji((function(e){return Ai(e,t)}))},Rr.omit=Po,Rr.omitBy=function(t,e){return So(t,xa(Jn(e)))},Rr.once=function(t){return va(2,t)},Rr.orderBy=function(t,e,r,i){return null==t?[]:(Oa(e)||(e=null==e?[]:[e]),Oa(r=i?void 0:r)||(r=null==r?[]:[r]),Bi(t,e,r))},Rr.over=Zo,Rr.overArgs=Pa,Rr.overEvery=Qo,Rr.overSome=tl,Rr.partial=Ca,Rr.partialRight=Sa,Rr.partition=fa,Rr.pick=Co,Rr.pickBy=So,Rr.property=el,Rr.propertyOf=function(t){return function(e){return null==t?void 0:ci(t,e)}},Rr.pull=$s,Rr.pullAll=zs,Rr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Ii(t,e,Jn(r,2)):t},Rr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Ii(t,e,void 0,r):t},Rr.pullAt=Hs,Rr.range=rl,Rr.rangeRight=il,Rr.rearg=Ra,Rr.reject=function(t,e){return(Oa(t)?ce:ii)(t,xa(Jn(e,3)))},Rr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var i=-1,n=[],s=t.length;for(e=Jn(e,3);++i<s;){var a=t[i];e(a,i,t)&&(r.push(a),n.push(i))}return Ei(t,n),r},Rr.rest=function(t,e){if("function"!=typeof t)throw new yt(s);return ji(t,e=void 0===e?e:ro(e))},Rr.reverse=Ns,Rr.sampleSize=function(t,e,r){return e=(r?os(t,e,r):void 0===e)?1:ro(e),(Oa(t)?$r:$i)(t,e)},Rr.set=function(t,e,r){return null==t?t:zi(t,e,r)},Rr.setWith=function(t,e,r,i){return i="function"==typeof i?i:void 0,null==t?t:zi(t,e,r,i)},Rr.shuffle=function(t){return(Oa(t)?zr:Fi)(t)},Rr.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&os(t,e,r)?(e=0,r=i):(e=null==e?0:ro(e),r=void 0===r?i:ro(r)),Vi(t,e,r)):[]},Rr.sortBy=da,Rr.sortedUniq=function(t){return t&&t.length?Xi(t):[]},Rr.sortedUniqBy=function(t,e){return t&&t.length?Xi(t,Jn(e,2)):[]},Rr.split=function(t,e,r){return r&&"number"!=typeof r&&os(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=ao(t))&&("string"==typeof e||null!=e&&!Ga(e))&&!(e=Ji(e))&&$e(t)?hn(qe(t),0,r):t.split(e,r):[]},Rr.spread=function(t,e){if("function"!=typeof t)throw new yt(s);return e=null==e?0:sr(ro(e),0),ji((function(r){var i=r[e],n=hn(r,0,e);return i&&pe(n,i),se(t,this,n)}))},Rr.tail=function(t){var e=null==t?0:t.length;return e?Vi(t,1,e):[]},Rr.take=function(t,e,r){return t&&t.length?Vi(t,0,(e=r||void 0===e?1:ro(e))<0?0:e):[]},Rr.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?Vi(t,(e=i-(e=r||void 0===e?1:ro(e)))<0?0:e,i):[]},Rr.takeRightWhile=function(t,e){return t&&t.length?tn(t,Jn(e,3),!1,!0):[]},Rr.takeWhile=function(t,e){return t&&t.length?tn(t,Jn(e,3)):[]},Rr.tap=function(t,e){return e(t),t},Rr.throttle=function(t,e,r){var i=!0,n=!0;if("function"!=typeof t)throw new yt(s);return Na(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),_a(t,e,{leading:i,maxWait:e,trailing:n})},Rr.thru=ea,Rr.toArray=to,Rr.toPairs=Ro,Rr.toPairsIn=To,Rr.toPath=function(t){return Oa(t)?de(t,Cs):Ja(t)?[t]:mn(Ps(ao(t)))},Rr.toPlainObject=so,Rr.transform=function(t,e,r){var i=Oa(t),n=i||Da(t)||Ka(t);if(e=Jn(e,4),null==r){var s=t&&t.constructor;r=n?i?new s:[]:Na(t)&&$a(s)?Tr(Ut(t)):{}}return(n?oe:oi)(t,(function(t,i,n){return e(r,t,i,n)})),r},Rr.unary=function(t){return ga(t,1)},Rr.union=Fs,Rr.unionBy=Vs,Rr.unionWith=Us,Rr.uniq=function(t){return t&&t.length?Ki(t):[]},Rr.uniqBy=function(t,e){return t&&t.length?Ki(t,Jn(e,2)):[]},Rr.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Ki(t,void 0,e):[]},Rr.unset=function(t,e){return null==t||Zi(t,e)},Rr.unzip=qs,Rr.unzipWith=Gs,Rr.update=function(t,e,r){return null==t?t:Qi(t,e,an(r))},Rr.updateWith=function(t,e,r,i){return i="function"==typeof i?i:void 0,null==t?t:Qi(t,e,an(r),i)},Rr.values=Mo,Rr.valuesIn=function(t){return null==t?[]:Be(t,bo(t))},Rr.without=Xs,Rr.words=zo,Rr.wrap=function(t,e){return Ca(an(e),t)},Rr.xor=Ys,Rr.xorBy=Js,Rr.xorWith=Ks,Rr.zip=Zs,Rr.zipObject=function(t,e){return nn(t||[],e||[],Nr)},Rr.zipObjectDeep=function(t,e){return nn(t||[],e||[],zi)},Rr.zipWith=Qs,Rr.entries=Ro,Rr.entriesIn=To,Rr.extend=lo,Rr.extendWith=ho,Jo(Rr,Rr),Rr.add=al,Rr.attempt=Ho,Rr.camelCase=Ao,Rr.capitalize=Bo,Rr.ceil=ol,Rr.clamp=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=no(r))==r?r:0),void 0!==e&&(e=(e=no(e))==e?e:0),Xr(no(t),e,r)},Rr.clone=function(t){return Yr(t,4)},Rr.cloneDeep=function(t){return Yr(t,5)},Rr.cloneDeepWith=function(t,e){return Yr(t,5,e="function"==typeof e?e:void 0)},Rr.cloneWith=function(t,e){return Yr(t,4,e="function"==typeof e?e:void 0)},Rr.conformsTo=function(t,e){return null==e||Jr(t,e,wo(e))},Rr.deburr=Oo,Rr.defaultTo=function(t,e){return null==t||t!=t?e:t},Rr.divide=ll,Rr.endsWith=function(t,e,r){t=ao(t),e=Ji(e);var i=t.length,n=r=void 0===r?i:Xr(ro(r),0,i);return(r-=e.length)>=0&&t.slice(r,n)==e},Rr.eq=Ta,Rr.escape=function(t){return(t=ao(t))&&$.test(t)?t.replace(j,je):t},Rr.escapeRegExp=function(t){return(t=ao(t))&&G.test(t)?t.replace(q,"\\$&"):t},Rr.every=function(t,e,r){var i=Oa(t)?he:ei;return r&&os(t,e,r)&&(e=void 0),i(t,Jn(e,3))},Rr.find=na,Rr.findIndex=Bs,Rr.findKey=function(t,e){return _e(t,Jn(e,3),oi)},Rr.findLast=sa,Rr.findLastIndex=Os,Rr.findLastKey=function(t,e){return _e(t,Jn(e,3),li)},Rr.floor=hl,Rr.forEach=aa,Rr.forEachRight=oa,Rr.forIn=function(t,e){return null==t?t:si(t,Jn(e,3),bo)},Rr.forInRight=function(t,e){return null==t?t:ai(t,Jn(e,3),bo)},Rr.forOwn=function(t,e){return t&&oi(t,Jn(e,3))},Rr.forOwnRight=function(t,e){return t&&li(t,Jn(e,3))},Rr.get=go,Rr.gt=Ma,Rr.gte=Aa,Rr.has=function(t,e){return null!=t&&is(t,e,pi)},Rr.hasIn=vo,Rr.head=Es,Rr.identity=qo,Rr.includes=function(t,e,r,i){t=Ea(t)?t:Mo(t),r=r&&!i?ro(r):0;var n=t.length;return r<0&&(r=sr(n+r,0)),Ya(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&be(t,e,r)>-1},Rr.indexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:ro(r);return n<0&&(n=sr(i+n,0)),be(t,e,n)},Rr.inRange=function(t,e,r){return e=eo(e),void 0===r?(r=e,e=0):r=eo(r),function(t,e,r){return t>=ar(e,r)&&t<sr(e,r)}(t=no(t),e,r)},Rr.invoke=_o,Rr.isArguments=Ba,Rr.isArray=Oa,Rr.isArrayBuffer=Ia,Rr.isArrayLike=Ea,Rr.isArrayLikeObject=Wa,Rr.isBoolean=function(t){return!0===t||!1===t||Fa(t)&&fi(t)==c},Rr.isBuffer=Da,Rr.isDate=ja,Rr.isElement=function(t){return Fa(t)&&1===t.nodeType&&!qa(t)},Rr.isEmpty=function(t){if(null==t)return!0;if(Ea(t)&&(Oa(t)||"string"==typeof t||"function"==typeof t.splice||Da(t)||Ka(t)||Ba(t)))return!t.length;var e=rs(t);if(e==g||e==_)return!t.size;if(us(t))return!xi(t).length;for(var r in t)if(Pt.call(t,r))return!1;return!0},Rr.isEqual=function(t,e){return _i(t,e)},Rr.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===i?_i(t,e,void 0,r):!!i},Rr.isError=La,Rr.isFinite=function(t){return"number"==typeof t&&rr(t)},Rr.isFunction=$a,Rr.isInteger=za,Rr.isLength=Ha,Rr.isMap=Va,Rr.isMatch=function(t,e){return t===e||wi(t,e,Zn(e))},Rr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:void 0,wi(t,e,Zn(e),r)},Rr.isNaN=function(t){return Ua(t)&&t!=+t},Rr.isNative=function(t){if(cs(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return bi(t)},Rr.isNil=function(t){return null==t},Rr.isNull=function(t){return null===t},Rr.isNumber=Ua,Rr.isObject=Na,Rr.isObjectLike=Fa,Rr.isPlainObject=qa,Rr.isRegExp=Ga,Rr.isSafeInteger=function(t){return za(t)&&t>=-9007199254740991&&t<=9007199254740991},Rr.isSet=Xa,Rr.isString=Ya,Rr.isSymbol=Ja,Rr.isTypedArray=Ka,Rr.isUndefined=function(t){return void 0===t},Rr.isWeakMap=function(t){return Fa(t)&&rs(t)==k},Rr.isWeakSet=function(t){return Fa(t)&&"[object WeakSet]"==fi(t)},Rr.join=function(t,e){return null==t?"":ir.call(t,e)},Rr.kebabCase=Io,Rr.last=Ls,Rr.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=i;return void 0!==r&&(n=(n=ro(r))<0?sr(i+n,0):ar(n,i-1)),e==e?function(t,e,r){for(var i=r+1;i--;)if(t[i]===e)return i;return i}(t,e,n):we(t,xe,n,!0)},Rr.lowerCase=Eo,Rr.lowerFirst=Wo,Rr.lt=Za,Rr.lte=Qa,Rr.max=function(t){return t&&t.length?ri(t,qo,di):void 0},Rr.maxBy=function(t,e){return t&&t.length?ri(t,Jn(e,2),di):void 0},Rr.mean=function(t){return Pe(t,qo)},Rr.meanBy=function(t,e){return Pe(t,Jn(e,2))},Rr.min=function(t){return t&&t.length?ri(t,qo,Ci):void 0},Rr.minBy=function(t,e){return t&&t.length?ri(t,Jn(e,2),Ci):void 0},Rr.stubArray=nl,Rr.stubFalse=sl,Rr.stubObject=function(){return{}},Rr.stubString=function(){return""},Rr.stubTrue=function(){return!0},Rr.multiply=ul,Rr.nth=function(t,e){return t&&t.length?Ai(t,ro(e)):void 0},Rr.noConflict=function(){return Gt._===this&&(Gt._=Mt),this},Rr.noop=Ko,Rr.now=pa,Rr.pad=function(t,e,r){t=ao(t);var i=(e=ro(e))?Ue(t):0;if(!e||i>=e)return t;var n=(e-i)/2;return On(Qe(n),r)+t+On(Ze(n),r)},Rr.padEnd=function(t,e,r){t=ao(t);var i=(e=ro(e))?Ue(t):0;return e&&i<e?t+On(e-i,r):t},Rr.padStart=function(t,e,r){t=ao(t);var i=(e=ro(e))?Ue(t):0;return e&&i<e?On(e-i,r)+t:t},Rr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),lr(ao(t).replace(Y,""),e||0)},Rr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&os(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=eo(t),void 0===e?(e=t,t=0):e=eo(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var n=hr();return ar(t+n*(e-t+Ft("1e-"+((n+"").length-1))),e)}return Wi(t,e)},Rr.reduce=function(t,e,r){var i=Oa(t)?ge:Re,n=arguments.length<3;return i(t,Jn(e,4),r,n,Qr)},Rr.reduceRight=function(t,e,r){var i=Oa(t)?ve:Re,n=arguments.length<3;return i(t,Jn(e,4),r,n,ti)},Rr.repeat=function(t,e,r){return e=(r?os(t,e,r):void 0===e)?1:ro(e),Di(ao(t),e)},Rr.replace=function(){var t=arguments,e=ao(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Rr.result=function(t,e,r){var i=-1,n=(e=on(e,t)).length;for(n||(n=1,t=void 0);++i<n;){var s=null==t?void 0:t[Cs(e[i])];void 0===s&&(i=n,s=r),t=$a(s)?s.call(t):s}return t},Rr.round=fl,Rr.runInContext=t,Rr.sample=function(t){return(Oa(t)?Lr:Li)(t)},Rr.size=function(t){if(null==t)return 0;if(Ea(t))return Ya(t)?Ue(t):t.length;var e=rs(t);return e==g||e==_?t.size:xi(t).length},Rr.snakeCase=Do,Rr.some=function(t,e,r){var i=Oa(t)?me:Ui;return r&&os(t,e,r)&&(e=void 0),i(t,Jn(e,3))},Rr.sortedIndex=function(t,e){return qi(t,e)},Rr.sortedIndexBy=function(t,e,r){return Gi(t,e,Jn(r,2))},Rr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var i=qi(t,e);if(i<r&&Ta(t[i],e))return i}return-1},Rr.sortedLastIndex=function(t,e){return qi(t,e,!0)},Rr.sortedLastIndexBy=function(t,e,r){return Gi(t,e,Jn(r,2),!0)},Rr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=qi(t,e,!0)-1;if(Ta(t[r],e))return r}return-1},Rr.startCase=jo,Rr.startsWith=function(t,e,r){return t=ao(t),r=null==r?0:Xr(ro(r),0,t.length),e=Ji(e),t.slice(r,r+e.length)==e},Rr.subtract=dl,Rr.sum=function(t){return t&&t.length?Te(t,qo):0},Rr.sumBy=function(t,e){return t&&t.length?Te(t,Jn(e,2)):0},Rr.template=function(t,e,r){var i=Rr.templateSettings;r&&os(t,e,r)&&(e=void 0),t=ao(t),e=ho({},e,i,zn);var n,s,a=ho({},e.imports,i.imports,zn),o=wo(a),l=Be(a,o),h=0,c=e.interpolate||ct,u="__p += '",f=vt((e.escape||ct).source+"|"+c.source+"|"+(c===N?rt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),d="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++$t+"]")+"\n";t.replace(f,(function(e,r,i,a,o,l){return i||(i=a),u+=t.slice(h,l).replace(ut,Le),r&&(n=!0,u+="' +\n__e("+r+") +\n'"),o&&(s=!0,u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),u+="';\n";var p=Pt.call(e,"variable")&&e.variable;p||(u="with (obj) {\n"+u+"\n}\n"),u=(s?u.replace(I,""):u).replace(E,"$1").replace(W,"$1;"),u="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(n?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=Ho((function(){return dt(o,d+"return "+u).apply(void 0,l)}));if(g.source=u,La(g))throw g;return g},Rr.times=function(t,e){if((t=ro(t))<1||t>9007199254740991)return[];var r=4294967295,i=ar(t,4294967295);t-=4294967295;for(var n=Me(i,e=Jn(e));++r<t;)e(r);return n},Rr.toFinite=eo,Rr.toInteger=ro,Rr.toLength=io,Rr.toLower=function(t){return ao(t).toLowerCase()},Rr.toNumber=no,Rr.toSafeInteger=function(t){return t?Xr(ro(t),-9007199254740991,9007199254740991):0===t?t:0},Rr.toString=ao,Rr.toUpper=function(t){return ao(t).toUpperCase()},Rr.trim=function(t,e,r){if((t=ao(t))&&(r||void 0===e))return t.replace(X,"");if(!t||!(e=Ji(e)))return t;var i=qe(t),n=qe(e);return hn(i,Ie(i,n),Ee(i,n)+1).join("")},Rr.trimEnd=function(t,e,r){if((t=ao(t))&&(r||void 0===e))return t.replace(J,"");if(!t||!(e=Ji(e)))return t;var i=qe(t);return hn(i,0,Ee(i,qe(e))+1).join("")},Rr.trimStart=function(t,e,r){if((t=ao(t))&&(r||void 0===e))return t.replace(Y,"");if(!t||!(e=Ji(e)))return t;var i=qe(t);return hn(i,Ie(i,qe(e))).join("")},Rr.truncate=function(t,e){var r=30,i="...";if(Na(e)){var n="separator"in e?e.separator:n;r="length"in e?ro(e.length):r,i="omission"in e?Ji(e.omission):i}var s=(t=ao(t)).length;if($e(t)){var a=qe(t);s=a.length}if(r>=s)return t;var o=r-Ue(i);if(o<1)return i;var l=a?hn(a,0,o).join(""):t.slice(0,o);if(void 0===n)return l+i;if(a&&(o+=l.length-o),Ga(n)){if(t.slice(o).search(n)){var h,c=l;for(n.global||(n=vt(n.source,ao(it.exec(n))+"g")),n.lastIndex=0;h=n.exec(c);)var u=h.index;l=l.slice(0,void 0===u?o:u)}}else if(t.indexOf(Ji(n),o)!=o){var f=l.lastIndexOf(n);f>-1&&(l=l.slice(0,f))}return l+i},Rr.unescape=function(t){return(t=ao(t))&&L.test(t)?t.replace(D,Ge):t},Rr.uniqueId=function(t){var e=++Ct;return ao(t)+e},Rr.upperCase=Lo,Rr.upperFirst=$o,Rr.each=aa,Rr.eachRight=oa,Rr.first=Es,Jo(Rr,(cl={},oi(Rr,(function(t,e){Pt.call(Rr.prototype,e)||(cl[e]=t)})),cl),{chain:!1}),Rr.VERSION="4.17.15",oe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Rr[t].placeholder=Rr})),oe(["drop","take"],(function(t,e){Br.prototype[t]=function(r){r=void 0===r?1:sr(ro(r),0);var i=this.__filtered__&&!e?new Br(this):this.clone();return i.__filtered__?i.__takeCount__=ar(r,i.__takeCount__):i.__views__.push({size:ar(r,4294967295),type:t+(i.__dir__<0?"Right":"")}),i},Br.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),oe(["filter","map","takeWhile"],(function(t,e){var r=e+1,i=1==r||3==r;Br.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Jn(t,3),type:r}),e.__filtered__=e.__filtered__||i,e}})),oe(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Br.prototype[t]=function(){return this[r](1).value()[0]}})),oe(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Br.prototype[t]=function(){return this.__filtered__?new Br(this):this[r](1)}})),Br.prototype.compact=function(){return this.filter(qo)},Br.prototype.find=function(t){return this.filter(t).head()},Br.prototype.findLast=function(t){return this.reverse().find(t)},Br.prototype.invokeMap=ji((function(t,e){return"function"==typeof t?new Br(this):this.map((function(r){return mi(r,t,e)}))})),Br.prototype.reject=function(t){return this.filter(xa(Jn(t)))},Br.prototype.slice=function(t,e){t=ro(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Br(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),void 0!==e&&(r=(e=ro(e))<0?r.dropRight(-e):r.take(e-t)),r)},Br.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Br.prototype.toArray=function(){return this.take(4294967295)},oi(Br.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),n=Rr[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);n&&(Rr.prototype[e]=function(){var e=this.__wrapped__,a=i?[1]:arguments,o=e instanceof Br,l=a[0],h=o||Oa(e),c=function(t){var e=n.apply(Rr,pe([t],a));return i&&u?e[0]:e};h&&r&&"function"==typeof l&&1!=l.length&&(o=h=!1);var u=this.__chain__,f=!!this.__actions__.length,d=s&&!u,p=o&&!f;if(!s&&h){e=p?e:new Br(this);var g=t.apply(e,a);return g.__actions__.push({func:ea,args:[c],thisArg:void 0}),new Ar(g,u)}return d&&p?t.apply(this,a):(g=this.thru(c),d?i?g.value()[0]:g.value():g)})})),oe(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Rr.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(Oa(n)?n:[],t)}return this[r]((function(r){return e.apply(Oa(r)?r:[],t)}))}})),oi(Br.prototype,(function(t,e){var r=Rr[e];if(r){var i=r.name+"";Pt.call(yr,i)||(yr[i]=[]),yr[i].push({name:e,func:r})}})),yr[Tn(void 0,2).name]=[{name:"wrapper",func:void 0}],Br.prototype.clone=function(){var t=new Br(this.__wrapped__);return t.__actions__=mn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=mn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=mn(this.__views__),t},Br.prototype.reverse=function(){if(this.__filtered__){var t=new Br(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Br.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Oa(t),i=e<0,n=r?t.length:0,s=function(t,e,r){var i=-1,n=r.length;for(;++i<n;){var s=r[i],a=s.size;switch(s.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ar(e,t+a);break;case"takeRight":t=sr(t,e-a)}}return{start:t,end:e}}(0,n,this.__views__),a=s.start,o=s.end,l=o-a,h=i?o:a-1,c=this.__iteratees__,u=c.length,f=0,d=ar(l,this.__takeCount__);if(!r||!i&&n==l&&d==l)return en(t,this.__actions__);var p=[];t:for(;l--&&f<d;){for(var g=-1,v=t[h+=e];++g<u;){var m=c[g],y=m.iteratee,_=m.type,w=y(v);if(2==_)v=w;else if(!w){if(1==_)continue t;break t}}p[f++]=v}return p},Rr.prototype.at=ra,Rr.prototype.chain=function(){return ta(this)},Rr.prototype.commit=function(){return new Ar(this.value(),this.__chain__)},Rr.prototype.next=function(){void 0===this.__values__&&(this.__values__=to(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Rr.prototype.plant=function(t){for(var e,r=this;r instanceof Mr;){var i=Rs(r);i.__index__=0,i.__values__=void 0,e?n.__wrapped__=i:e=i;var n=i;r=r.__wrapped__}return n.__wrapped__=t,e},Rr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Br){var e=t;return this.__actions__.length&&(e=new Br(this)),(e=e.reverse()).__actions__.push({func:ea,args:[Ns],thisArg:void 0}),new Ar(e,this.__chain__)}return this.thru(Ns)},Rr.prototype.toJSON=Rr.prototype.valueOf=Rr.prototype.value=function(){return en(this.__wrapped__,this.__actions__)},Rr.prototype.first=Rr.prototype.head,Zt&&(Rr.prototype[Zt]=function(){return this}),Rr}();Gt._=Xe,void 0===(n=function(){return Xe}.call(e,r,e,i))||(i.exports=n)}).call(this)}).call(this,r(10),r(11)(t))},function(t,e,r){"use strict";r.r(e),r.d(e,"fromString",(function(){return s})),r.d(e,"add",(function(){return a})),r.d(e,"add_",(function(){return o})),r.d(e,"multiply",(function(){return l})),r.d(e,"multiply_",(function(){return h})),r.d(e,"interpolate",(function(){return c})),r.d(e,"lerp",(function(){return u})),r.d(e,"interpolateHSL",(function(){return f})),r.d(e,"lerpHSL",(function(){return d})),r.d(e,"randomize",(function(){return p})),r.d(e,"rgb2hsl",(function(){return g})),r.d(e,"hsl2rgb",(function(){return m})),r.d(e,"toRGB",(function(){return y})),r.d(e,"toHex",(function(){return _}));var i=r(1),n=r(0);function s(t){let e,r;if(t in w)e=w[t];else{if("#"==t.charAt(0)){let r=(t.match(/[0-9a-f]/gi)||[]).map(t=>parseInt(t,16));if(3==r.length)e=r.map(t=>17*t);else{for(let t=0;t<3;t++)r[t+1]+=16*r[t],r.splice(t,1);e=r}}else e=(r=t.match(/rgb\(([0-9, ]+)\)/i))?r[1].split(/\s*,\s*/).map(t=>parseInt(t)):[0,0,0];w[t]=e}return e.slice()}function a(t,...e){let r=t.slice();for(let t=0;t<3;t++)for(let i=0;i<e.length;i++)r[t]+=e[i][t];return r}function o(t,...e){for(let r=0;r<3;r++)for(let i=0;i<e.length;i++)t[r]+=e[i][r];return t}function l(t,...e){let r=t.slice();for(let t=0;t<3;t++){for(let i=0;i<e.length;i++)r[t]*=e[i][t]/255;r[t]=Math.round(r[t])}return r}function h(t,...e){for(let r=0;r<3;r++){for(let i=0;i<e.length;i++)t[r]*=e[i][r]/255;t[r]=Math.round(t[r])}return t}function c(t,e,r=.5){let i=t.slice();for(let n=0;n<3;n++)i[n]=Math.round(i[n]+r*(e[n]-t[n]));return i}const u=c;function f(t,e,r=.5){let i=g(t),n=g(e);for(let t=0;t<3;t++)i[t]+=r*(n[t]-i[t]);return m(i)}const d=f;function p(t,e){e instanceof Array||(e=Math.round(n.a.getNormal(0,e)));let r=t.slice();for(let t=0;t<3;t++)r[t]+=e instanceof Array?Math.round(n.a.getNormal(0,e[t])):e;return r}function g(t){let e,r=t[0]/255,i=t[1]/255,n=t[2]/255,s=Math.max(r,i,n),a=Math.min(r,i,n),o=0,l=(s+a)/2;if(s==a)e=0;else{let t=s-a;switch(e=l>.5?t/(2-s-a):t/(s+a),s){case r:o=(i-n)/t+(i<n?6:0);break;case i:o=(n-r)/t+2;break;case n:o=(r-i)/t+4}o/=6}return[o,e,l]}function v(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function m(t){let e=t[2];if(0==t[1])return e=Math.round(255*e),[e,e,e];{let r=t[1],i=e<.5?e*(1+r):e+r-e*r,n=2*e-i,s=v(n,i,t[0]+1/3),a=v(n,i,t[0]),o=v(n,i,t[0]-1/3);return[Math.round(255*s),Math.round(255*a),Math.round(255*o)]}}function y(t){return`rgb(${t.map(t=>Object(i.clamp)(t,0,255)).join(",")})`}function _(t){return`#${t.map(t=>Object(i.clamp)(t,0,255).toString(16).padStart(2,"0")).join("")}`}const w={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));class i{getContainer(){return null}setOptions(t){this._options=t}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return a}));var i=r(4),n=r(3);function s(t){let e=n.fromString(t);return 36*Math.floor(e[0]*(6/256))+6*Math.floor(e[1]*(6/256))+1*Math.floor(e[2]*(6/256))+16}class a extends i.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(t){setTimeout(t,1e3/60)}setOptions(t){super.setOptions(t);let e=[t.width,t.height],r=this.computeSize();this._offset=r.map((t,r)=>Math.floor((t-e[r])/2))}clear(){t.stdout.write(`[0;48;5;${s(this._options.bg)}m[2J`)}draw(e,r){let[i,n,a,o,l]=e,h=this._offset[0]+i,c=this._offset[1]+n,u=this.computeSize();if(h<0||h>=u[0])return;if(c<0||c>=u[1])return;if(h===this._cursor[0]&&c===this._cursor[1]||(t.stdout.write(function(t,e){return`[${e+1};${t+1}H`}(h,c)),this._cursor[0]=h,this._cursor[1]=c),r&&(a||(a=" ")),!a)return;let f=function(t,e){return`[0;38;5;${s(t)};48;5;${s(e)}m`}(o,l);f!==this._lastColor&&(t.stdout.write(f),this._lastColor=f);let d=[].concat(a);t.stdout.write(d[0]),this._cursor[0]++,this._cursor[0]>=u[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[t.stdout.columns,t.stdout.rows]}}}).call(this,r(9))},function(t,e){t.exports=function(t,e,r,i,n){if(!n){var s=[];n=function(t,e){s.push({x:t,y:e})}}var a=r-t,o=i-e,l=Math.abs(a),h=Math.abs(o),c=0,u=a>0?1:-1,f=o>0?1:-1;if(l>h)for(var d=t,p=e;u<0?d>=r:d<=r;d+=u)n(d,p),(c+=h)<<1>=l&&(p+=f,c-=l);else for(d=t,p=e;f<0?p>=i:p<=i;p+=f)n(d,p),(c+=l)<<1>=h&&(d+=u,c-=h);return s}},function(t,e){t.exports=function*(t,e,r,i){var n=r-t,s=i-e,a=Math.abs(n),o=Math.abs(s),l=0,h=n>0?1:-1,c=s>0?1:-1;if(a>o)for(var u=t,f=e;h<0?u>=r:u<=r;u+=h)yield{x:u,y:f},(l+=o)<<1>=a&&(f+=c,l-=a);else for(u=t,f=e;c<0?f>=i:f<=i;f+=c)yield{x:u,y:f},(l+=a)<<1>=o&&(u+=h,l-=o)}},function(t,e){const r=["C","D","H","S"],i=["1","2","3","4","5","6","7","8","9","10","J","Q","K","A"];function n(t,e){const r=function(t,e){let r,i;const n={suits:[0,0,0,0],rank:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],wildCards:0};for(r=0;r<t.length;r++)if(e.wildCards.indexOf(t[r].toUpperCase())>=0)n.wildCards++;else{if(i=o(t[r]),!i)return null;n.suits[i.suit]++,n.rank[i.rank-1]++,14==i.rank&&e.aceCanBeLow&&(n.rank[0]=1)}return n.cards=t,n}(t,e);let n,s;if(r){const t=function(t,e){const r={};if(Math.max.apply(null,t.suits)+t.wildCards>=e.cardsToEvaluate){if(r.isFlush=!0,e.getDetails){const i=[];c(i,t,e),function(t,e,r,i){let n,s;for(s=0;s<e.suits.length;s++)e.suits[s]===i&&(n=s);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&o(e).suit===n&&t.push(e)})}(i,t,e,Math.max.apply(null,t.suits)),r.cards=i}}else r.isFlush=!1;return r}(r,e),a=function(t,e){let r,i=0,n=0,s=t.wildCards;const a={};for(r=0;r<t.rank.length;r++)t.rank[r]?n++:n>0&&s>0?(s--,n++):(n>=e.cardsToEvaluate&&(i=r),n=0,s=t.wildCards);n+s>=e.cardsToEvaluate&&(i=t.rank.length);if(a.hiCard=i,i&&e.getDetails){const r=[],n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0];c(r,t,e),t.cards.map(t=>{let s=o(t).rank-1;13===s&&i===e.cardsToEvaluate&&(s=0),r.length<e.cardsToEvaluate&&e.wildCards.indexOf(t.toUpperCase())<0&&s<=i&&s>=i-e.cardsToEvaluate&&!n[s]&&(r.push(t),n[s]=1)}),a.cards=r}return a}(r,e),u=function(t,e){let r=Math.max.apply(null,t.rank)+t.wildCards;const i={};r>t.cardsToEvaluate&&(r=t.cardsToEvaluate);if(e.getDetails){const r=[];c(r,t,e),h(r,t,e,Math.max.apply(null,t.rank)),i.cards=r}return i.maxLike=r,i}(r,e);if(5===u.maxLike)s="5ofakind",n=u.cards;else if(t.isFlush&&14===a.hiCard&&e.dontAllow.indexOf("royalflush")<0)s="royalflush",n=t.cards;else if(t.isFlush&&a.hiCard>0&&e.dontAllow.indexOf("straightflush")<0)s="straightflush",n=t.cards;else if(4===u.maxLike&&e.dontAllow.indexOf("4ofakind")<0)s="4ofakind",n=u.cards;else{const o=function(t,e){const r={isFullHouse:!1};if(e.cardsToEvaluate>=5)if(t.rank.indexOf(3)>=0){if(t.rank.indexOf(2)>=0&&(r.isFullHouse=!0,e.getDetails)){const i=[];h(i,t,e,3),h(i,t,e,2),r.cards=i}}else if(t.wildCards>0){const i=l(t,e);i.isTwoPair&&(r.isFullHouse=!0,e.getDetails&&(r.cards=i.cards,c(r.cards,t,e)))}return r}(r,e);if(o.isFullHouse&&e.dontAllow.indexOf("fullhouse")<0)s="fullhouse",n=o.cards;else if(t.isFlush&&e.dontAllow.indexOf("flush")<0)s="flush",n=t.cards;else if(a.hiCard>0&&e.dontAllow.indexOf("straight")<0)s="straight",n=a.cards;else if(3===u.maxLike&&e.dontAllow.indexOf("3ofakind")<0)s="3ofakind",n=u.cards;else{const t=l(r,e);if(t.isTwoPair&&e.dontAllow.indexOf("2pair")<0)s="2pair",n=t.cards;else if(2===u.maxLike&&e.dontAllow.indexOf("pair")<0){if(e.minPair){(function(t){const e=t.rank.indexOf(2,1);if(e>-1)return e+1;let r;for(r=t.rank.length-1;r--;r>0)if(t.rank[r])return r;return})(r)>=i.indexOf(e.minPair)+1&&(s="minpair")}s||(s="pair"),n=u.cards}else s="nothing",n=[]}}}else s="error";return e.getDetails?{match:s,cards:n}:s}function s(t,e){const n={aceCanBeLow:!1,wildCards:["JOKER"],cardsToEvaluate:5,dontAllow:[]};if(e&&(e.hasOwnProperty("aceCanBeLow")&&(n.aceCanBeLow=e.aceCanBeLow),e.hasOwnProperty("cardsToEvaluate")&&(n.cardsToEvaluate=e.cardsToEvaluate),e.hasOwnProperty("dontAllow")&&(n.dontAllow=e.dontAllow),e.hasOwnProperty("minPair")&&i.indexOf(e.minPair.toUpperCase())>-1&&(n.minPair=e.minPair.toUpperCase()),e.hasOwnProperty("wildCards"))){let t,i,s;for(t=0;t<e.wildCards.length;t++){const l=e.wildCards[t].toUpperCase();"JOKER"!==l&&(i=o(l),i?n.wildCards.push(l):(s=a(l),s>0&&r.map(t=>n.wildCards.push(l+t))))}}return n.cardsToEvaluate>t.length&&(n.cardsToEvaluate=t.length),n.cardsToEvaluate>5&&(n.cardsToEvaluate=5),n}function a(t){let e;return"10"===t?e=10:1===t.length&&(e=i.indexOf(t.toUpperCase())+1,e<2&&(e=void 0)),e}function o(t){const e={rank:0,suit:0};let i;if("10"===t.substring(0,2))e.rank=10,i=t.substring(2,t.length);else{if(2!==t.length)return;{const r=a(t.substring(0,1));if(void 0===r||r<2)return;e.rank=r,i=t.substring(1,2)}}if(e.suit=r.indexOf(i.toUpperCase()),!(e.suit<0))return e}function l(t,e){const r={};if(r.isTwoPair=t.rank.reduce((t,e)=>2===e?t+1:t,0)>=2,r.isTwoPair&&e.getDetails){const i=JSON.parse(JSON.stringify(t)),n=[];h(n,i,e,2),i.rank[o(n[0]).rank-1]=0,h(n,i,e,2),r.cards=n}return r}function h(t,e,r,i){let n,s;for(s=0;s<e.rank.length;s++)e.rank[s]===i&&(n=s);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&o(e).rank-1===n&&t.push(e)})}function c(t,e,r){e.cards.map(e=>{r.wildCards.indexOf(e.toUpperCase())>=0&&t.length<r.cardsToEvaluate&&t.push(e)})}t.exports={evaluateHand:function(t,e){return n(t,s(t,e))},evaluateAndFindCards:function(t,e){const r=s(t,e);return r.getDetails=!0,n(t,r)}}},function(t,e){var r,i,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,h=[],c=!1,u=-1;function f(){c&&l&&(c=!1,l.length?h=l.concat(h):u=-1,h.length&&d())}function d(){if(!c){var t=o(f);c=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];h.push(new p(t,e)),1!==h.length||c||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.r(e);var i={};r.r(i),r.d(i,"TYPE_TEXT",(function(){return w})),r.d(i,"TYPE_NEWLINE",(function(){return b})),r.d(i,"TYPE_FG",(function(){return k})),r.d(i,"TYPE_BG",(function(){return x})),r.d(i,"measure",(function(){return P})),r.d(i,"tokenize",(function(){return C}));r(0);var n=r(4);class s extends n.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(t){requestAnimationFrame(t)}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const e=`${t.fontStyle?`${t.fontStyle} `:""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=e,this._updateSize(),this._ctx.font=e,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(t,e){let r=this._ctx.canvas,i=r.getBoundingClientRect();return t-=i.left,e-=i.top,t*=r.width/i.width,e*=r.height/i.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}var a=r(1);class o extends s{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){let[r,i,n,s,a]=t,o=[(r+1)*this._spacingX,i*this._spacingY+this._hexSize];if(this._options.transpose&&o.reverse(),e&&(this._ctx.fillStyle=a,this._fill(o[0],o[1])),!n)return;this._ctx.fillStyle=s;let l=[].concat(n);for(let t=0;t<l.length;t++)this._ctx.fillText(l[t],o[0],Math.ceil(o[1]))}computeSize(t,e){return this._options.transpose&&(t+=e,t-=e=t-e),[Math.floor(t/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]}computeFontSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);let r=2*t/((this._options.width+1)*Math.sqrt(3))-1,i=e/(2+1.5*(this._options.height-1)),n=Math.min(r,i),s=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let a=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=s;let o=a/100;n=Math.floor(n)+1;let l=2*n/(this._options.spacing*(1+o/Math.sqrt(3)));return Math.ceil(l)-1}_normalizedEventToPosition(t,e){let r;this._options.transpose?(t+=e,t-=e=t-e,r=this._ctx.canvas.width):r=this._ctx.canvas.height;let i=r/this._options.height;return e=Math.floor(e/i),Object(a.mod)(e,2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){let r=this._hexSize,i=this._options.border;const n=this._ctx;n.beginPath(),this._options.transpose?(n.moveTo(t-r+i,e),n.lineTo(t-r/2+i,e+this._spacingX-i),n.lineTo(t+r/2-i,e+this._spacingX-i),n.lineTo(t+r-i,e),n.lineTo(t+r/2-i,e-this._spacingX+i),n.lineTo(t-r/2+i,e-this._spacingX+i),n.lineTo(t-r+i,e)):(n.moveTo(t,e-r+i),n.lineTo(t+this._spacingX-i,e-r/2+i),n.lineTo(t+this._spacingX-i,e+r/2-i),n.lineTo(t,e+r-i),n.lineTo(t-this._spacingX+i,e+r/2-i),n.lineTo(t-this._spacingX+i,e-r/2+i),n.lineTo(t,e-r+i)),n.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);let r,i;this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,t.transpose?(r="height",i="width"):(r="width",i="height"),this._ctx.canvas[r]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[i]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}class l extends s{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(t){super.setOptions(t),this._canvasCache={}}draw(t,e){l.cache?this._drawWithCache(t):this._drawNoCache(t,e)}_drawWithCache(t){let e,[r,i,n,s,a]=t,o=""+n+s+a;if(o in this._canvasCache)e=this._canvasCache[o];else{let t=this._options.border;e=document.createElement("canvas");let r=e.getContext("2d");if(e.width=this._spacingX,e.height=this._spacingY,r.fillStyle=a,r.fillRect(t,t,e.width-t,e.height-t),n){r.fillStyle=s,r.font=this._ctx.font,r.textAlign="center",r.textBaseline="middle";let t=[].concat(n);for(let e=0;e<t.length;e++)r.fillText(t[e],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[o]=e}this._ctx.drawImage(e,r*this._spacingX,i*this._spacingY)}_drawNoCache(t,e){let[r,i,n,s,a]=t;if(e){let t=this._options.border;this._ctx.fillStyle=a,this._ctx.fillRect(r*this._spacingX+t,i*this._spacingY+t,this._spacingX-t,this._spacingY-t)}if(!n)return;this._ctx.fillStyle=s;let o=[].concat(n);for(let t=0;t<o.length;t++)this._ctx.fillText(o[t],(r+.5)*this._spacingX,Math.ceil((i+.5)*this._spacingY))}computeSize(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}computeFontSize(t,e){let r=Math.floor(t/this._options.width),i=Math.floor(e/this._options.height),n=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let s=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=n;let a=s/100*i/r;return a>1&&(i=Math.floor(i/a)),Math.floor(i/this._options.spacing)}_normalizedEventToPosition(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(t.spacing*e),this._spacingY=Math.ceil(t.spacing*t.fontSize),t.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=t.width*this._spacingX,this._ctx.canvas.height=t.height*this._spacingY}}l.cache=!1;class h extends s{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){let[r,i,n,s,a]=t,o=this._options.tileWidth,l=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(r*o,i*l,o,l):(this._ctx.fillStyle=a,this._ctx.fillRect(r*o,i*l,o,l))),!n)return;let h=[].concat(n),c=[].concat(s),u=[].concat(a);for(let t=0;t<h.length;t++){let e=this._options.tileMap[h[t]];if(!e)throw new Error(`Char "${h[t]}" not found in tileMap`);if(this._options.tileColorize){let n=this._colorCanvas,s=n.getContext("2d");s.globalCompositeOperation="source-over",s.clearRect(0,0,o,l);let a=c[t],h=u[t];s.drawImage(this._options.tileSet,e[0],e[1],o,l,0,0,o,l),"transparent"!=a&&(s.fillStyle=a,s.globalCompositeOperation="source-atop",s.fillRect(0,0,o,l)),"transparent"!=h&&(s.fillStyle=h,s.globalCompositeOperation="destination-over",s.fillRect(0,0,o,l)),this._ctx.drawImage(n,r*o,i*l,o,l)}else this._ctx.drawImage(this._options.tileSet,e[0],e[1],o,l,r*o,i*l,o,l)}}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}var c=r(3);class u extends n.a{static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){alert(t.message)}}schedule(t){requestAnimationFrame(t)}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();let e=this._options.tileSet;e&&"complete"in e&&!e.complete?e.addEventListener("load",()=>this._updateTexture(e)):this._updateTexture(e)}draw(t,e){const r=this._gl,i=this._options;let[n,s,a,o,l]=t,h=r.canvas.height-(s+1)*i.tileHeight;if(r.scissor(n*i.tileWidth,h,i.tileWidth,i.tileHeight),e&&(i.tileColorize?r.clearColor(0,0,0,0):r.clearColor(...v(l)),r.clear(r.COLOR_BUFFER_BIT)),!a)return;let c=[].concat(a),u=[].concat(l),f=[].concat(o);r.uniform2fv(this._uniforms.targetPosRel,[n,s]);for(let t=0;t<c.length;t++){let e=this._options.tileMap[c[t]];if(!e)throw new Error(`Char "${c[t]}" not found in tileMap`);r.uniform1f(this._uniforms.colorize,i.tileColorize?1:0),r.uniform2fv(this._uniforms.tilesetPosAbs,e),i.tileColorize&&(r.uniform4fv(this._uniforms.tint,v(f[t])),r.uniform4fv(this._uniforms.bg,v(u[t]))),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...v(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){let r=this._gl.canvas,i=r.getBoundingClientRect();return t-=i.left,e-=i.top,t*=r.width/i.width,e*=r.height/i.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){let t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;let e=function(t,e,r){const i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,e),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(i)||"");const n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n)||"");const s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,n),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(s)||"");return s}(t,d,p);return t.useProgram(e),function(t){const e=new Float32Array([0,0,1,0,0,1,1,1]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}(t),f.forEach(r=>this._uniforms[r]=t.getUniformLocation(e,r)),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,r=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=r[0],t.canvas.height=r[1],t.viewport(0,0,r[0],r[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,r)}_updateTexture(t){!function(t,e){let r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}(this._gl,t)}}const f=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],d="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),p="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}".trim();let g={};function v(t){if(!(t in g)){let e;if("transparent"==t)e=[0,0,0,0];else if(t.indexOf("rgba")>-1){e=(t.match(/[\d.]+/g)||[]).map(Number);for(let t=0;t<3;t++)e[t]=e[t]/255}else e=c.fromString(t).map(t=>t/255),e.push(1);g[t]=e}return g[t]}var m=r(5);const y=/%([bc]){([^}]*)}/g,w=0,b=1,k=2,x=3;function P(t,e){let r={width:0,height:1},i=C(t,e),n=0;for(let t=0;t<i.length;t++){let e=i[t];switch(e.type){case w:n+=e.value.length;break;case b:r.height++,r.width=Math.max(r.width,n),n=0}}return r.width=Math.max(r.width,n),r}function C(t,e){let r=[],i=0;t.replace(y,(function(e,n,s,a){let o=t.substring(i,a);return o.length&&r.push({type:w,value:o}),r.push({type:"c"==n?k:x,value:s.trim()}),i=a+e.length,""}));let n=t.substring(i);return n.length&&r.push({type:w,value:n}),function(t,e){e||(e=1/0);let r=0,i=0,n=-1;for(;r<t.length;){let s=t[r];if(s.type==b&&(i=0,n=-1),s.type!=w){r++;continue}for(;0==i&&" "==s.value.charAt(0);)s.value=s.value.substring(1);let a=s.value.indexOf("\n");if(-1!=a){s.value=S(t,r,a,!0);let e=s.value.split("");for(;e.length&&" "==e[e.length-1];)e.pop();s.value=e.join("")}if(s.value.length){if(i+s.value.length>e){let a=-1;for(;;){let t=s.value.indexOf(" ",a+1);if(-1==t)break;if(i+t>e)break;a=t}if(-1!=a)s.value=S(t,r,a,!0);else if(-1!=n){let e=t[n],i=e.value.lastIndexOf(" ");e.value=S(t,n,i,!0),r=n}else s.value=S(t,r,e-i,!1)}else i+=s.value.length,-1!=s.value.indexOf(" ")&&(n=r);r++}else t.splice(r,1)}t.push({type:b});let s=null;for(let e=0;e<t.length;e++){let r=t[e];switch(r.type){case w:s=r;break;case b:if(s){let t=s.value.split("");for(;t.length&&" "==t[t.length-1];)t.pop();s.value=t.join("")}s=null}}return t.pop(),t}(r,e)}function S(t,e,r,i){let n={type:b},s={type:w,value:t[e].value.substring(r+(i?1:0))};return t.splice(e+1,0,n,s),t[e].value.substring(0,r)}const R={4:[[0,-1],[1,0],[0,1],[-1,0]],8:[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],6:[[-1,-1],[1,-1],[2,0],[1,1],[-1,1],[-2,0]]},T={hex:o,rect:l,tile:h,"tile-gl":u,term:m.a},M={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class A{constructor(t={}){this._data={},this._dirty=!1,this._options={},t=Object.assign({},M,t),this.setOptions(t),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(t,e,r){let i=[this._options.bg,this._options.fg];this.draw(t,e,null,null,i[r%i.length])}clear(){this._data={},this._dirty=!0}setOptions(t){if(Object.assign(this._options,t),t.width||t.height||t.fontSize||t.fontFamily||t.spacing||t.layout){if(t.layout){let e=T[t.layout];this._backend=new e}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(t,e){return this._backend.computeSize(t,e)}computeFontSize(t,e){return this._backend.computeFontSize(t,e)}computeTileSize(t,e){return[Math.floor(t/this._options.width),Math.floor(e/this._options.height)]}eventToPosition(t){let e,r;return"touches"in t?(e=t.touches[0].clientX,r=t.touches[0].clientY):(e=t.clientX,r=t.clientY),this._backend.eventToPosition(e,r)}draw(t,e,r,i,n){i||(i=this._options.fg),n||(n=this._options.bg);let s=`${t},${e}`;this._data[s]=[t,e,r,i,n],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[s]=!0)}drawText(t,e,r,i){let n=null,s=null,a=t,o=e,l=1;i||(i=this._options.width-t);let h=C(r,i);for(;h.length;){let e=h.shift();switch(e.type){case w:let r=!1,i=!1,h=!1,c=!1;for(let t=0;t<e.value.length;t++){let l=e.value.charCodeAt(t),u=e.value.charAt(t);h=l>65280&&l<65377||l>65500&&l<65512||l>65518,r=32==u.charCodeAt(0)||12288==u.charCodeAt(0),!c||h||r||a++,h&&!i&&a++,this.draw(a++,o,u,n,s),i=r,c=h}break;case k:n=e.value||null;break;case x:s=e.value||null;break;case b:a=t,o++,l++}}return l}_tick(){if(this._backend.schedule(this._tick),this._dirty){if(!0===this._dirty){this._backend.clear();for(let t in this._data)this._draw(t,!1)}else for(let t in this._dirty)this._draw(t,!0);this._dirty=!1}}_draw(t,e){let r=this._data[t];r[4]!=this._options.bg&&(e=!0),this._backend.draw(r,e)}}A.Rect=l,A.Hex=o,A.Tile=h,A.TileGL=u,A.Term=m.a;Math.sqrt(3),Math.sqrt(3);class B{constructor(t,e,r,i={}){this._toX=t,this._toY=e,this._passableCallback=r,this._options=Object.assign({topology:8},i),this._dirs=R[this._options.topology],8==this._options.topology&&(this._dirs=[this._dirs[0],this._dirs[2],this._dirs[4],this._dirs[6],this._dirs[1],this._dirs[3],this._dirs[5],this._dirs[7]])}_getNeighbors(t,e){let r=[];for(let i=0;i<this._dirs.length;i++){let n=this._dirs[i],s=t+n[0],a=e+n[1];this._passableCallback(s,a)&&r.push([s,a])}return r}}var O={Dijkstra:class extends B{constructor(t,e,r,i){super(t,e,r,i),this._computed={},this._todo=[],this._add(t,e,null)}compute(t,e,r){let i=t+","+e;if(i in this._computed||this._compute(t,e),!(i in this._computed))return;let n=this._computed[i];for(;n;)r(n.x,n.y),n=n.prev}_compute(t,e){for(;this._todo.length;){let r=this._todo.shift();if(r.x==t&&r.y==e)return;let i=this._getNeighbors(r.x,r.y);for(let t=0;t<i.length;t++){let e=i[t],n=e[0],s=e[1];n+","+s in this._computed||this._add(n,s,r)}}}_add(t,e,r){let i={x:t,y:e,prev:r};this._computed[t+","+e]=i,this._todo.push(i)}},AStar:class extends B{constructor(t,e,r,i={}){super(t,e,r,i),this._todo=[],this._done={}}compute(t,e,r){for(this._todo=[],this._done={},this._fromX=t,this._fromY=e,this._add(this._toX,this._toY,null);this._todo.length;){let r=this._todo.shift(),i=r.x+","+r.y;if(i in this._done)continue;if(this._done[i]=r,r.x==t&&r.y==e)break;let n=this._getNeighbors(r.x,r.y);for(let t=0;t<n.length;t++){let e=n[t],i=e[0],s=e[1];i+","+s in this._done||this._add(i,s,r)}}let i=this._done[t+","+e];if(i)for(;i;)r(i.x,i.y),i=i.prev}_add(t,e,r){let i=this._distance(t,e),n={x:t,y:e,prev:r,g:r?r.g+1:0,h:i},s=n.g+n.h;for(let t=0;t<this._todo.length;t++){let e=this._todo[t],r=e.g+e.h;if(s<r||s==r&&i<e.h)return void this._todo.splice(t,0,n)}this._todo.push(n)}_distance(t,e){switch(this._options.topology){case 4:return Math.abs(t-this._fromX)+Math.abs(e-this._fromY);case 6:let r=Math.abs(t-this._fromX),i=Math.abs(e-this._fromY);return i+Math.max(0,(r-i)/2);case 8:return Math.max(Math.abs(t-this._fromX),Math.abs(e-this._fromY))}}}};function I(t,e){let r=t>=0?2*t:-2*t-1,i=e>=0?2*e:-2*e-1;return r>=i?r*r+r+i:r+i*i}const E=function(t){return 0===t?"$0":t<100?`${t}¢`:t%100==0?`$${t/100}`:`$${Number.parseFloat(t/100).toFixed(2)}`};function W(t){switch(t){case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"A"}return t>=2&&t<=10?t:"?"}let D=0,j=()=>D++;const L=j(),$=j(),z=j(),H=j();function N(t,e){switch(t){case H:return e?"S":"♠";case L:return e?"H":"♥";case $:return e?"C":"♣";case z:return e?"D":"♦"}return"?"}const F=j(),V=j(),U=j(),q=j(),G={};G[F]={min:0,max:1,name:"point blank"},G[V]={min:2,max:6,name:"close"},G[U]={min:7,max:19,name:"medium"},G[q]={min:20,max:26,name:"long"};const X=j(),Y=j(),J=j(),K=j(),Z=j(),Q=j(),tt=j(),et=j(),rt=j(),it=j(),nt=j(),st=j(),at=j(),ot=j(),lt=j(),ht={};ht[X]={name:"dirt",symbols:["."],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},ht[Y]={name:"dirt",symbols:[""],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},ht[J]={name:"grass",symbols:['"'],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ht[K]={name:"grass",symbols:["'"],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ht[Z]={name:"grass",symbols:[""],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},ht[Q]={name:"water",symbols:["~","","",""],fore:"white",back:"blue",blocksMove:!0,blocksVision:!1},ht[tt]={name:"wood floor",symbols:["="],fore:"goldenrod",back:"darkgoldenrod",blocksMove:!1,blocksVision:!1},ht[et]={name:"wood wall",symbols:["#"],fore:"darkgoldenrod",back:"brown",blocksMove:!0,blocksVision:!0},ht[rt]={name:"wood door",symbols:[";"],fore:"black",back:"darkgoldenrod",blocksMove:!1,blocksVision:!0},ht[it]={name:"poker table",symbols:["O"],fore:"black",back:"brown",blocksMove:!0,blocksVision:!1},ht[nt]={name:"bench",symbols:["–"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},ht[st]={name:"cross",symbols:["†"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},ht[at]={name:"vault door",symbols:["#"],fore:"white",back:"dimgray",blocksMove:!0,blocksVision:!0},ht[ot]={name:"grave",symbols:["†"],fore:"white",back:"saddlebrown",blocksMove:!0,blocksVision:!1},ht[lt]={name:"operating table",symbols:["+"],fore:"red",back:"white",blocksMove:!0,blocksVision:!1};const ct=[0,10,25,50,75,100,125,150,175,200,250,300,350,400,450,500,600,700,800,900,1e3],ut=["Akecheta","Akicita","Anoki","Canowicakte","Capa","Cetanwakuwa","Chankoowashtay","Chaska","Chaske","Chatan","Chaytan","Enapay","Hotah","Howahkan","Ishtaspa","Kangee","Mahpee","Mato","Matoskah","Misae","Ogaleesha","Ohanzee","Ohitekah","Otaktay","Paytah","Sintemaza","Sota","Tacanipiluta","Tahatan","Taheton","Tamilapesni","Tasunke","Tatonga","Teetonka","Wamblee","Wambli","Wanahton","Wi-sapa"],ft=["Abner","Adam","August","Austin","Bart","Beau","Billy","Blaze","Bo","Boone","Bowen","Bowie","Brawley","Breaker","Brent","Bret","Brock","Brody","Bronco","Brooks","Buck","Buster","Butch","Cal","Calhoun","Carson","Casey","Cash","Cassidy","Chance","Chandler","Cheyenne","Clay","Clint","Cody","Colt","Colton","Cord","Dallas","Dash","Deacon","Decker","Denver","Destry","Dexter","Dice","Dodge","Duke","Dusty","Dylan","Early","Flint","Gunner","Gus","Hank","Hawk","Heath","Hitch","Houston","Huck","Huckleberry","Jace","Jackson","Jeb","Jed","Jem","Jericho","Jesse","Josh","Judd","Judson","Justice","Kit","Laird","Landry","Levi","Luke","Mack","Maverick","Mccoy","Montana","Nash","Oakley","Otis","Phineas","Pistol","Quentin","Rancher","Ranger","Reeve","Remington","Remy","Reno","Rio","River","Romer","Roper","Roscoe","Rufus","Ryder","Rye","Sawyer","Shane","Shiloh","Silas","Stetson","Tex","Thatcher","Travis","Tripp","Ty","Wade","Walker","West","Westin","Weston","Wild","Wilder","Wyatt","Wylie","Yale","Zalman","Zane","Zeb"],dt=["Austin","Boone","Bowen","Bowie","Brody","Brooks","Buck","Calhoun","Carson","Casey","Cash","Cassidy","Clay","Cody","Colt","Colton","Cooper","Deacon","Decker","Denver","Dexter","Flint","Ford","Houston","Huckleberry","Jackson","Jones","Laird","Landry","Levi","Mccoy","Miller","Montana","Nash","Oakley","Rancher","Ranger","Reeve","Ryder","Rye","Sawyer","Smith","Stetson","Tex","Thatcher","Walker","West","Westin","Weston"];var pt=r(2),gt=r.n(pt),vt=r(7),mt=r.n(vt);class yt{constructor(){this.naturalItem=!1,this.isWeapon=!1,this.name="item",this.description="No description.",this.value=0,this.symbol="o"}}class _t extends yt{constructor(){super(),this.isWeapon=!0,this.name="weapon",this.drawSpeed=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class wt extends yt{constructor(){super(),this.name="can of beans",this.description="Some tasty beans.",this.symbol="o",this.value=50}}class bt extends yt{constructor(){super(),this.name="36 bullets",this.description="A box of bullets.",this.symbol="b",this.value=150}onBuy(t){t.bullets+=36,t.game.storeNeedsBullets=!0}}class kt extends yt{constructor(){super(),this.name="12 buckshot shells",this.description="A box of buckshot shells.",this.symbol="s",this.value=100}onBuy(t){t.buckshot+=12,t.game.storeNeedsBuckshot=!0}}class xt extends _t{constructor(){super(),this.name="melee weapon",this.description="A melee weapon.",this.isMelee=!0,this.maximumRange=F}}class Pt extends _t{constructor(){super(),this.name="ranged weapon",this.description="A ranged weapon.",this.isMelee=!1,this.maximumRange=q,this.capacity=1,this.currentAmmo=0,this.ammoType="bullets",this.unloadsWhenStowed=!1,this.rangeModifiers=[],this.rangeModifiers[F]=0,this.rangeModifiers[V]=0,this.rangeModifiers[U]=0,this.rangeModifiers[q]=0}}class Ct extends xt{constructor(){super(),this.name="fist",this.naturalItem=!0,this.drawDelay=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class St extends xt{constructor(){super(),this.name="knife",this.drawDelay=1,this.minDamage=1,this.maxDamageBase=4,this.maxDamageAttributes=["strength"],this.value=200}}class Rt extends xt{constructor(){super(),this.name="shovel",this.drawDelay=3,this.minDamage=2,this.maxDamageBase=3,this.maxDamageAttributes=["strength"],this.value=200}}class Tt extends xt{constructor(){super(),this.name="axe",this.drawDelay=3,this.minDamage=3,this.maxDamageBase=4,this.maxDamageAttributes=["strength"],this.value=200}}class Mt extends Pt{constructor(){super(),this.name="bow",this.unloadsWhenStowed=!0,this.drawDelay=2,this.capacity=1,this.ammoType="arrows",this.minDamage=2,this.maxDamageBase=0,this.maxDamageAttributes=["grit","strength"],this.rangeModifiers[F]=-5,this.rangeModifiers[V]=0,this.rangeModifiers[U]=0,this.rangeModifiers[q]=0,this.value=200}}class At extends Pt{constructor(t){super(),this.name="pistol",this.drawDelay=1,this.capacity=1,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=4,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=0,this.rangeModifiers[V]=2,this.rangeModifiers[U]=0,this.rangeModifiers[q]=-2,this.value=600}}class Bt extends Pt{constructor(t){super(),this.name="revolver",this.drawDelay=1,this.capacity=6,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=0,this.rangeModifiers[V]=2,this.rangeModifiers[U]=0,this.rangeModifiers[q]=-2,this.value=1200}}class Ot extends Pt{constructor(t){super(),this.name="rifle",this.drawDelay=3,this.capacity=1,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=2,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=-5,this.rangeModifiers[V]=0,this.rangeModifiers[U]=2,this.rangeModifiers[q]=2,this.value=2e3}}class It extends Pt{constructor(t){super(),this.name="shotgun",this.drawDelay=3,this.capacity=2,this.ammoType="buckshot",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[F]=0,this.rangeModifiers[V]=5,this.rangeModifiers[U]=0,this.rangeModifiers[q]=-5,this.value=2e3}}class Et{constructor(t,e){this.object=t,this.text=e}}class Wt extends Et{constructor(t,e,r,i){super(t,"Buy "+r.name+" ("+E(i)+")"),this.price=i,this.owner=e,this.item=r}onInteract(t){t.cents>=this.price&&(t.cents-=this.price,this.owner.cents+=this.price,this.item.onBuy?this.item.onBuy(t):t.inventory.push(this.item),this.object.delete())}}class Dt extends Et{constructor(t){super(t,"Take "+E(t.value))}onInteract(t){t.cents+=this.object.value,this.object.delete()}}class jt extends Et{constructor(t,e){super(t,"Loot "+e.name),this.item=e}onInteract(t){t.inventory.push(this.item),_.remove(this.object.character.inventory,this.item)}}class Lt extends Et{constructor(t){super(t,"Loot "+E(t.character.cents))}onInteract(t){t.cents+=this.object.character.cents,this.object.character.cents=0}}class $t extends Et{constructor(t,e){super(t,"Loot "+t.character[e]+" "+e),this.ammoType=e}onInteract(t){t[this.ammoType]+=this.object.character[this.ammoType],this.object.character[this.ammoType]=0}}class zt{constructor(t,e,r){this.name=t,this.symbol=e,this.color=r}getDisplayChar(){return{symbol:this.symbol,color:this.color}}delete(){_.remove(this.game.objects,this)}}class Ht extends zt{constructor(t,e,r){super(t.name,t.symbol,"white"),this.item=t,this.price=e,this.owner=r}getInteractions(){return[new Wt(this,this.owner,this.item,this.price)]}}class Nt extends zt{constructor(t){super("body ("+t.name+")","&","white"),this.character=t,this.isBody=!0}getInteractions(){let t=[];for(let e of this.character.inventory)t.push(new jt(this,e));return this.character.cents>0&&t.push(new Lt(this)),this.character.bullets>0&&t.push(new $t(this,"bullets")),this.character.arrows>0&&t.push(new $t(this,"arrows")),this.character.buckshot>0&&t.push(new $t(this,"buckshot")),t}}class Ft extends zt{constructor(t){super("Cash ("+t.toString()+")","$","green"),this.value=t}getInteractions(){return[new Dt(this)]}}class Vt{constructor(t,e){this.character=t,this.text=e}}class Ut extends Vt{constructor(t,e,r,i){super(t,"Sell "+r.name+" ("+E(i)+")"),this.price=i,this.seller=e,this.item=r}onInteract(t){_.remove(t.inventory,this.item),t.cents+=this.price,this.character.cents-=this.price,this.character.addItem(this.item)}}class qt extends Vt{constructor(t,e,r){super(t,`Buy medical care for ${E(r)}`),this.cost=r,this.patient=e}onInteract(t){t.health++,t.cents-=this.cost,this.character.cents+=this.cost}}class Gt extends Vt{constructor(t,e){super(t,"Deposit "+E(e)),this.value=e}onInteract(t){this.character.takeMoney(this.value,t)}}class Xt extends Vt{constructor(t,e){super(t,"Withdraw "+E(e)),this.value=e}onInteract(t){this.character.giveMoney(this.value,t)}}var Yt=r(8);const Jt=t=>t.startsWith("10")?10:t.startsWith("J")?11:t.startsWith("Q")?12:t.startsWith("K")?13:t.startsWith("A")?14:parseInt(t[0]),Kt=(t,e)=>Jt(e)-Jt(t);function Zt(t,e){let r=t.concat(e).map(t=>t.toRankingString()),i=Object(Yt.evaluateAndFindCards)(r),n=gt.a.difference(r,i.cards).sort(Kt).slice(0,5-i.cards.length);return{match:i.match,cardsInCombo:i.cards.map(Jt),bestCardsOutOfCombo:n.map(Jt),comboRank:(s=i.match,{"5ofakind":10,royalflush:9,straightflush:8,"4ofakind":7,fullhouse:6,flush:5,straight:4,"3ofakind":3,"2pair":2,pair:1,nothing:0}[s])};var s}function Qt(t,e){let r=[...t],i=[...e];for(;r[0]===i[0]&&r.length&&i.length;)r.shift(),i.shift();return r.length&&i.length?Math.sign(i[0]-r[0]):0}function te(t,e){if(t.comboRank!==e.comboRank)return Math.sign(e.comboRank-t.comboRank);let r=Qt(t.cardsInCombo,e.cardsInCombo);return r||Qt(t.bestCardsOutOfCombo,e.bestCardsOutOfCombo)}let ee=[];function re(t){let e="",r=Object.keys(t).sort();for(let i of r)Array.isArray(t[i])&&t[i].sort(),e+=t[i].toString()+",";return e}ee.push(["call","raise","fold","fold-and-keep"]),ee.push(["call","fold","fold-and-keep"]),ee.push(["fold","fold-and-keep"]),ee.push(["bet","check"]);class ie extends class{constructor(){this.sigma=[];let t={handStrength:0};for(;t.handStrength<3;t.handStrength++)for(t.communityHandStrength=0;t.communityHandStrength<3;t.communityHandStrength++)for(t.round=1;t.round<5;t.round++)if(t.round>1||2==t.communityHandStrength)for(t.actions of ee){let e={};for(let r of t.actions)e[r]=1/t.actions.length;this.setProbabilities(t,e)}}setProbabilities(t,e){this.sigma[re(t)]=e}chooseAction(t){return console.log(t),function(t){let e=0;for(let r in t)e+=t[r];let r=Math.random()*e,i=0;for(let e in t){if(r>i&&r<i+t[e])return e;i+=t[e]}throw console.log(t),"No option chosen"}(this.sigma[re(t)])}play(t){if(5===t.game.round&&!t.cardsRevealed&&!t.cardsMucked)return t.revealCards();let e=function(t){let e={actions:[]};t.canCall()&&e.actions.push("call"),t.canBet()&&e.actions.push("bet"),t.canCheck()&&e.actions.push("check"),t.canRaise()&&e.actions.push("raise"),t.canFold()&&(e.actions.push("fold"),e.actions.push("fold-and-keep")),e.handStrength=Math.min(t.bestHand().comboRank,2);let r=Zt([],t.game.communityCards);return e.communityHandStrength=Math.min(r.comboRank,2),e.round=t.game.round,e}(t),r=null;r=1==Object.keys(e.actions).length?e.actions[0]:this.chooseAction(e),function(t,e){switch(e){case"bet":t.bet(t.getMinValidBet());break;case"check":t.check();break;case"raise":t.raise(t.getMinValidRaise());break;case"fold":t.fold();break;case"fold-and-keep":t.foldAndKeepBestCard();break;case"call":t.call();break;default:throw"Unknown action "+e}}(t,r)}}{constructor(t,e){super(),this.aggressiveness=t,this.cheatiness=e;let r={handStrength:0,round:1};for(r.communityHandStrength of[0,1,2]){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.2*(1-this.aggressiveness),t.raise=.2*this.aggressiveness,t.fold=.8*(1-this.cheatiness),t["fold-and-keep"]=.8*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=.1*this.aggressiveness,t.check=.9+.1*(1-this.aggressiveness),this.setProbabilities(r,t)}for(r.communityHandStrength of(r.handStrength=1,r.round=1,[0,1,2])){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.8*(1-this.aggressiveness),t.raise=.8*this.aggressiveness,t.fold=.2*(1-this.cheatiness),t["fold-and-keep"]=.2*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=1*this.aggressiveness,t.check=1*(1-this.aggressiveness),this.setProbabilities(r,t)}for(r.communityHandStrength of(r.handStrength=2,r.round=1,[0,1,2])){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.8+.1*(1-this.aggressiveness),t.raise=.1*this.aggressiveness,t.fold=.1*(1-this.cheatiness),t["fold-and-keep"]=.1*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=.2*this.aggressiveness,t.check=.8+.2*(1-this.aggressiveness),this.setProbabilities(r,t)}for(r.round=2;r.round<5;r.round++){for(r.communityHandStrength of(r.handStrength=0,[0,1,2])){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.1*(1-this.aggressiveness),t.raise=.1*this.aggressiveness,t.fold=.9*(1-this.cheatiness),t["fold-and-keep"]=.9*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=.1*this.aggressiveness,t.check=.9+.1*(1-this.aggressiveness),this.setProbabilities(r,t)}for(r.communityHandStrength of(r.handStrength=1,[0,1,2])){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.5*(1-this.aggressiveness),t.raise=.5*this.aggressiveness,t.fold=.5*(1-this.cheatiness),t["fold-and-keep"]=.5*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=.5+.5*this.aggressiveness,t.check=.5*(1-this.aggressiveness),this.setProbabilities(r,t)}for(r.communityHandStrength of(r.handStrength=2,[0,1,2])){r.actions=["call","raise","fold","fold-and-keep"];let t=[];t.call=.8*(1-this.aggressiveness),t.raise=.8*this.aggressiveness,t.fold=.1*(1-this.cheatiness),t["fold-and-keep"]=.1*this.cheatiness,this.setProbabilities(r,t),r.actions=["bet","check"],t=[],t.bet=.8*this.aggressiveness,t.check=.2+.8*(1-this.aggressiveness),this.setProbabilities(r,t)}}}}let ne=0,se=[];class ae{constructor(t,e,r,i,n,s){this.name="Stranger",this.symbol="@",this.color="white",this.isPC=!1,this.isNPC=!0,this.id=ne++,this.cents=0,this.bullets=0,this.buckshot=0,this.arrows=0,this.inventory=[],this.bodyCarried=null,this.equippedWeapon=null,this.naturalWeapon=new Ct,this.initiative=0,this.level=t,this.xp=0,this.strength=e,this.quickness=r,this.cunning=i,this.guile=n,this.grit=s,this.health=this.getMaxHealth(),this.vigilance=this.getMaxVigilance(),this.subterfuge=this.getMaxSubterfuge(),this.honor=0,this.menace=0,this.luck=0,this.threat=0,this.utterance="",this.utteranceBuffer=[],this.activePokerPlayerRole=null;let a=_.sample([0,.25,.5,.75,1]),o=_.sample([0,.25,.5,.75,1]);this.pokerStrategy=new ie(a,o)}onGameStart(){}getDefaultOpinionOf(t){return this.profession.includes("US Marshal")&&t.profession.includes("Lakota")||t.profession.includes("US Marshal")&&this.profession.includes("Lakota")?-10:t.profession.includes("US Marshal")&&this.profession.includes("US Marshal")||t.profession.includes("Lakota")&&this.profession.includes("Lakota")?5:t.profession.includes("Lakota")&&!this.profession.includes("Lakota")||!t.profession.includes("Lakota")&&this.profession.includes("Lakota")?-5:0}getOpinionOf(t){return se.hasOwnProperty(this.id)?se[this.id].hasOwnProperty(t.id)||(se[this.id][t.id]=this.getDefaultOpinionOf(t)):(se[this.id]=[],se[this.id][t.id]=0),se[this.id][t.id]}setOpinionOf(t,e){return se.hasOwnProperty(this.id)||(se[this.id]=[]),se[this.id][t.id]=e,se[this.id][t.id]}modifyOpinionOf(t,e){return this.setOpinionOf(t,this.getOpinionOf(t)+e)}getDisplayChar(){return{symbol:this.symbol,color:this.color}}getMaxHealth(){return 10+this.level+this.strength+this.grit}getMaxVigilance(){return 5+this.quickness+this.cunning}getMaxSubterfuge(){return this.guile+this.quickness+this.cunning}getMeleeAttack(){return this.level+this.quickness+this.strength}getRangedAttack(){return this.level+this.quickness+this.grit}getDefense(){return 10+Math.floor(this.level/2)+this.grit}startTurn(){}join(t){this.isNPC&&this.say("I'm joining this game.");let e=t.addPlayer(this);this.activePokerPlayerRole=e}say(t){this.utteranceBuffer.push(t)}wait(){this.vigilance<this.getMaxVigilance()&&this.vigilance++,_.random(1,100)<20&&this.isNPC&&this.activePokerPlayerRole&&this.activePokerPlayerRole.game.activePlayer&&this.activePokerPlayerRole.game.activePlayer.character.isPC?this.say(_.sample(["Your go.","Waiting on you.",`${this.activePokerPlayerRole.game.activePlayer.character.name}?`])):_.random(1,100)<4&&this.say(_.sample(["*whistle*","*cough*"]))}equip(t){this.equippedWeapon&&this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.equippedWeapon=t,this.initiative-=t.drawDelay,this.game.log(`${this.name} draws his ${t.name}.`)}unequip(){this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.game.log(`${this.name} stows his ${this.equippedWeapon.name}.`),this.equippedWeapon=null}reload(){let t=this.getCurrentWeapon();t.currentAmmo++,this[t.ammoType]--,this.game.log(`${this.name} reloads his ${t.name}.`)}getCurrentWeapon(){return this.equippedWeapon||this.naturalWeapon}canReload(){let t=this.getCurrentWeapon();return t.capacity&&t.currentAmmo<t.capacity&&this[t.ammoType]>0}getDamageWithWeapon(t){let e=t.minDamage,r=t.maxDamageAttributes.reduce((t,e)=>t+this[e],t.maxDamageBase);return r=Math.max(e,r),{min:e,max:r}}isHostileTo(t){return this.getOpinionOf(t)<=-10}canAttack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t),i=[F,V,U,q].find(t=>r>=G[t].min&&r<=G[t].max);return!!i&&(!(i>e.maximumRange)&&(!(e.capacity&&e.currentAmmo<1)&&this.game.map.lineOfSightExistsBetween(this,t)))}attack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t),i=[F,V,U,q].find(t=>r>=G[t].min&&r<=G[t].max),n=e.rangeModifiers?e.rangeModifiers[i]:0,s=(e.isMelee?this.getMeleeAttack():this.getRangedAttack()+n)+_.random(1,20)>=t.getDefense();if(e.currentAmmo--,this.onAttack(t),e.ammoType&&this.game.addProjectile(e.ammoType,s,{x:this.x,y:this.y},{x:t.x,y:t.y}),!s)return void this.game.log(`${this.name} misses ${t.name} at ${G[i].name} range (${n>=0?"+"+n:n}) with his ${e.name}.`);let{min:a,max:o}=this.getDamageWithWeapon(e),l=_.random(a,o)+n;t.takeDamage(l)?(this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${l} damage and killing him.`),this.onKill(t)):this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${l} damage.`)}takeDamage(t){return this.health=Math.max(this.health-t,0),this.vigilance=Math.max(this.vigilance-t,0),this.health<=0&&(this.die(),!0)}die(){this.activePokerPlayerRole&&this.activePokerPlayerRole.game.removePlayer(this.activePokerPlayerRole),_.remove(this.game.characters,this),this.game.addObject(new Nt(this),this.x,this.y),this.isPC&&(this.game.gameOver=!0)}distanceBetween(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))}getAdjacentObjects(){let t=[];return t=t.concat(this.game.getObjects(this.x+1,this.y)),t=t.concat(this.game.getObjects(this.x-1,this.y)),t=t.concat(this.game.getObjects(this.x,this.y+1)),t=t.concat(this.game.getObjects(this.x,this.y-1)),t}getAdjacentCharacters(){let t=[];return t=t.concat(this.game.getCharacters(this.x+1,this.y)),t=t.concat(this.game.getCharacters(this.x-1,this.y)),t=t.concat(this.game.getCharacters(this.x,this.y+1)),t=t.concat(this.game.getCharacters(this.x,this.y-1)),t}getAllowedInteractions(){let t=[];for(let e of this.getAdjacentObjects())t=t.concat(e.getInteractions());for(let e of this.getAdjacentCharacters())t=t.concat(e.getInteractions(this));return t}getInteractions(t){return[]}move(t,e){this.previousSpace={x:this.x,y:this.y},this.x=t,this.y=e}onCheated(t){let e=_.random(1,10)+t.subterfuge;console.log(t.name+" tries to cheat "+this.name+": "+e.toString()+" vs "+this.vigilance.toString()),e<this.vigilance&&(console.log(this.name+" catches "+t.name+" cheating"),this.onCatchesCheater(t))}onCatchesCheater(t){}onTurnEnd(){this.utterance=this.utteranceBuffer.join(" "),this.utteranceBuffer=[]}}class oe extends ae{constructor(){super(0,1,0,0,0,1),this.name="Rodney",this.cents=2e3,this.isPC=!0,this.isNPC=!1,this.bullets=36,this.buckshot=0,this.arrows=0,this.profession="(You)",this.inventory.push(new At(!0)),this.inventory.push(new St),this.inventory.push(new wt)}gainXp(t){if(this.xp+=t,this.level<20&&this.xp>=ct[this.level+1]){let t=_.sample(["strength","quickness","cunning","guile","grit"]);this.level++,this[t]++,this.game.log(`You have gained a level and improved your ${t}.`)}}onAttack(t){t.isHostileTo(this)||this.game.characters.forEach(e=>{e.isNPC&&e.getOpinionOf(t)>=0&&e.modifyOpinionOf(this,-2*e.desires.attackProvokers)});t.modifyOpinionOf(this,-20)}onKill(t){this.gainXp(5)}onCatchesCheater(t){this.game.log("You caught "+t.name+" cheating!")}}class le extends ae{constructor(t,e,r,i,n,s){super(t,e,r,i,n,s),this.profession="NPC",this.desires={gamble:0,travel:0,attackProvokers:0,defendBank:0,buryBodies:0},this.winningStreak=0,this.losingStreak=0}getThreats(){return this.game.characters.filter(t=>this.isHostileTo(t))}getPossibleTargets(){return this.getThreats().filter(t=>this.canAttack(t))}getBestWeapon(t){let e=this.inventory.filter(t=>t.isWeapon&&(!t.capacity||t.currentAmmo>0||this[t.ammoType]>0)).concat([this.naturalWeapon]);if(e.every(t=>t.isMelee))return e.sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0];let r=this.distanceBetween(t),i=[F,V,U,q].find(t=>r>=G[t].min&&r<=G[t].max);return i===F?e.filter(t=>t.isMelee).sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0]:e.filter(t=>!t.isMelee).sort((t,e)=>e.rangeModifiers[i]-t.rangeModifiers[i])[0]}generateNewPathIfRequired(t,e){this.path&&this.aStar&&(this.aStar._toX===t||this.aStar._toY===e)||(this.aStar=new O.AStar(t,e,(t,e)=>this.spaceIsValidPath(t,e)),this.path=[],this.aStar.compute(this.x,this.y,(t,e)=>{this.path.push({x:t,y:e})}),this.path.shift())}spaceIsValidPath(t,e){return this.x===t&&this.y===e||!(Math.abs(t-this.x)>150||Math.abs(e-this.y)>150)&&!this.game.isSpaceBlocked(t,e)}walkPathIfPossible(t,e){if(this.generateNewPathIfRequired(t,e),!this.path.length)return!1;if(!this.spaceIsValidPath(this.path[0].x,this.path[0].y)){let t=this.game.getCharacters(this.path[0].x,this.path[0].y);if(t.length)return this.getOpinionOf(t[0])<=0&&(this.modifyOpinionOf(t[0],-1),this.say("Get out of my way!")),console.log(this.name+" is blocking "+t[0].name),this.aStar=null,this.path=null,!1}if(this.path.length){let t=this.path.shift();if(this.spaceIsValidPath(t.x,t.y))return this.move(t.x,t.y),!0}return!1}takeTurn(){if(this.startTurn(),this.canReload()&&!this.getCurrentWeapon().currentAmmo)return void this.reload();let t=this.getPossibleTargets().sort((t,e)=>t.health-e.health);if(t.length)return void this.attack(t[0]);if(this.canReload())return void this.reload();let e=this.getThreats().sort((t,e)=>t.distanceBetween(e));if(e.length){let t=this.getBestWeapon(e[0]);if(t!==this.getCurrentWeapon())return t===this.naturalWeapon?void this.unequip():void this.equip(t);let r=e[0];if(this.walkPathIfPossible(r.x,r.y))return}else if(this.getCurrentWeapon()!==this.naturalWeapon)return void this.unequip();if(this.health<this.getMaxHealth()&&this.cents>=100){let t=this.game.characters.filter(t=>"Surgeon"===t.profession);if(t){let e=t.sort((t,e)=>this.distanceBetween(t)-this.distanceBetween(e))[0];if(1===this.distanceBetween(e)){return void e.getInteractions(this).filter(t=>t instanceof qt)[0].onInteract(this)}if(this.walkPathIfPossible(e.x,e.y))return}}if(this.desires.buryBodies>0){if(this.nextGravePlot||(this.nextGravePlot=this.getEmptyGravePlot()),this.bodyCarried){if(this.distanceBetween({x:this.nextGravePlot[0],y:this.nextGravePlot[1]})<=1)return void this.buryBody(this.nextGravePlot[0],this.nextGravePlot[1]);if(this.walkPathIfPossible(this.nextGravePlot[0],this.nextGravePlot[1]))return}let t=this.game.objects.filter(t=>t.isBody).sort((t,e)=>this.distanceBetween(t)-this.distanceBetween(e))[0];if(t){if(this.distanceBetween(t)<=1)return this.bodyCarried=t,void _.remove(this.game.objects,t);if(this.walkPathIfPossible(t.x,t.y))return}}if(this.desires.defendBank){let t=this.game.guardPosts.filter(t=>this.spaceIsValidPath(t.x,t.y))[0];if(t&&this.walkPathIfPossible(t.x,t.y))return}let r=this.game.pokerGames.filter(t=>this.cents>=2*t.bigBlind).sort((t,e)=>this.distanceBetween(t)-this.distanceBetween(e))[0];if(r&&!this.activePokerPlayerRole&&this.desires.gamble>0){if(1===this.distanceBetween(r))return void this.join(r);if(this.walkPathIfPossible(r.x,r.y))return}let i=this.activePokerPlayerRole;if(i&&i.isActivePlayer()&&i.game.waitingForActivePlayerAction)return this.pokerStrategy.play(i),void(i.game.activePlayer=i.game.getNextPlayer(i,!0));if(i&&i.isDealer()&&i.game.waitingForDealerAction)i.deal();else{if(!this.activePokerPlayerRole&&this.desires.gamble>0){if(this.inventory.length>0){let t=Math.min(...this.game.pokerGames.map(t=>t.bigBlind));if(this.inventory.map(t=>t.value).reduce((t,e)=>t+e)+this.cents>=2*t){let t=this.game.characters.filter(t=>"Shopkeeper"==t.profession);if(t){let e=t.sort((t,e)=>this.distanceBetween(t)-this.distanceBetween(e))[0];if(1===this.distanceBetween(e)){return void e.getInteractions(this).filter(t=>t instanceof Ut)[0].onInteract(this)}if(this.walkPathIfPossible(e.x,e.y))return}}}this.desires.travel++}if("Shopkeeper"===this.profession){if(this.game.storeNeedsBullets&&_.random(1,100)<5)return this.addItem(new bt),void(this.game.storeNeedsBullets=!1);if(this.game.storeNeedsBuckshot&&_.random(1,100)<5)return this.addItem(new kt),void(this.game.storeNeedsBuckshot=!1)}if(!this.activePokerPlayerRole&&this.desires.travel>10){if(this.x<-50&&this.distanceBetween(this.game.player)>35)return void this.game.removeCharacter(this);if(this.x<=0&&Math.abs(this.y)<3&&this.spaceIsValidPath(this.x-1,this.y))return void this.move(this.x-1,this.y);if(this.walkPathIfPossible(0,0))return}this.wait()}}onAttack(t){}onKill(t){}onCatchesCheater(t){this.say(t.name+", I think you're cheating."),this.modifyOpinionOf(t,-5)}}class he extends le{constructor(){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,0,1,2])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color=_.sample(["purple","lawngreen","deeppink"]),this.profession="Scoundrel",this.inventory.push(_.sample([new St,new At(!0),new At(!0),new Bt(!0)])),this.bullets=20,this.cents=2e3,this.desires.attackProvokers=1,this.desires.gamble=10}}class ce extends le{constructor(){super(_.sample([0,1,2,4]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,1,2,3])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="black",this.profession="Priest",this.cents=2e3}}class ue extends le{constructor(t,e,r,i){super(_.sample([0,0,1,2]),_.sample([1,1,2,3]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([1,2,3,4])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="black",this.profession="Undertaker",this.cents=150,this.inventory.push(new Rt(!0)),this.cemetaryTop=t,this.cemetaryLeft=e,this.cemetaryWidth=r,this.cemetaryHeight=i,this.desires.buryBodies=1,this.nextGravePlot=null}getEmptyGravePlot(){let t=[];for(let e=this.cemetaryLeft+1;e<this.cemetaryLeft+this.cemetaryWidth;e++)for(let r=this.cemetaryTop+3;r<this.cemetaryTop+this.cemetaryHeight;r+=2)e!=this.cemetaryLeft+this.cemetaryWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}buryBody(t,e){this.bodyCarried=null,this.game.map.setTile(t,e,ot),this.nextGravePlot=this.getEmptyGravePlot()}}class fe extends le{constructor(t,e,r,i){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="green",this.profession="Shopkeeper",this.inventory.push(new Bt(!0)),this.bullets=30,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=i,this.cents=8e3}getInteractions(t){let e=[];if(this.getEmptyShopSpace())for(let r of t.inventory)r.value>0&&e.push(new Ut(this,t,r,r.value));return e}addItem(t){let e=this.getEmptyShopSpace();this.game.addObject(new Ht(t,t.value,this),e[0],e[1])}getEmptyShopSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}}class de extends le{constructor(){super(_.sample([0,0,1,2]),_.sample([0,1,1,1]),_.sample([0,1,1,2]),_.sample([2,3,4,5]),_.sample([0,0,0,1]),_.sample([0,0,1,2])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="white",this.profession="Surgeon",this.inventory.push(new St),this.cents=4e3}getInteractions(t){let e=[];return t.health<t.getMaxHealth()&&t.cents>=100&&e.push(new qt(this,t,100)),e}}class pe extends le{constructor(){super(_.sample([1,2,3,4]),_.sample([0,1,2,2]),_.sample([0,1,1,2]),_.sample([0,0,1,1]),_.sample([0,0,1,2]),_.sample([1,2,3,4])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="blue",this.profession="US Marshal",this.cents=4e3,this.desires.attackProvokers=5,this.desires.defendBank=5,this.inventory.push(new Ot(!0)),this.inventory.push(new Bt(!0)),this.bullets=120}}class ge extends le{constructor(){super(_.sample([0,0,1,1]),_.sample([1,1,1,1]),_.sample([1,1,1,2]),_.sample([0,0,1,2]),_.sample([0,0,1,1]),_.sample([0,0,1,1])),this.name=_.sample(ut),this.symbol="@",this.color="firebrick",this.profession="Lakota Scout",this.cents=0,this.inventory.push(_.sample([new At(!0),new Ot(!0),new Mt])),this.inventory.push(new St),this.arrows=20,this.bullets=20}}class ve extends le{constructor(){super(_.sample([1,2,2,3]),_.sample([2,2,3,4]),_.sample([0,1,2,3]),_.sample([0,1,1,2]),_.sample([0,0,1,1]),_.sample([1,2,3,4])),this.name=_.sample(ut),this.symbol="@",this.color="red",this.profession="Lakota Warrior",this.cents=0,this.inventory.push(new Ot(!0)),this.inventory.push(new Tt),this.bullets=30}}class me extends le{constructor(t,e,r,i){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([1,2,3,4]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ft)} ${_.sample(dt)}`,this.symbol="@",this.color="green",this.profession="Banker",this.inventory.push(new Bt(!0)),this.bullets=12,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=i,this.cents=8e3,this.cashList=[],this.accounts={}}getInteractions(t){let e=[];return this.accounts[t]&&(this.accounts[t]>=1e3?e.push(new Xt(this,1e3)):this.accounts[t]>0&&e.push(new Xt(this,this.accounts[t]))),t.cents>=1e3&&e.push(new Gt(this,1e3)),e}getEmptyVaultSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}onGameStart(){this.addMoneyToVault(2e3),this.addMoneyToVault(2e3)}takeMoney(t,e){e.cents-=t,this.accounts[e]?this.accounts[e]+=t:this.accounts[e]=t,this.addMoneyToVault(t)}addMoneyToVault(t){let e=this.getEmptyVaultSpace(),r=this.game.addObject(new Ft(t),e[0],e[1]);this.cashList.push(r)}giveMoney(t,e){for(e.cents+=t,this.accounts[e]-=t;t>=this.cashList[0].value;)t-=this.cashList[0].value,this.cashList[0].delete(),_.remove(this.cashList,this.cashList[0]);this.cashList[0].value=this.cashList[0].value-t}}class ye extends class{constructor(t,e,r,i,n,s){this.top=t,this.left=e,this.width=r,this.height=i,this.seed=n,this.map=s}overlapsCell(t,e){return!(t<this.left||t>this.left+this.width-1)&&!(e<this.top||e>this.top+this.height-1)}getTile(t,e){return this.tiles[t][e]}}{constructor(t,e,r,i,n,s){super(t,e,r,i,n,s);let a=[],o=i/2+3,l=i/2-3-16;for(let t=4;t+16<r-4;t+=16)a.push({top:o,left:t,width:16,height:16,orientation:"S"}),a.push({top:l,left:t,width:16,height:16,orientation:"N"});this.createGround();let h=_.sample(a);_.remove(a,h),this.createSaloon(h.top,h.left,10,10,h.orientation),h=_.sample(a),_.remove(a,h),this.createSaloon(h.top,h.left,10,10,h.orientation),h=_.sample(a),_.remove(a,h),this.createChurch(h.top,h.left,8,12,h.orientation),h=_.sample(a),_.remove(a,h),this.createShop(h.top,h.left,8,8,h.orientation),h=_.sample(a),_.remove(a,h),this.createBank(h.top,h.left,8,8,h.orientation),h=_.sample(a),_.remove(a,h),this.createSurgeonsOffice(h.top,h.left,6,6,h.orientation),h=_.sample(a),_.remove(a,h),this.createGraveyard(h.top,h.left,12,12,h.orientation)}createGround(){this.tiles=[];for(let t=0;t<this.width;t++){this.tiles[t]=[];for(let e=0;e<this.height;e++)this.tiles[t][e]=_.sample([X,X,X,Y])}}createRoom(t,e,r,i){for(let n=e;n<e+r;n++)for(let e=t;e<t+i;e++)this.tiles[n][e]=tt;for(let n=e;n<e+r;n++)this.tiles[n][t]=et,this.tiles[n][t+i]=et;for(let n=t;n<t+i;n++)this.tiles[e][n]=et,this.tiles[e+r][n]=et;this.tiles[e+r][t+i]=et}createSaloon(t,e,r,i,n){this.createRoom(t,e,r,i);let s=e+5,a=t+5;this.tiles[s][a]=it,"N"===n?this.tiles[e+6][t+i]=rt:this.tiles[e+6][t]=rt;let o=this.map.game.addPokerGame(this.left+s,this.top+a);for(let t of[[1,0],[-1,0],[0,1],[0,-1]])if(_.sample([!0,!1])){this.map.game.addCharacter(new he,this.left+s+t[0],this.top+a+t[1]).join(o)}}createChurch(t,e,r,i,n){if(this.createRoom(t,e,r,i),"N"===n){this.tiles[e+r/2][t+i]=rt,this.tiles[e+r/2][t+1]=st;for(let n=e+1;n<e+r;n++)for(let s=t+3;s<t+i;s+=2)n!=e+r/2&&(this.tiles[n][s]=nt)}else{this.tiles[e+r/2][t]=rt,this.tiles[e+r/2][t+i-1]=st;for(let n=e+1;n<e+r;n++)for(let s=t+1;s<t+i-2;s+=2)n!=e+r/2&&(this.tiles[n][s]=nt)}let s="N"===n?t+2:t+i-2;this.map.game.addCharacter(new ce,this.left+e+r/2,this.top+s)}createShop(t,e,r,i,n){this.createRoom(t,e,r,i),"N"===n?this.tiles[e+r/2][t+i]=rt:this.tiles[e+r/2][t]=rt;let s="N"===n?t+1:t+i-1,a=this.map.game.addCharacter(new fe(this.top+t,this.left+e,r,i),this.left+e+r/2,this.top+s);this.map.game.addObject(new Ht(new bt,150,a),this.left+e+1,this.top+t+1),this.map.game.addObject(new Ht(new kt,100,a),this.left+e+2,this.top+t+1),this.map.game.addObject(new Ht(new It,3e3,a),this.left+e+6,this.top+t+1)}createSurgeonsOffice(t,e,r,i,n){this.createRoom(t,e,r,i),"N"===n?this.tiles[e+r/2][t+i]=rt:this.tiles[e+r/2][t]=rt;let s="N"===n?t+1:t+i-1;this.map.game.addCharacter(new de,this.left+e+r/2,this.top+s);this.tiles[e+1+r/2][s]=lt}createGraveyard(t,e,r,i,n){this.map.game.addCharacter(new ue(this.top+t,this.left+e,r,i),this.left+e+r/2,this.top+t+i/2)}createBank(t,e,r,i,n){let s=i-4,a="N"===n?t:t+4,o="N"===n?t+4:t;this.createRoom(o,e,r,4),this.createRoom(a,e,r,s),"N"===n?(this.tiles[e+r/2][t+i]=rt,this.tiles[e+r/2][o]=at):(this.tiles[e+r/2][t]=rt,this.tiles[e+r/2][a]=at);let l="N"===n?o+1:a-1,h=(this.map.game.addCharacter(new me(this.top+a,this.left+e,r,s),this.left+e+r/2,this.top+l),"N"===n?t+i+1:t-1);this.map.game.addCharacter(new pe,this.left+e+r/2+2,this.top+h),this.map.game.addCharacter(new pe,this.left+e+r/2-2,this.top+h),this.map.game.guardPosts.push({x:this.left+e+r/2+2,y:this.top+h}),this.map.game.guardPosts.push({x:this.left+e+r/2-2,y:this.top+h})}}class _e{constructor(t){this.seed=gt.a.random(1e3),this.game=t,this.sites=[new ye(-30,0,100,60,this.seed,this)],this.editedTiles=[]}getTile(t,e){if(this.editedTiles[t]&&this.editedTiles[t][e])return this.editedTiles[t][e];let r=this.sites.find(r=>r.overlapsCell(t,e));if(r)return r.getTile(t-r.left,e-r.top);let i=I(this.seed,I(t,e));return t>40&&t<50?Q:(n=i,(s=[J,J,K,Z])[Math.floor(function(t,e=1,r=0){return r+(9301*t+49297)%233280/233280*(e-r)}(n)*s.length)]);var n,s}setTile(t,e,r){this.editedTiles.hasOwnProperty(t)||(this.editedTiles[t]=[]),this.editedTiles[t][e]=r}firstInterposingObstacleBetween(t,e){let r=mt()(t.x,t.y,e.x,e.y),i=r.next().value;for(;i;)if(i=r.next().value,i){let t=this.getTile(i.x,i.y);if(ht[t].blocksVision)return i.x===e.x&&i.y===e.y?null:i}return null}lineOfSightExistsBetween(t,e){return!this.firstInterposingObstacleBetween(t,e)}}class we{constructor(t,e,r){this.rootGame=t,this.x=e,this.y=r,this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,this.round=0,this.dealer=null,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.smallBlind=100,this.bigBlind=200,this.unclaimedMoneyOnTable=0,this.deck=new ke,this.communityCards=[],this.discardPile=[],this.players=[],this.playersWaitingToJoinHand=[],this.extraCard=null,this.didActionHappenThisTurn=!1}getPot(){return this.players.reduce((t,e)=>t+e.currentBet,0)+this.unclaimedMoneyOnTable}getHighestBet(){return Math.max(...this.players.map(t=>t.currentBet))}addPlayer(t){let e=new be(this,t);return this.playersWaitingToJoinHand.push(e),e}removePlayer(t){t.discardCards(),t===this.activePlayer&&(this.activePlayer=this.getNextPlayer(t,!0)),t===this.dealer&&(this.dealer=this.players[0]),_.remove(this.players,t),_.remove(this.playersWaitingToJoinHand,t),this.unclaimedMoneyOnTable+=t.currentBet,t.character.cents-=t.currentBet,t.character.activePokerPlayerRole=null}getPlayersInOrder(){const t=["0,-1","1,-1","1,0","1,1","0,1","-1,1","-1,0","-1,-1"];return this.players.sort((e,r)=>{let i=t.findIndex(t=>t===`${e.character.x-this.x},${e.character.y-this.y}`),n=t.findIndex(t=>t===`${r.character.x-this.x},${r.character.y-this.y}`);if(-1===i||-1===n)throw new Error("player is not at table");return i-n})}getNextPlayer(t,e){let r=e?this.getPlayersInOrder().filter(t=>t.inCurrentHand):this.getPlayersInOrder(),i=r.findIndex(e=>e===t)+1;return i>=r.length&&(i=0),r[i]}tick(){if(this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,0===this.round&&this.players.length+this.playersWaitingToJoinHand.length>=2)return this.players=this.players.concat(this.playersWaitingToJoinHand),this.playersWaitingToJoinHand=[],this.dealer||(this.dealer=this.players[0]),void(this.waitingForDealerAction=!0);1==this.players.filter(t=>t.inCurrentHand).length&&!this.players.filter(t=>t.inCurrentHand)[0].cardsMucked&&this.round>0?(this.players.filter(t=>t.inCurrentHand)[0].muckAndCollect(),this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1):this.allPlayersHaveActed()||1==this.players.filter(t=>t.inCurrentHand).length&&this.round>0?6===this.round?(this.cleanUp(),this.dealer=this.getNextPlayer(this.dealer,!1)):this.waitingForDealerAction=!0:this.waitingForActivePlayerAction=!0}cleanUp(){this.round=0,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.discardPile=this.discardPile.concat(this.communityCards),this.communityCards=[],this.players.forEach(t=>{t.currentWinnings=0,t.stake=0,t.currentBet=0,t.inCurrentHand=!1,t.hasTakenActionSinceLastRaise=!1,t.cardsRevealed=!1,t.cardsMucked=!1,t.discardCards()})}allPlayersHaveActed(){return this.round<5?this.players.filter(t=>t.inCurrentHand&&!t.isAllIn()).every(t=>t.hasTakenActionSinceLastRaise):this.players.filter(t=>t.inCurrentHand).every(t=>t.cardsRevealed||t.cardsMucked)}start(){this.dealer.character.say("Deal and ante."),this.round=1,this.deck.returnCards(this.discardPile),this.discardPile=[],this.deck.shuffle(),this.players.forEach(t=>{t.inCurrentHand=!0,t.takeCard(this.deck.draw()),t.takeCard(this.deck.draw())});for(let t of this.players)if(0==t.character.cents)return t.isDealer()?(this.dealer.character.say("I don't have enough money."),this.dealer=this.getNextPlayer(this.dealer,!1)):this.dealer.character.say(t.character.name+", you don't have enough money."),this.round=0,void this.removePlayer(t);let t=this.getNextPlayer(this.dealer,!0);if(t.character.cents<this.smallBlind)return t.isDealer()?(this.dealer.character.say("I don't have enough money."),this.dealer=this.getNextPlayer(this.dealer,!1)):this.dealer.character.say(t.character.name+", you don't have enough money."),this.round=0,void this.removePlayer(t);let e=this.getNextPlayer(t,!0);if(e.character.cents<this.bigBlind)return e.isDealer()?(this.dealer.character.say("I don't have enough money."),this.dealer=this.getNextPlayer(this.dealer,!1)):this.dealer.character.say(e.character.name+", you don't have enough money."),this.round=0,void this.removePlayer(e);t.bet(this.smallBlind,!1),e.bet(this.bigBlind,!1),this.activePlayer=this.getNextPlayer(e,!0),this.lastPlayerToBet=null,this.resetHasTakenActionSinceLastRaise()}resetHasTakenActionSinceLastRaise(){this.players.map(t=>t.hasTakenActionSinceLastRaise=!1)}flop(){this.resetHasTakenActionSinceLastRaise(),this.round=2;let t=[this.deck.draw(),this.deck.draw(),this.deck.draw()];this.communityCards.push(...t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.map(t=>t.getSpokenName()).join(", "))} on the flop.`)}turn(){this.round=3,this.resetHasTakenActionSinceLastRaise();let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the turn.`)}river(){this.round=4,this.resetHasTakenActionSinceLastRaise();let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the river.`)}reveal(){this.round=5,this.dealer.character.say("Show your cards!"),this.activePlayer=this.getNextPlayer(this.dealer,!0)}dividePot(){this.round=6,this.players.filter(t=>t.inCurrentHand).filter(t=>0===te(this.winningHand,t.bestHand())).map(t=>{t.character.say("I win!"),t.character.isPC&&t.character.gainXp(2)});let t=0;this.players.forEach(e=>{t+=e.currentBet,e.character.cents-=e.currentBet,e.stake=e.currentBet});let e=[],r=this.players.sort((t,e)=>t.stake-e.stake);do{let t=r.filter(t=>t.stake===r[0].stake),i=t[0].stake;e.push({contestedBy:[...r],amount:i*r.length}),r=_.difference(r,t).sort((t,e)=>t.stake-e.stake),r.map(t=>t.stake-=i)}while(r.length);e[e.length-1].amount+=this.unclaimedMoneyOnTable,this.unclaimedMoneyOnTable=0,e.forEach(t=>{let e={comboRank:-1};t.contestedBy.forEach(t=>{let r=t.bestHand();te(r,e)<=0&&(e=r)});let r=t.contestedBy.filter(t=>0===te(e,t.bestHand()));r.map(e=>e.currentWinnings+=Math.floor(t.amount/r.length))});let i=0;this.players.forEach(t=>{t.character.cents+=t.currentWinnings,i+=t.currentWinnings,console.log(`${t.character.name} gets ${E(t.currentWinnings)} from the pot.`)});let n=t-i;this.unclaimedMoneyOnTable+=n,console.log(`${E(n)} is left on the table.`)}}class be{constructor(t,e){this.game=t,this.character=e,this.currentWinnings=0,this.stake=0,this.currentBet=0,this.hole=[],this.inCurrentHand=!1,this.hasTakenActionSinceLastRaise=!1,this.cardsRevealed=!1,this.cardsMucked=!1}getBestCard(){return this.hole.concat().sort((t,e)=>4*e.value+e.suit-4*t.value-t.suit)[0]}isDealer(){return this.game.dealer===this}isActivePlayer(){return this.game.activePlayer===this}isAllIn(){return this.inCurrentHand&&this.character.cents===this.currentBet}isMatchingHighestBet(){return this.inCurrentHand&&this.currentBet>=this.game.getHighestBet()}bestHand(){return Zt(this.hole,this.game.communityCards)}takeCard(t){this.hole.push(t)}discardCards(){this.extraCard?(this.game.discardPile=this.game.discardPile.concat(this.hole.filter(t=>t!==this.extraCard)),this.hole=[this.extraCard],this.extraCard=null):(this.game.discardPile=this.game.discardPile.concat(this.hole),this.hole=[])}deal(){switch(this.game.waitingForDealerAction=!1,this.game.round){case 0:return this.game.start();case 1:return this.game.flop();case 2:return this.game.turn();case 3:return this.game.river();case 4:return this.game.reveal();case 5:return this.game.dividePot()}}getMaxValidBet(){let t=this.game.players.filter(t=>t.inCurrentHand&&t!==this).reduce((t,e)=>Math.max(t,e.character.cents-e.currentBet),0);return Math.min(this.character.cents-this.currentBet,t)}getMinValidBet(){return Math.min(this.game.bigBlind,this.character.cents-this.currentBet)}getMaxValidRaise(){let t=this.game.players.filter(t=>t.inCurrentHand&&t!==this).reduce((t,e)=>Math.max(t,e.character.cents-e.currentBet-e.getCallAmount()),0);return Math.min(this.character.cents-this.currentBet-this.getCallAmount(),t)}getMinValidRaise(){return Math.min(this.getCallAmount(),this.character.cents-this.getCallAmount())}bet(t,e=!0){this.currentBet+=t,this.game.lastPlayerToBet=this,e&&this.character.say(`I bet ${E(t)}.`),this.game.resetHasTakenActionSinceLastRaise(),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}call(){this.currentBet+=Math.min(this.game.getHighestBet()-this.currentBet,this.character.cents),this.game.lastPlayerToBet=this,this.game.waitingForActivePlayerAction=!1,this.character.say("I call."),this.hasTakenActionSinceLastRaise=!0}getCallAmount(){return this.game.getHighestBet()-this.currentBet}canReveal(){return this.inCurrentHand&&!this.cardsRevealed&&5==this.game.round}canCheck(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&(this.isAllIn()||this.isMatchingHighestBet())}canBet(){return this.canCheck()&&this.character.cents>this.currentBet}canRaise(){return this.canCall()&&this.character.cents-this.currentBet>this.getCallAmount()}canFold(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&!this.isMatchingHighestBet()&&!this.isAllIn()}canCall(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&!this.isAllIn()&&this.currentBet<this.game.getHighestBet()}fold(){this.inCurrentHand=!1,this.character.say("I fold."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}foldAndKeepBestCard(){this.inCurrentHand=!1,this.character.say("I fold."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1,this.extraCard=this.getBestCard()}check(){this.character.say("Check."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}call(){this.currentBet+=this.getCallAmount(),this.game.lastPlayerToBet=this,this.character.say("I call."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}raise(t){this.currentBet+=this.getCallAmount()+t,this.game.lastPlayerToBet=this,this.character.say(`I raise ${E(t)}.`),this.game.resetHasTakenActionSinceLastRaise(),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}revealCards(){this.cardsRevealed=!0;let t=this.bestHand();this.character.say(`${_.capitalize(t.match)}.`),te(t,this.game.winningHand)<=0&&(this.game.winningHand=t),this.game.waitingForActivePlayerAction=!1,this.hole.length>2&&this.game.players.filter(t=>t!==this).forEach(t=>t.character.onCheated(this.character))}muckCards(){this.cardsMucked=!0,this.character.say("Nothin'.")}muckAndCollect(){this.game.round=6,this.game.players.forEach(t=>t.character.cents-=t.currentBet),this.cardsMucked=!0,this.character.say("I win!"),this.character.cents+=this.game.getPot()}}class ke{constructor(){this.cards=[],[L,z,H,$].forEach(t=>{for(let e=2;e<15;e++)this.cards.push(new xe(e,t))}),this.shuffle()}shuffle(){this.cards=_.shuffle(this.cards)}draw(){return this.cards.pop()}count(){return this.cards.length}returnCards(t){this.cards=this.cards.concat(t)}}class xe{constructor(t,e){this.value=t,this.suit=e}toString(){return`${W(this.value)}${N(this.suit,!1)}`}toRankingString(){return`${W(this.value)}${N(this.suit,!0)}`}getSpokenName(){switch(this.value){case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";case 10:return"ten";case 11:return"jack";case 12:return"queen";case 13:return"king";case 14:return"ace"}}getColor(){return[L,z].includes(this.suit)?"red":"black"}}var Pe=r(6),Ce=r.n(Pe);const Se=Math.floor(27.5),Re=Math.floor(22.5),Te=function(t,e=!1,r=!0){let i=r?"white":"gray";return t.map(t=>`%c{${e?"black":(t=>"red"!=t||r?t:"darkred")(t.getColor())}}%b{${i}}${e?"??":t.toString()}%c{white}%b{black}`).join(" ")+"%c{}"};let Me=new A({width:85,height:55});document.body.appendChild(Me.getContainer());let Ae=new class{constructor(){this.turn=0,this.gameOver=!1,this.characters=[],this.objects=[],this.pokerGames=[],this.projectiles=[],this.guardPosts=[],this.map=new _e(this),this.player=new oe,this.addCharacter(this.player,0,0),this.storeNeedsBullets=!1,this.storeNeedsBuckshot=!1,this.characters.forEach(t=>{t.onGameStart()})}addCharacter(t,e,r){if(!this.getCharacters(e,r).length)return this.characters.push(t),t.x=e,t.y=r,t.game=this,t}removeCharacter(t){t.activePokerPlayerRole&&t.activePokerPlayerRole.game.removePlayer(t.activePokerPlayerRole),_.remove(this.characters,t)}addObject(t,e,r){return this.objects.push(t),t.x=e,t.y=r,t.game=this,t}addPokerGame(t,e){let r=new we(this,t,e);return this.pokerGames.push(r),r}addProjectile(t,e,r,i){this.projectiles.push({ammoType:t,isHit:e,source:r,target:i})}getProjectiles(){let t=[...this.projectiles];return this.projectiles=[],t}getCharacters(t,e){return this.characters.filter(r=>r.x===t&&r.y===e)}getObjects(t,e){return this.objects.filter(r=>r.x===t&&r.y===e)}getPokerGame(t,e){return this.pokerGames.find(r=>r.x===t&&r.y===e)}getCellContents(t,e){return{terrain:this.map.getTile(t,e),characters:this.getCharacters(t,e),objects:this.getObjects(t,e)}}spaceIsPassable(t,e){return!ht[this.getCellContents(t,e).terrain].blocksMove&&(!this.getCharacters(t,e).length&&!this.getObjects(t,e).length)}movePlayer(t,e){let r=this.player.x+t,i=this.player.y+e;return!this.player.activePokerPlayerRole&&(this.spaceIsPassable(r,i)?(this.player.startTurn(),this.player.move(r,i),!0):this.getPokerGame(r,i)?(this.player.startTurn(),this.player.join(this.getPokerGame(r,i)),!0):(this.getObjects(r,i).length,!1))}playerPasses(){return this.player.startTurn(),this.player.wait(),!0}repopulateMap(){let t={"US Marshal":{min:2,max:2,current:0,class:pe,frequency:50,followers:[]},Scoundrel:{min:5,max:10,current:0,class:he,frequency:35,followers:[]},"Lakota Warrior":{min:0,max:1,current:0,frequency:3,class:ve,followers:[ge,ge]},"Lakota Scout":{min:0,max:4,current:0,frequency:7,class:ge,followers:[ge]}};this.characters.forEach(e=>t[e.profession]&&t[e.profession].current++);let e=e=>{let r=t[e],i=_.sample([-25,25]),n=_.sample([-25,25]);this.addCharacter(new r.class,i,n);let s=r.followers;s.length>=2&&this.addCharacter(new s[1],i+2,n),s.length>=1&&this.addCharacter(new s[0],i-2,n)};for(let r of Object.keys(t)){let i=t[r];if(i.current<i.min)return void e(r)}for(let r of Object.keys(t)){let i=t[r];if(i.current<i.max&&_.random(1,100)<=i.frequency)return void e(r)}}playTurn(){this.turn++,this.turn%50==0&&this.repopulateMap(),this.characters.forEach(t=>{t.isNPC&&t.takeTurn()}),this.pokerGames.forEach(t=>{t.tick()}),this.characters.forEach(t=>{t.onTurnEnd()})}isSpaceBlocked(t,e){return!!ht[this.map.getTile(t,e)].blocksMove||!!this.getCharacters(t,e).length}},Be=new class{constructor(t,e){this.game=t,this.display=e,this.mouseCoords=[0,0],this.cursorCoords=[0,0],this.showCursor=!1,this.showInventory=!1,this.inventoryCursor=0,this.showPokerView=!1,this.tempBetValue=0,this.tempRaiseValue=0,this.messageLog=[]}log(t){this.messageLog.unshift(t),this.messageLog.length>10&&this.messageLog.pop(),console.log(t)}clearControls(){this.showCursor=!1,this.showInventory=!1,this.showPokerView=!1}toggleInventory(){this.showInventory=!this.showInventory,this.showInventory&&(this.showPokerView=!1)}togglePokerView(){this.showPokerView=!this.showPokerView,this.game.player.activePokerPlayerRole||(this.showPokerView=!1),this.showPokerView&&(this.showInventory=!1)}moveCursor(t,e){this.cursorCoords=[this.cursorCoords[0]+t,this.cursorCoords[1]+e]}moveInventoryCursor(t){this.inventoryCursor+=t,this.inventoryCursor>=this.game.player.inventory.length&&(this.inventoryCursor=0),this.inventoryCursor<0&&(this.inventoryCursor=this.game.player.inventory.length-1)}isMapSpaceInView(t){let{x:e,y:r}=this.mapCoordsToDisplayCoords(t);return!(e<0||r<0||e>=55||r>=45)}cycleTargets(){if(this.showCursor){let t=this.game.characters.filter(t=>t.isNPC&&this.isMapSpaceInView(t)).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player)),e=this.getMapCursorCoords(),r=this.game.getCharacters(e.x,e.y);if(r.length){let e=t[t.indexOf(r[0])+1];e||(e=t[0]),this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:e.x,y:e.y}))}else t.length&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}else{let t=this.game.characters.filter(t=>t.isNPC).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player));t&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}this.showCursor=!0}updateMouseCoords(t){let e=t[0]!==this.mouseCoords[0]||t[1]!==this.mouseCoords[1];return e&&(this.mouseCoords=t,this.cursorCoords=t),e}getDisplayCursorCoords(){return{x:this.cursorCoords[0],y:this.cursorCoords[1]}}getMapCursorCoords(){return this.displayCoordsToMapCoords(this.getDisplayCursorCoords())}getDisplayMouseCoords(){return{x:this.mouseCoords[0],y:this.mouseCoords[1]}}getMapMouseCoords(){return this.displayCoordsToMapCoords(this.getDisplayMouseCoords())}displayCoordsToMapCoords(t){return{x:t.x+this.game.player.x-Se,y:t.y+this.game.player.y-Re}}mapCoordsToDisplayCoords(t){return{x:t.x-this.game.player.x+Se,y:t.y-this.game.player.y+Re}}coordsToArray(t){return[t.x,t.y]}drawCursor(){if(!this.showCursor)return;let{x:t,y:e}=this.getDisplayCursorCoords();this.display.draw(t,e,"X","red","black");let r=this.getMapCursorCoords(),i=this.game.map.firstInterposingObstacleBetween(this.game.player,r);if(i){let t=this.mapCoordsToDisplayCoords(i),e=this.mapCoordsToDisplayCoords(this.game.player);Ce()(e.x,e.y,t.x,t.y).slice(1).forEach(t=>{this.display.draw(t.x,t.y,"•","red","black")}),this.display.draw(t.x,t.y,"X","red","black")}}drawMap(){for(let t=-Se;t<Se+!0;t++)for(let e=-Re;e<Re+!0;e++){let r=t+Se,i=e+Re,{x:n,y:s}=this.displayCoordsToMapCoords({x:r,y:i}),a=this.game.getCellContents(n,s),o=ht[a.terrain];if(this.display.draw(r,i,gt.a.sample(o.symbols),o.fore,o.back),a.characters.length){let t=a.characters[0].getDisplayChar();this.display.draw(r,i,t.symbol,t.color,o.back)}else if(a.objects.length){let t=a.objects[0].getDisplayChar();this.display.draw(r,i,t.symbol,t.color,o.back)}}for(let t=-Se;t<Se+!0;t++)for(let e=-Re;e<Re+!0;e++){let r=t+Se,i=e+Re,{x:n,y:s}=this.displayCoordsToMapCoords({x:r,y:i}),a=this.game.getCellContents(n,s),o=ht[a.terrain];if(a.characters.length&&a.characters[0].bodyCarried){let t=this.mapCoordsToDisplayCoords(a.characters[0].previousSpace);this.display.draw(t.x,t.y,"&","white",o.back)}}this.game.player.activePokerPlayerRole||(this.showPokerView=!1),this.showInventory?(this.clearSidebar(),this.drawInventory()):this.showPokerView?(this.clearSidebar(),this.drawPokerSidebar()):(this.clearSidebar(),this.drawSidebar()),this.drawUtterances(),this.drawOverlay(),this.drawCursor()}drawMessageLog(){for(let t=0;t<85;t++)for(let e=0;e<10;e++)this.display.draw(t,e+45," ");this.messageLog.forEach((t,e)=>{this.display.drawText(0,45+e,t)})}drawUtterances(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);(e.length?e:this.game.characters).forEach(t=>{if(t.utterance){let e=this.mapCoordsToDisplayCoords({x:t.x,y:t.y});e.x<55&&(this.display.draw(e.x+1,e.y-1,"/","black","white"),this.display.drawText(e.x,e.y-2,"%c{black}%b{white}"+t.utterance))}})}clearSidebar(){for(let t=0;t<30;t++)for(let e=0;e<45;e++)this.display.draw(55+t,e," ")}getKeyboardCommands(){if(this.game.gameOver)return[];let t=this.game.player,e=[];if(e.push({key:"TAB",description:"select target"}),e.push({key:"SPACE",description:"wait"}),this.showInventory?e.push({key:"ESC",description:"hide inventory"}):this.showPokerView?e.push({key:"ESC",description:"hide poker"}):this.showCursor&&e.push({key:"ESC",description:"hide cursor"}),e.push({key:"I",description:this.showInventory?"hide inventory":"show inventory"}),t.canReload()&&e.push({key:"R",description:"reload "+t.getCurrentWeapon().name}),this.showInventory){let r=t.inventory[this.inventoryCursor];r&&r.isWeapon&&(r!==t.getCurrentWeapon()?e.push({key:"E",description:"equip "+r.name}):e.push({key:"E",description:"unequip "+r.name}))}let r=this.game.player.activePokerPlayerRole;if(r){if(r&&e.push({key:"Q",description:"quit poker game"}),e.push({key:"P",description:this.showPokerView?"hide poker":"show poker"}),r.isActivePlayer()){let t=r.getMinValidBet(),i=r.getMaxValidBet(),n=r.getMinValidRaise(),s=r.getMaxValidRaise();this.tempBetValue=Math.max(t,this.tempBetValue),this.tempBetValue=Math.min(i,this.tempBetValue),this.tempRaiseValue=Math.max(n,this.tempRaiseValue),this.tempRaiseValue=Math.min(s,this.tempRaiseValue);let a=this.tempBetValue<i,o=this.tempBetValue>t,l=this.tempRaiseValue<s,h=this.tempRaiseValue>n;r.canReveal()&&e.push({key:"S",description:"show cards"}),r.canFold()&&(e.push({key:"Z",description:"fold and keep "+Te([r.getBestCard()])}),e.push({key:"F",description:"fold"})),r.canCheck()&&e.push({key:"C",description:"check"}),r.canCall()&&e.push({key:"C",description:"call"}),r.canRaise()&&(e.push({key:"R",description:`raise  ${E(this.tempRaiseValue)}`}),l&&h?e.push({key:"+/-",description:"increase/decrease raise"}):l?e.push({key:"+",description:"increase raise"}):h&&e.push({key:"-",description:"decrease raise"})),r.canBet()&&(e.push({key:"B",description:`bet ${E(this.tempBetValue)}`}),a&&o?e.push({key:"+/-",description:"increase/decrease bet"}):a?e.push({key:"+",description:"increase bet"}):o&&e.push({key:"-",description:"decrease bet"}))}r&&r.isDealer()&&r.game.waitingForDealerAction&&e.push({key:"D",description:"deal"})}let i=this.getTarget();i&&t.canAttack(i)&&e.push({key:"A",description:`attack with ${t.getCurrentWeapon().name}`});let n=0,s=[];for(let e of t.getAllowedInteractions())n+=1,s.push({key:n.toString(),description:e.text});return e=e.concat(s.reverse()),e}drawAvailableCommands(){this.getKeyboardCommands().forEach((t,e)=>{this.drawSidebarRow(44-e,t.key+":",t.description)})}drawSidebar(){let t=this.game.player;this.drawSidebarRow(0,t.name),this.drawSidebarRow(2,"Health:",`${t.health}/${t.getMaxHealth()}`),this.drawSidebarRow(3,"Vigilance:",`${t.vigilance}/${t.getMaxVigilance()}`),this.drawSidebarRow(4,"Subterfuge:",`${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.drawSidebarRow(5,"Money:",E(t.cents)),this.drawSidebarRow(7,"Level "+t.level,`${t.xp}/${ct[t.level+1]} xp`),this.drawSidebarRow(8,"Strength",t.strength),this.drawSidebarRow(9,"Quickness",t.quickness),this.drawSidebarRow(10,"Cunning",t.cunning),this.drawSidebarRow(11,"Guile",t.guile),this.drawSidebarRow(12,"Grit",t.grit);let e=t.getCurrentWeapon();this.drawWeaponSidebarRow(14,e),this.drawWeaponStatblock(15,e),this.drawAvailableCommands()}drawWeaponSidebarRow(t,e,r=!1){let i=e.isMelee?"[∞]":`[${e.currentAmmo}/${e.capacity}]`;this.drawSidebarRow(t,gt.a.capitalize(e.name),i,r)}drawCardSidebarRow(t,e,r,i,n=!0,s=""){this.display.drawText(56,t,`${e} ${Te(r,i,n)}${s}`)}drawSidebarRow(t,e="",r="",i){let n=30-String(e).length-String(r).length-2;this.display.drawText(56,t,(i?"%c{white}":"")+String(e)+gt.a.repeat(" ",n)+String(r))}drawWeaponStatblock(t,e){let r=this.game.player.getDamageWithWeapon(e);this.drawSidebarRow(t,e.description),this.drawSidebarRow(t+1,"Draw delay:",`${e.drawDelay}`),this.drawSidebarRow(t+2,"Damage:",r.min===r.max?r.min:`${r.min}-${r.max}`),this.drawSidebarRow(t+3,"Range:",e.isMelee?"Melee":`[${[e.rangeModifiers[F],e.rangeModifiers[V],e.rangeModifiers[U],e.rangeModifiers[q]].join("/")}]`)}drawInventory(){let t=this.game.player;this.drawSidebarRow(0,"Inventory"),this.drawSidebarRow(2,"Wielding:"),this.drawWeaponSidebarRow(3,t.getCurrentWeapon()),this.drawSidebarRow(5,"Money:",E(t.cents)),this.drawSidebarRow(6,"Bullets:",t.bullets),this.drawSidebarRow(7,"Buckshot:",t.buckshot),this.drawSidebarRow(8,"Arrows:",t.arrows);let e=t.inventory[this.inventoryCursor];e&&(e.isWeapon?(this.drawWeaponSidebarRow(10,e,!0),this.drawWeaponStatblock(11,e)):(this.drawSidebarRow(10,gt.a.capitalize(e.name),"",!0),this.drawSidebarRow(11,e.description)));t.inventory.forEach((t,r)=>{t.isWeapon?this.drawWeaponSidebarRow(16+r,t,t===e):this.drawSidebarRow(16+r,gt.a.capitalize(t.name),"",t===e)}),this.drawAvailableCommands()}drawPokerPlayerStatblock(t,e){let r="";e.game.dealer===e&&(r=" (dealer)");let i=e.character.isPC||e.cardsRevealed,n="";i&&e.hole.length>=2&&(n=` (${e.bestHand().match})`);let s="";console.log(e),e.isActivePlayer()&&6!=e.game.round&&0!=e.game.round&&(s="%c{white}"),this.drawSidebarRow(t+0,s+e.character.name+r),this.drawSidebarRow(t+1,"Cash:",E(e.character.cents)),this.drawSidebarRow(t+2,"Current bet:",E(e.currentBet)),this.drawCardSidebarRow(t+3,"Cards:",e.hole,!i,e.inCurrentHand,n)}drawPokerSidebar(){let t=this.game.player.activePokerPlayerRole.game;this.drawSidebarRow(0,"Poker Game"),this.drawSidebarRow(2,"Blinds:",`${E(t.smallBlind)}/${E(t.bigBlind)}`),this.drawSidebarRow(3,"Pot:",`${E(t.getPot())}`),this.drawCardSidebarRow(4,"Common:",t.communityCards),t.getPlayersInOrder().forEach((t,e)=>{this.drawPokerPlayerStatblock(6+5*e,t)}),this.drawAvailableCommands()}drawOverlay(){this.drawTooltip()}drawMuzzleFlash(){let t=!1;return this.game.getProjectiles().forEach(e=>{let r=Ce()(e.source.x,e.source.y,e.target.x,e.target.y);r="bullets"===e.ammoType?r.slice(1,2):"buckshot"===e.ammoType?r.slice(1,3):[],r.forEach(e=>{let{x:r,y:i}=this.mapCoordsToDisplayCoords(e);this.display.draw(r,i,"*","orange","white"),t=!0})}),t}getTarget(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);return e.length?e[0]:null}drawTooltip(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.showCursor?this.getDisplayCursorCoords():this.getDisplayMouseCoords(),r=this.game.getCharacters(t.x,t.y);if(r.length){let t=r[0];if(this.display.drawText(e.x+2,e.y+0,t.name),this.display.drawText(e.x+2,e.y+1,t.profession),this.display.drawText(e.x+2,e.y+2,`Health: ${t.health}/${t.getMaxHealth()}`),this.display.drawText(e.x+2,e.y+3,`Vigilance: ${t.vigilance}/${t.getMaxVigilance()}`),this.display.drawText(e.x+2,e.y+4,`Subterfuge: ${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.display.drawText(e.x+2,e.y+5,`Money: ${E(t.cents)}`),t.activePokerPlayerRole){this.display.drawText(e.x+2,e.y+6,`Current bet: ${E(t.activePokerPlayerRole.currentBet)}`);let r=t.isPC||t.activePokerPlayerRole.cardsRevealed;this.display.drawText(e.x+2,e.y+7,`Cards: ${Te(t.activePokerPlayerRole.hole,!r)}`)}}let i=this.game.getPokerGame(t.x,t.y);i&&(this.display.drawText(e.x+2,e.y,"Poker Game"),this.display.drawText(e.x+2,e.y+1,`Blinds: ${E(i.smallBlind)}/${E(i.bigBlind)}`),this.display.drawText(e.x+2,e.y+2,`Pot: ${E(i.getPot())}`),this.display.drawText(e.x+2,e.y+3,`Common: ${Te(i.communityCards)}`),i.unclaimedMoneyOnTable)}}(Ae,Me);Ae.log=Be.log.bind(Be);let Oe=new class{constructor(t,e){this.game=t,this.view=e}handleEvent(t){switch(t.type){case"mousemove":return this.handleMouseMove(t);case"click":return this.handleMouseClick(t);case"keydown":return this.handleKeyDown(t)}}movePlayerOrCursor(t,e){if(this.view.showInventory&&0===t)this.view.moveInventoryCursor(e);else{if(!this.view.showCursor){let r=this.game.movePlayer(t,e);return r&&this.game.player.activePokerPlayerRole&&!this.view.showPokerView&&this.view.togglePokerView(),r}this.view.moveCursor(t,e)}}handleKeyDown(t){console.log(t.keyCode);let e=this.game.player,r=!1;if(!this.game.gameOver)switch(t.keyCode){case 32:this.game.playerPasses(),r=!0;break;case 33:r=this.movePlayerOrCursor(1,-1);break;case 34:r=this.movePlayerOrCursor(1,1);break;case 35:r=this.movePlayerOrCursor(-1,1);break;case 36:r=this.movePlayerOrCursor(-1,-1);break;case 37:r=this.movePlayerOrCursor(-1,0);break;case 38:r=this.movePlayerOrCursor(0,-1);break;case 39:r=this.movePlayerOrCursor(1,0);break;case 40:r=this.movePlayerOrCursor(0,1);break;case 27:this.view.clearControls();break;case 9:t.preventDefault(),this.view.cycleTargets();break;case 73:this.view.toggleInventory();break;case 80:this.view.togglePokerView();break;case 67:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCheck()?(e.activePokerPlayerRole.check(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0):e.activePokerPlayerRole&&e.activePokerPlayerRole.canCall()&&(e.activePokerPlayerRole.call(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 65:let i=this.view.getTarget();i&&e.canAttack(i)&&(e.attack(this.view.getTarget()),r=!0);break;case 66:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()&&(e.activePokerPlayerRole.bet(this.view.tempBetValue),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 70:e.activePokerPlayerRole&&e.activePokerPlayerRole.canFold()&&(e.activePokerPlayerRole.fold(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 83:e.activePokerPlayerRole&&e.activePokerPlayerRole.canReveal()&&(e.activePokerPlayerRole.revealCards(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 68:e.activePokerPlayerRole&&e.activePokerPlayerRole.isDealer()&&e.activePokerPlayerRole.game.waitingForDealerAction&&(e.activePokerPlayerRole.deal(),r=!0);break;case 81:e.activePokerPlayerRole&&(e.activePokerPlayerRole.game.removePlayer(e.activePokerPlayerRole),this.view.showPokerView=!1);break;case 189:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()?this.view.tempBetValue-=100:e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(this.view.tempRaiseValue-=100);break;case 187:e.activePokerPlayerRole&&e.activePokerPlayerRole.canBet()?this.view.tempBetValue+=100:e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(this.view.tempRaiseValue+=100);break;case 69:if(this.view.showInventory){let t=e.inventory[this.view.inventoryCursor];t&&t.isWeapon&&(t!==e.getCurrentWeapon()?(e.equip(t),r=!0):(e.unequip(),r=!0))}break;case 82:e.canReload()?(e.reload(),r=!0):e.activePokerPlayerRole&&e.activePokerPlayerRole.canRaise()&&(e.activePokerPlayerRole.raise(this.view.tempRaiseValue),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 90:e.activePokerPlayerRole&&e.activePokerPlayerRole.canFold()&&(e.activePokerPlayerRole.foldAndKeepBestCard(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 49:e.getAllowedInteractions().length>=1&&e.getAllowedInteractions()[0].onInteract(e);break;case 50:e.getAllowedInteractions().length>=2&&e.getAllowedInteractions()[1].onInteract(e);break;case 51:e.getAllowedInteractions().length>=3&&e.getAllowedInteractions()[2].onInteract(e);break;case 52:e.getAllowedInteractions().length>=4&&e.getAllowedInteractions()[3].onInteract(e);break;case 53:e.getAllowedInteractions().length>=5&&e.getAllowedInteractions()[4].onInteract(e);break;case 54:e.getAllowedInteractions().length>=6&&e.getAllowedInteractions()[5].onInteract(e);break;case 55:e.getAllowedInteractions().length>=7&&e.getAllowedInteractions()[6].onInteract(e);break;case 56:e.getAllowedInteractions().length>=8&&e.getAllowedInteractions()[7].onInteract(e);break;case 57:e.getAllowedInteractions().length>=9&&e.getAllowedInteractions()[9].onInteract(e)}r&&this.game.playTurn(),this.view.drawMessageLog(),this.view.drawMap(),this.view.drawOverlay(),this.view.drawMuzzleFlash()&&setTimeout(()=>this.view.drawMap(),50)}handleMouseMove(t){let e=this.view.display.eventToPosition(t);this.view.updateMouseCoords(e)&&this.view.drawMap()}handleMouseClick(t){this.view.display.eventToPosition(t)}}(Ae,Be);window.addEventListener("keydown",Oe),window.addEventListener("mousemove",Oe),window.addEventListener("click",Oe);let Ie=()=>{Be.drawMap(),setTimeout(Ie,900)};Ie()}]);
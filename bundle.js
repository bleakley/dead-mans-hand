!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=12)}([function(t,e,r){"use strict";const n=2.3283064365386963e-10;class i{constructor(){this._seed=0,this._s0=0,this._s1=0,this._s2=0,this._c=0}getSeed(){return this._seed}setSeed(t){return t=t<1?1/t:t,this._seed=t,this._s0=(t>>>0)*n,t=69069*t+1>>>0,this._s1=t*n,t=69069*t+1>>>0,this._s2=t*n,this._c=1,this}getUniform(){let t=2091639*this._s0+this._c*n;return this._s0=this._s1,this._s1=this._s2,this._c=0|t,this._s2=t-this._c,this._s2}getUniformInt(t,e){let r=Math.max(t,e),n=Math.min(t,e);return Math.floor(this.getUniform()*(r-n+1))+n}getNormal(t=0,e=1){let r,n,i;do{r=2*this.getUniform()-1,n=2*this.getUniform()-1,i=r*r+n*n}while(i>1||0==i);return t+r*Math.sqrt(-2*Math.log(i)/i)*e}getPercentage(){return 1+Math.floor(100*this.getUniform())}getItem(t){return t.length?t[Math.floor(this.getUniform()*t.length)]:null}shuffle(t){let e=[],r=t.slice();for(;r.length;){let t=r.indexOf(this.getItem(r));e.push(r.splice(t,1)[0])}return e}getWeightedValue(t){let e=0;for(let r in t)e+=t[r];let r,n=this.getUniform()*e,i=0;for(r in t)if(i+=t[r],n<i)return r;return r}getState(){return[this._s0,this._s1,this._s2,this._c]}setState(t){return this._s0=t[0],this._s1=t[1],this._s2=t[2],this._c=t[3],this}clone(){return(new i).setState(this.getState())}}e.a=(new i).setSeed(Date.now())},function(t,e,r){"use strict";function n(t,e){return(t%e+e)%e}function i(t,e=0,r=1){return t<e?e:t>r?r:t}function a(t){return t.charAt(0).toUpperCase()+t.substring(1)}function o(t,...e){let r=o.map;return t.replace(/%(?:([a-z]+)|(?:{([^}]+)}))/gi,(function(n,i,o,s){if("%"==t.charAt(s-1))return n.substring(1);if(!e.length)return n;let u=e[0],l=(i||o).split(","),c=l.shift()||"",h=r[c.toLowerCase()];if(!h)return n;u=e.shift();let f=u[h].apply(u,l),d=c.charAt(0);return d!=d.toLowerCase()&&(f=a(f)),f}))}r.r(e),r.d(e,"mod",(function(){return n})),r.d(e,"clamp",(function(){return i})),r.d(e,"capitalize",(function(){return a})),r.d(e,"format",(function(){return o})),o.map={s:"toString"}},function(t,e,r){(function(t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var a="Expected a function",o="__lodash_placeholder__",s=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",l="[object Array]",c="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",v="[object Number]",m="[object Object]",y="[object RegExp]",_="[object Set]",w="[object String]",b="[object Symbol]",k="[object WeakMap]",x="[object ArrayBuffer]",C="[object DataView]",P="[object Float32Array]",S="[object Float64Array]",T="[object Int8Array]",R="[object Int16Array]",M="[object Int32Array]",A="[object Uint8Array]",E="[object Uint16Array]",O="[object Uint32Array]",I=/\b__p \+= '';/g,B=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,$=RegExp(j.source),z=RegExp(D.source),L=/<%-([\s\S]+?)%>/g,H=/<%([\s\S]+?)%>/g,N=/<%=([\s\S]+?)%>/g,F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q=/[\\^$.*+?()[\]{}|]/g,X=RegExp(q.source),G=/^\s+|\s+$/g,Y=/^\s+/,J=/\s+$/,K=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Z=/\{\n\/\* \[wrapped with (.+)\] \*/,Q=/,? & /,tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,et=/\\(\\)?/g,rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,ot=/^\[object .+?Constructor\]$/,st=/^0o[0-7]+$/i,ut=/^(?:0|[1-9]\d*)$/,lt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ct=/($^)/,ht=/['\n\r\u2028\u2029\\]/g,ft="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pt="[\\ud800-\\udfff]",gt="["+dt+"]",vt="["+ft+"]",mt="\\d+",yt="[\\u2700-\\u27bf]",_t="[a-z\\xdf-\\xf6\\xf8-\\xff]",wt="[^\\ud800-\\udfff"+dt+mt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",bt="\\ud83c[\\udffb-\\udfff]",kt="[^\\ud800-\\udfff]",xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Pt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",St="(?:"+_t+"|"+wt+")",Tt="(?:"+Pt+"|"+wt+")",Rt="(?:"+vt+"|"+bt+")"+"?",Mt="[\\ufe0e\\ufe0f]?"+Rt+("(?:\\u200d(?:"+[kt,xt,Ct].join("|")+")[\\ufe0e\\ufe0f]?"+Rt+")*"),At="(?:"+[yt,xt,Ct].join("|")+")"+Mt,Et="(?:"+[kt+vt+"?",vt,xt,Ct,pt].join("|")+")",Ot=RegExp("['’]","g"),It=RegExp(vt,"g"),Bt=RegExp(bt+"(?="+bt+")|"+Et+Mt,"g"),Wt=RegExp([Pt+"?"+_t+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[gt,Pt,"$"].join("|")+")",Tt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[gt,Pt+St,"$"].join("|")+")",Pt+"?"+St+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Pt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mt,At].join("|"),"g"),jt=RegExp("[\\u200d\\ud800-\\udfff"+ft+"\\ufe0e\\ufe0f]"),Dt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zt=-1,Lt={};Lt[P]=Lt[S]=Lt[T]=Lt[R]=Lt[M]=Lt[A]=Lt["[object Uint8ClampedArray]"]=Lt[E]=Lt[O]=!0,Lt[u]=Lt[l]=Lt[x]=Lt[c]=Lt[C]=Lt[h]=Lt[f]=Lt[d]=Lt[g]=Lt[v]=Lt[m]=Lt[y]=Lt[_]=Lt[w]=Lt[k]=!1;var Ht={};Ht[u]=Ht[l]=Ht[x]=Ht[C]=Ht[c]=Ht[h]=Ht[P]=Ht[S]=Ht[T]=Ht[R]=Ht[M]=Ht[g]=Ht[v]=Ht[m]=Ht[y]=Ht[_]=Ht[w]=Ht[b]=Ht[A]=Ht["[object Uint8ClampedArray]"]=Ht[E]=Ht[O]=!0,Ht[f]=Ht[d]=Ht[k]=!1;var Nt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ft=parseFloat,Ut=parseInt,Vt="object"==typeof t&&t&&t.Object===Object&&t,qt="object"==typeof self&&self&&self.Object===Object&&self,Xt=Vt||qt||Function("return this")(),Gt=e&&!e.nodeType&&e,Yt=Gt&&"object"==typeof n&&n&&!n.nodeType&&n,Jt=Yt&&Yt.exports===Gt,Kt=Jt&&Vt.process,Zt=function(){try{var t=Yt&&Yt.require&&Yt.require("util").types;return t||Kt&&Kt.binding&&Kt.binding("util")}catch(t){}}(),Qt=Zt&&Zt.isArrayBuffer,te=Zt&&Zt.isDate,ee=Zt&&Zt.isMap,re=Zt&&Zt.isRegExp,ne=Zt&&Zt.isSet,ie=Zt&&Zt.isTypedArray;function ae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function oe(t,e,r,n){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(n,o,r(o),t)}return n}function se(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}function ue(t,e){for(var r=null==t?0:t.length;r--&&!1!==e(t[r],r,t););return t}function le(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function ce(t,e){for(var r=-1,n=null==t?0:t.length,i=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[i++]=o)}return a}function he(t,e){return!!(null==t?0:t.length)&&be(t,e,0)>-1}function fe(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}function de(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function ge(t,e,r,n){var i=-1,a=null==t?0:t.length;for(n&&a&&(r=t[++i]);++i<a;)r=e(r,t[i],i,t);return r}function ve(t,e,r,n){var i=null==t?0:t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function me(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var ye=Pe("length");function _e(t,e,r){var n;return r(t,(function(t,r,i){if(e(t,r,i))return n=r,!1})),n}function we(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function be(t,e,r){return e==e?function(t,e,r){var n=r-1,i=t.length;for(;++n<i;)if(t[n]===e)return n;return-1}(t,e,r):we(t,xe,r)}function ke(t,e,r,n){for(var i=r-1,a=t.length;++i<a;)if(n(t[i],e))return i;return-1}function xe(t){return t!=t}function Ce(t,e){var r=null==t?0:t.length;return r?Re(t,e)/r:NaN}function Pe(t){return function(e){return null==e?void 0:e[t]}}function Se(t){return function(e){return null==t?void 0:t[e]}}function Te(t,e,r,n,i){return i(t,(function(t,i,a){r=n?(n=!1,t):e(r,t,i,a)})),r}function Re(t,e){for(var r,n=-1,i=t.length;++n<i;){var a=e(t[n]);void 0!==a&&(r=void 0===r?a:r+a)}return r}function Me(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Ae(t){return function(e){return t(e)}}function Ee(t,e){return de(e,(function(e){return t[e]}))}function Oe(t,e){return t.has(e)}function Ie(t,e){for(var r=-1,n=t.length;++r<n&&be(e,t[r],0)>-1;);return r}function Be(t,e){for(var r=t.length;r--&&be(e,t[r],0)>-1;);return r}function We(t,e){for(var r=t.length,n=0;r--;)t[r]===e&&++n;return n}var je=Se({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),De=Se({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $e(t){return"\\"+Nt[t]}function ze(t){return jt.test(t)}function Le(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}function He(t,e){return function(r){return t(e(r))}}function Ne(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var s=t[r];s!==e&&s!==o||(t[r]=o,a[i++]=r)}return a}function Fe(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}function Ue(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=[t,t]})),r}function Ve(t){return ze(t)?function(t){var e=Bt.lastIndex=0;for(;Bt.test(t);)++e;return e}(t):ye(t)}function qe(t){return ze(t)?function(t){return t.match(Bt)||[]}(t):function(t){return t.split("")}(t)}var Xe=Se({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Ge=function t(e){var r,n=(e=null==e?Xt:Ge.defaults(Xt.Object(),e,Ge.pick(Xt,$t))).Array,i=e.Date,ft=e.Error,dt=e.Function,pt=e.Math,gt=e.Object,vt=e.RegExp,mt=e.String,yt=e.TypeError,_t=n.prototype,wt=dt.prototype,bt=gt.prototype,kt=e["__core-js_shared__"],xt=wt.toString,Ct=bt.hasOwnProperty,Pt=0,St=(r=/[^.]+$/.exec(kt&&kt.keys&&kt.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Tt=bt.toString,Rt=xt.call(gt),Mt=Xt._,At=vt("^"+xt.call(Ct).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=Jt?e.Buffer:void 0,Bt=e.Symbol,jt=e.Uint8Array,Nt=Et?Et.allocUnsafe:void 0,Vt=He(gt.getPrototypeOf,gt),qt=gt.create,Gt=bt.propertyIsEnumerable,Yt=_t.splice,Kt=Bt?Bt.isConcatSpreadable:void 0,Zt=Bt?Bt.iterator:void 0,ye=Bt?Bt.toStringTag:void 0,Se=function(){try{var t=Qi(gt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ye=e.clearTimeout!==Xt.clearTimeout&&e.clearTimeout,Je=i&&i.now!==Xt.Date.now&&i.now,Ke=e.setTimeout!==Xt.setTimeout&&e.setTimeout,Ze=pt.ceil,Qe=pt.floor,tr=gt.getOwnPropertySymbols,er=Et?Et.isBuffer:void 0,rr=e.isFinite,nr=_t.join,ir=He(gt.keys,gt),ar=pt.max,or=pt.min,sr=i.now,ur=e.parseInt,lr=pt.random,cr=_t.reverse,hr=Qi(e,"DataView"),fr=Qi(e,"Map"),dr=Qi(e,"Promise"),pr=Qi(e,"Set"),gr=Qi(e,"WeakMap"),vr=Qi(gt,"create"),mr=gr&&new gr,yr={},_r=Sa(hr),wr=Sa(fr),br=Sa(dr),kr=Sa(pr),xr=Sa(gr),Cr=Bt?Bt.prototype:void 0,Pr=Cr?Cr.valueOf:void 0,Sr=Cr?Cr.toString:void 0;function Tr(t){if(Uo(t)&&!Io(t)&&!(t instanceof Er)){if(t instanceof Ar)return t;if(Ct.call(t,"__wrapped__"))return Ta(t)}return new Ar(t)}var Rr=function(){function t(){}return function(e){if(!Fo(e))return{};if(qt)return qt(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Mr(){}function Ar(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Er(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Or(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Br(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Wr(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Br;++e<r;)this.add(t[e])}function jr(t){var e=this.__data__=new Ir(t);this.size=e.size}function Dr(t,e){var r=Io(t),n=!r&&Oo(t),i=!r&&!n&&Do(t),a=!r&&!n&&!i&&Zo(t),o=r||n||i||a,s=o?Me(t.length,mt):[],u=s.length;for(var l in t)!e&&!Ct.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||oa(l,u))||s.push(l);return s}function $r(t){var e=t.length;return e?t[jn(0,e-1)]:void 0}function zr(t,e){return xa(mi(t),Gr(e,0,t.length))}function Lr(t){return xa(mi(t))}function Hr(t,e,r){(void 0===r||Mo(t[e],r))&&(void 0!==r||e in t)||qr(t,e,r)}function Nr(t,e,r){var n=t[e];Ct.call(t,e)&&Mo(n,r)&&(void 0!==r||e in t)||qr(t,e,r)}function Fr(t,e){for(var r=t.length;r--;)if(Mo(t[r][0],e))return r;return-1}function Ur(t,e,r,n){return Qr(t,(function(t,i,a){e(n,t,r(t),a)})),n}function Vr(t,e){return t&&yi(e,ws(e),t)}function qr(t,e,r){"__proto__"==e&&Se?Se(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Xr(t,e){for(var r=-1,i=e.length,a=n(i),o=null==t;++r<i;)a[r]=o?void 0:gs(t,e[r]);return a}function Gr(t,e,r){return t==t&&(void 0!==r&&(t=t<=r?t:r),void 0!==e&&(t=t>=e?t:e)),t}function Yr(t,e,r,n,i,a){var o,s=1&e,l=2&e,f=4&e;if(r&&(o=i?r(t,n,i,a):r(t)),void 0!==o)return o;if(!Fo(t))return t;var k=Io(t);if(k){if(o=function(t){var e=t.length,r=new t.constructor(e);e&&"string"==typeof t[0]&&Ct.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!s)return mi(t,o)}else{var I=ra(t),B=I==d||I==p;if(Do(t))return hi(t,s);if(I==m||I==u||B&&!i){if(o=l||B?{}:ia(t),!s)return l?function(t,e){return yi(t,ea(t),e)}(t,function(t,e){return t&&yi(e,bs(e),t)}(o,t)):function(t,e){return yi(t,ta(t),e)}(t,Vr(o,t))}else{if(!Ht[I])return i?t:{};o=function(t,e,r){var n=t.constructor;switch(e){case x:return fi(t);case c:case h:return new n(+t);case C:return function(t,e){var r=e?fi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case P:case S:case T:case R:case M:case A:case"[object Uint8ClampedArray]":case E:case O:return di(t,r);case g:return new n;case v:case w:return new n(t);case y:return function(t){var e=new t.constructor(t.source,nt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case _:return new n;case b:return i=t,Pr?gt(Pr.call(i)):{}}var i}(t,I,s)}}a||(a=new jr);var W=a.get(t);if(W)return W;a.set(t,o),Yo(t)?t.forEach((function(n){o.add(Yr(n,e,r,n,t,a))})):Vo(t)&&t.forEach((function(n,i){o.set(i,Yr(n,e,r,i,t,a))}));var j=k?void 0:(f?l?qi:Vi:l?bs:ws)(t);return se(j||t,(function(n,i){j&&(n=t[i=n]),Nr(o,i,Yr(n,e,r,i,t,a))})),o}function Jr(t,e,r){var n=r.length;if(null==t)return!n;for(t=gt(t);n--;){var i=r[n],a=e[i],o=t[i];if(void 0===o&&!(i in t)||!a(o))return!1}return!0}function Kr(t,e,r){if("function"!=typeof t)throw new yt(a);return _a((function(){t.apply(void 0,r)}),e)}function Zr(t,e,r,n){var i=-1,a=he,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;r&&(e=de(e,Ae(r))),n?(a=fe,o=!1):e.length>=200&&(a=Oe,o=!1,e=new Wr(e));t:for(;++i<s;){var c=t[i],h=null==r?c:r(c);if(c=n||0!==c?c:0,o&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else a(e,h,n)||u.push(c)}return u}Tr.templateSettings={escape:L,evaluate:H,interpolate:N,variable:"",imports:{_:Tr}},Tr.prototype=Mr.prototype,Tr.prototype.constructor=Tr,Ar.prototype=Rr(Mr.prototype),Ar.prototype.constructor=Ar,Er.prototype=Rr(Mr.prototype),Er.prototype.constructor=Er,Or.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},Or.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Or.prototype.get=function(t){var e=this.__data__;if(vr){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Ct.call(e,t)?e[t]:void 0},Or.prototype.has=function(t){var e=this.__data__;return vr?void 0!==e[t]:Ct.call(e,t)},Or.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=vr&&void 0===e?"__lodash_hash_undefined__":e,this},Ir.prototype.clear=function(){this.__data__=[],this.size=0},Ir.prototype.delete=function(t){var e=this.__data__,r=Fr(e,t);return!(r<0)&&(r==e.length-1?e.pop():Yt.call(e,r,1),--this.size,!0)},Ir.prototype.get=function(t){var e=this.__data__,r=Fr(e,t);return r<0?void 0:e[r][1]},Ir.prototype.has=function(t){return Fr(this.__data__,t)>-1},Ir.prototype.set=function(t,e){var r=this.__data__,n=Fr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Br.prototype.clear=function(){this.size=0,this.__data__={hash:new Or,map:new(fr||Ir),string:new Or}},Br.prototype.delete=function(t){var e=Ki(this,t).delete(t);return this.size-=e?1:0,e},Br.prototype.get=function(t){return Ki(this,t).get(t)},Br.prototype.has=function(t){return Ki(this,t).has(t)},Br.prototype.set=function(t,e){var r=Ki(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Wr.prototype.add=Wr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Wr.prototype.has=function(t){return this.__data__.has(t)},jr.prototype.clear=function(){this.__data__=new Ir,this.size=0},jr.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},jr.prototype.get=function(t){return this.__data__.get(t)},jr.prototype.has=function(t){return this.__data__.has(t)},jr.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Ir){var n=r.__data__;if(!fr||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Br(n)}return r.set(t,e),this.size=r.size,this};var Qr=bi(un),tn=bi(ln,!0);function en(t,e){var r=!0;return Qr(t,(function(t,n,i){return r=!!e(t,n,i)})),r}function rn(t,e,r){for(var n=-1,i=t.length;++n<i;){var a=t[n],o=e(a);if(null!=o&&(void 0===s?o==o&&!Ko(o):r(o,s)))var s=o,u=a}return u}function nn(t,e){var r=[];return Qr(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function an(t,e,r,n,i){var a=-1,o=t.length;for(r||(r=aa),i||(i=[]);++a<o;){var s=t[a];e>0&&r(s)?e>1?an(s,e-1,r,n,i):pe(i,s):n||(i[i.length]=s)}return i}var on=ki(),sn=ki(!0);function un(t,e){return t&&on(t,e,ws)}function ln(t,e){return t&&sn(t,e,ws)}function cn(t,e){return ce(e,(function(e){return Lo(t[e])}))}function hn(t,e){for(var r=0,n=(e=si(e,t)).length;null!=t&&r<n;)t=t[Pa(e[r++])];return r&&r==n?t:void 0}function fn(t,e,r){var n=e(t);return Io(t)?n:pe(n,r(t))}function dn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ye&&ye in gt(t)?function(t){var e=Ct.call(t,ye),r=t[ye];try{t[ye]=void 0;var n=!0}catch(t){}var i=Tt.call(t);n&&(e?t[ye]=r:delete t[ye]);return i}(t):function(t){return Tt.call(t)}(t)}function pn(t,e){return t>e}function gn(t,e){return null!=t&&Ct.call(t,e)}function vn(t,e){return null!=t&&e in gt(t)}function mn(t,e,r){for(var i=r?fe:he,a=t[0].length,o=t.length,s=o,u=n(o),l=1/0,c=[];s--;){var h=t[s];s&&e&&(h=de(h,Ae(e))),l=or(h.length,l),u[s]=!r&&(e||a>=120&&h.length>=120)?new Wr(s&&h):void 0}h=t[0];var f=-1,d=u[0];t:for(;++f<a&&c.length<l;){var p=h[f],g=e?e(p):p;if(p=r||0!==p?p:0,!(d?Oe(d,g):i(c,g,r))){for(s=o;--s;){var v=u[s];if(!(v?Oe(v,g):i(t[s],g,r)))continue t}d&&d.push(g),c.push(p)}}return c}function yn(t,e,r){var n=null==(t=ga(t,e=si(e,t)))?t:t[Pa($a(e))];return null==n?void 0:ae(n,t,r)}function _n(t){return Uo(t)&&dn(t)==u}function wn(t,e,r,n,i){return t===e||(null==t||null==e||!Uo(t)&&!Uo(e)?t!=t&&e!=e:function(t,e,r,n,i,a){var o=Io(t),s=Io(e),d=o?l:ra(t),p=s?l:ra(e),k=(d=d==u?m:d)==m,P=(p=p==u?m:p)==m,S=d==p;if(S&&Do(t)){if(!Do(e))return!1;o=!0,k=!1}if(S&&!k)return a||(a=new jr),o||Zo(t)?Fi(t,e,r,n,i,a):function(t,e,r,n,i,a,o){switch(r){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!a(new jt(t),new jt(e)));case c:case h:case v:return Mo(+t,+e);case f:return t.name==e.name&&t.message==e.message;case y:case w:return t==e+"";case g:var s=Le;case _:var u=1&n;if(s||(s=Fe),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=2,o.set(t,e);var d=Fi(s(t),s(e),n,i,a,o);return o.delete(t),d;case b:if(Pr)return Pr.call(t)==Pr.call(e)}return!1}(t,e,d,r,n,i,a);if(!(1&r)){var T=k&&Ct.call(t,"__wrapped__"),R=P&&Ct.call(e,"__wrapped__");if(T||R){var M=T?t.value():t,A=R?e.value():e;return a||(a=new jr),i(M,A,r,n,a)}}if(!S)return!1;return a||(a=new jr),function(t,e,r,n,i,a){var o=1&r,s=Vi(t),u=s.length,l=Vi(e).length;if(u!=l&&!o)return!1;var c=u;for(;c--;){var h=s[c];if(!(o?h in e:Ct.call(e,h)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var d=!0;a.set(t,e),a.set(e,t);var p=o;for(;++c<u;){h=s[c];var g=t[h],v=e[h];if(n)var m=o?n(v,g,h,e,t,a):n(g,v,h,t,e,a);if(!(void 0===m?g===v||i(g,v,r,n,a):m)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,r,n,i,a)}(t,e,r,n,wn,i))}function bn(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=gt(t);i--;){var s=r[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=r[i])[0],l=t[u],c=s[1];if(o&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new jr;if(n)var f=n(l,c,u,t,e,h);if(!(void 0===f?wn(c,l,3,n,h):f))return!1}}return!0}function kn(t){return!(!Fo(t)||(e=t,St&&St in e))&&(Lo(t)?At:ot).test(Sa(t));var e}function xn(t){return"function"==typeof t?t:null==t?qs:"object"==typeof t?Io(t)?Mn(t[0],t[1]):Rn(t):eu(t)}function Cn(t){if(!ha(t))return ir(t);var e=[];for(var r in gt(t))Ct.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Pn(t){if(!Fo(t))return function(t){var e=[];if(null!=t)for(var r in gt(t))e.push(r);return e}(t);var e=ha(t),r=[];for(var n in t)("constructor"!=n||!e&&Ct.call(t,n))&&r.push(n);return r}function Sn(t,e){return t<e}function Tn(t,e){var r=-1,i=Wo(t)?n(t.length):[];return Qr(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}function Rn(t){var e=Zi(t);return 1==e.length&&e[0][2]?da(e[0][0],e[0][1]):function(r){return r===t||bn(r,t,e)}}function Mn(t,e){return ua(t)&&fa(e)?da(Pa(t),e):function(r){var n=gs(r,t);return void 0===n&&n===e?vs(r,t):wn(e,n,3)}}function An(t,e,r,n,i){t!==e&&on(e,(function(a,o){if(i||(i=new jr),Fo(a))!function(t,e,r,n,i,a,o){var s=ma(t,r),u=ma(e,r),l=o.get(u);if(l)return void Hr(t,r,l);var c=a?a(s,u,r+"",t,e,o):void 0,h=void 0===c;if(h){var f=Io(u),d=!f&&Do(u),p=!f&&!d&&Zo(u);c=u,f||d||p?Io(s)?c=s:jo(s)?c=mi(s):d?(h=!1,c=hi(u,!0)):p?(h=!1,c=di(u,!0)):c=[]:Xo(u)||Oo(u)?(c=s,Oo(s)?c=os(s):Fo(s)&&!Lo(s)||(c=ia(u))):h=!1}h&&(o.set(u,c),i(c,u,n,a,o),o.delete(u));Hr(t,r,c)}(t,e,o,r,An,n,i);else{var s=n?n(ma(t,o),a,o+"",t,e,i):void 0;void 0===s&&(s=a),Hr(t,o,s)}}),bs)}function En(t,e){var r=t.length;if(r)return oa(e+=e<0?r:0,r)?t[e]:void 0}function On(t,e,r){var n=-1;return e=de(e.length?e:[qs],Ae(Ji())),function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}(Tn(t,(function(t,r,i){return{criteria:de(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,r){var n=-1,i=t.criteria,a=e.criteria,o=i.length,s=r.length;for(;++n<o;){var u=pi(i[n],a[n]);if(u){if(n>=s)return u;var l=r[n];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,r)}))}function In(t,e,r){for(var n=-1,i=e.length,a={};++n<i;){var o=e[n],s=hn(t,o);r(s,o)&&Hn(a,si(o,t),s)}return a}function Bn(t,e,r,n){var i=n?ke:be,a=-1,o=e.length,s=t;for(t===e&&(e=mi(e)),r&&(s=de(t,Ae(r)));++a<o;)for(var u=0,l=e[a],c=r?r(l):l;(u=i(s,c,u,n))>-1;)s!==t&&Yt.call(s,u,1),Yt.call(t,u,1);return t}function Wn(t,e){for(var r=t?e.length:0,n=r-1;r--;){var i=e[r];if(r==n||i!==a){var a=i;oa(i)?Yt.call(t,i,1):Qn(t,i)}}return t}function jn(t,e){return t+Qe(lr()*(e-t+1))}function Dn(t,e){var r="";if(!t||e<1||e>9007199254740991)return r;do{e%2&&(r+=t),(e=Qe(e/2))&&(t+=t)}while(e);return r}function $n(t,e){return wa(pa(t,e,qs),t+"")}function zn(t){return $r(Ms(t))}function Ln(t,e){var r=Ms(t);return xa(r,Gr(e,0,r.length))}function Hn(t,e,r,n){if(!Fo(t))return t;for(var i=-1,a=(e=si(e,t)).length,o=a-1,s=t;null!=s&&++i<a;){var u=Pa(e[i]),l=r;if(i!=o){var c=s[u];void 0===(l=n?n(c,u,s):void 0)&&(l=Fo(c)?c:oa(e[i+1])?[]:{})}Nr(s,u,l),s=s[u]}return t}var Nn=mr?function(t,e){return mr.set(t,e),t}:qs,Fn=Se?function(t,e){return Se(t,"toString",{configurable:!0,enumerable:!1,value:Fs(e),writable:!0})}:qs;function Un(t){return xa(Ms(t))}function Vn(t,e,r){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=n(a);++i<a;)o[i]=t[i+e];return o}function qn(t,e){var r;return Qr(t,(function(t,n,i){return!(r=e(t,n,i))})),!!r}function Xn(t,e,r){var n=0,i=null==t?n:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var a=n+i>>>1,o=t[a];null!==o&&!Ko(o)&&(r?o<=e:o<e)?n=a+1:i=a}return i}return Gn(t,e,qs,r)}function Gn(t,e,r,n){e=r(e);for(var i=0,a=null==t?0:t.length,o=e!=e,s=null===e,u=Ko(e),l=void 0===e;i<a;){var c=Qe((i+a)/2),h=r(t[c]),f=void 0!==h,d=null===h,p=h==h,g=Ko(h);if(o)var v=n||p;else v=l?p&&(n||f):s?p&&f&&(n||!d):u?p&&f&&!d&&(n||!g):!d&&!g&&(n?h<=e:h<e);v?i=c+1:a=c}return or(a,4294967294)}function Yn(t,e){for(var r=-1,n=t.length,i=0,a=[];++r<n;){var o=t[r],s=e?e(o):o;if(!r||!Mo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Jn(t){return"number"==typeof t?t:Ko(t)?NaN:+t}function Kn(t){if("string"==typeof t)return t;if(Io(t))return de(t,Kn)+"";if(Ko(t))return Sr?Sr.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Zn(t,e,r){var n=-1,i=he,a=t.length,o=!0,s=[],u=s;if(r)o=!1,i=fe;else if(a>=200){var l=e?null:Di(t);if(l)return Fe(l);o=!1,i=Oe,u=new Wr}else u=e?[]:s;t:for(;++n<a;){var c=t[n],h=e?e(c):c;if(c=r||0!==c?c:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,r)||(u!==s&&u.push(h),s.push(c))}return s}function Qn(t,e){return null==(t=ga(t,e=si(e,t)))||delete t[Pa($a(e))]}function ti(t,e,r,n){return Hn(t,e,r(hn(t,e)),n)}function ei(t,e,r,n){for(var i=t.length,a=n?i:-1;(n?a--:++a<i)&&e(t[a],a,t););return r?Vn(t,n?0:a,n?a+1:i):Vn(t,n?a+1:0,n?i:a)}function ri(t,e){var r=t;return r instanceof Er&&(r=r.value()),ge(e,(function(t,e){return e.func.apply(e.thisArg,pe([t],e.args))}),r)}function ni(t,e,r){var i=t.length;if(i<2)return i?Zn(t[0]):[];for(var a=-1,o=n(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=Zr(o[a]||s,t[u],e,r));return Zn(an(o,1),e,r)}function ii(t,e,r){for(var n=-1,i=t.length,a=e.length,o={};++n<i;){var s=n<a?e[n]:void 0;r(o,t[n],s)}return o}function ai(t){return jo(t)?t:[]}function oi(t){return"function"==typeof t?t:qs}function si(t,e){return Io(t)?t:ua(t,e)?[t]:Ca(ss(t))}var ui=$n;function li(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Vn(t,e,r)}var ci=Ye||function(t){return Xt.clearTimeout(t)};function hi(t,e){if(e)return t.slice();var r=t.length,n=Nt?Nt(r):new t.constructor(r);return t.copy(n),n}function fi(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function di(t,e){var r=e?fi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function pi(t,e){if(t!==e){var r=void 0!==t,n=null===t,i=t==t,a=Ko(t),o=void 0!==e,s=null===e,u=e==e,l=Ko(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||n&&o&&u||!r&&u||!i)return 1;if(!n&&!a&&!l&&t<e||l&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!u)return-1}return 0}function gi(t,e,r,i){for(var a=-1,o=t.length,s=r.length,u=-1,l=e.length,c=ar(o-s,0),h=n(l+c),f=!i;++u<l;)h[u]=e[u];for(;++a<s;)(f||a<o)&&(h[r[a]]=t[a]);for(;c--;)h[u++]=t[a++];return h}function vi(t,e,r,i){for(var a=-1,o=t.length,s=-1,u=r.length,l=-1,c=e.length,h=ar(o-u,0),f=n(h+c),d=!i;++a<h;)f[a]=t[a];for(var p=a;++l<c;)f[p+l]=e[l];for(;++s<u;)(d||a<o)&&(f[p+r[s]]=t[a++]);return f}function mi(t,e){var r=-1,i=t.length;for(e||(e=n(i));++r<i;)e[r]=t[r];return e}function yi(t,e,r,n){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),i?qr(r,s,u):Nr(r,s,u)}return r}function _i(t,e){return function(r,n){var i=Io(r)?oe:Ur,a=e?e():{};return i(r,t,Ji(n,2),a)}}function wi(t){return $n((function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,o&&sa(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=gt(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e}))}function bi(t,e){return function(r,n){if(null==r)return r;if(!Wo(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=gt(r);(e?a--:++a<i)&&!1!==n(o[a],a,o););return r}}function ki(t){return function(e,r,n){for(var i=-1,a=gt(e),o=n(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===r(a[u],u,a))break}return e}}function xi(t){return function(e){var r=ze(e=ss(e))?qe(e):void 0,n=r?r[0]:e.charAt(0),i=r?li(r,1).join(""):e.slice(1);return n[t]()+i}}function Ci(t){return function(e){return ge(Ls(Os(e).replace(Ot,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Rr(t.prototype),n=t.apply(r,e);return Fo(n)?n:r}}function Si(t){return function(e,r,n){var i=gt(e);if(!Wo(e)){var a=Ji(r,3);e=ws(e),r=function(t){return a(i[t],t,i)}}var o=t(e,r,n);return o>-1?i[a?e[o]:o]:void 0}}function Ti(t){return Ui((function(e){var r=e.length,n=r,i=Ar.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if("function"!=typeof o)throw new yt(a);if(i&&!s&&"wrapper"==Gi(o))var s=new Ar([],!0)}for(n=s?n:r;++n<r;){var u=Gi(o=e[n]),l="wrapper"==u?Xi(o):void 0;s=l&&la(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?s[Gi(l[0])].apply(s,l[3]):1==o.length&&la(o)?s[u]():s.thru(o)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&Io(n))return s.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}}))}function Ri(t,e,r,i,a,o,s,u,l,c){var h=128&e,f=1&e,d=2&e,p=24&e,g=512&e,v=d?void 0:Pi(t);return function m(){for(var y=arguments.length,_=n(y),w=y;w--;)_[w]=arguments[w];if(p)var b=Yi(m),k=We(_,b);if(i&&(_=gi(_,i,a,p)),o&&(_=vi(_,o,s,p)),y-=k,p&&y<c){var x=Ne(_,b);return Wi(t,e,Ri,m.placeholder,r,_,x,u,l,c-y)}var C=f?r:this,P=d?C[t]:t;return y=_.length,u?_=va(_,u):g&&y>1&&_.reverse(),h&&l<y&&(_.length=l),this&&this!==Xt&&this instanceof m&&(P=v||Pi(P)),P.apply(C,_)}}function Mi(t,e){return function(r,n){return function(t,e,r,n){return un(t,(function(t,i,a){e(n,r(t),i,a)})),n}(r,t,e(n),{})}}function Ai(t,e){return function(r,n){var i;if(void 0===r&&void 0===n)return e;if(void 0!==r&&(i=r),void 0!==n){if(void 0===i)return n;"string"==typeof r||"string"==typeof n?(r=Kn(r),n=Kn(n)):(r=Jn(r),n=Jn(n)),i=t(r,n)}return i}}function Ei(t){return Ui((function(e){return e=de(e,Ae(Ji())),$n((function(r){var n=this;return t(e,(function(t){return ae(t,n,r)}))}))}))}function Oi(t,e){var r=(e=void 0===e?" ":Kn(e)).length;if(r<2)return r?Dn(e,t):e;var n=Dn(e,Ze(t/Ve(e)));return ze(e)?li(qe(n),0,t).join(""):n.slice(0,t)}function Ii(t){return function(e,r,i){return i&&"number"!=typeof i&&sa(e,r,i)&&(r=i=void 0),e=rs(e),void 0===r?(r=e,e=0):r=rs(r),function(t,e,r,i){for(var a=-1,o=ar(Ze((e-t)/(r||1)),0),s=n(o);o--;)s[i?o:++a]=t,t+=r;return s}(e,r,i=void 0===i?e<r?1:-1:rs(i),t)}}function Bi(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=as(e),r=as(r)),t(e,r)}}function Wi(t,e,r,n,i,a,o,s,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var h=[t,e,i,c?a:void 0,c?o:void 0,c?void 0:a,c?void 0:o,s,u,l],f=r.apply(void 0,h);return la(t)&&ya(f,h),f.placeholder=n,ba(f,t,e)}function ji(t){var e=pt[t];return function(t,r){if(t=as(t),(r=null==r?0:or(ns(r),292))&&rr(t)){var n=(ss(t)+"e").split("e");return+((n=(ss(e(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}}var Di=pr&&1/Fe(new pr([,-0]))[1]==1/0?function(t){return new pr(t)}:Ks;function $i(t){return function(e){var r=ra(e);return r==g?Le(e):r==_?Ue(e):function(t,e){return de(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function zi(t,e,r,i,s,u,l,c){var h=2&e;if(!h&&"function"!=typeof t)throw new yt(a);var f=i?i.length:0;if(f||(e&=-97,i=s=void 0),l=void 0===l?l:ar(ns(l),0),c=void 0===c?c:ns(c),f-=s?s.length:0,64&e){var d=i,p=s;i=s=void 0}var g=h?void 0:Xi(t),v=[t,e,r,i,s,d,p,u,l,c];if(g&&function(t,e){var r=t[1],n=e[1],i=r|n,a=i<131,s=128==n&&8==r||128==n&&256==r&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==r;if(!a&&!s)return t;1&n&&(t[2]=e[2],i|=1&r?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?gi(l,u,e[4]):u,t[4]=l?Ne(t[3],o):e[4]}(u=e[5])&&(l=t[5],t[5]=l?vi(l,u,e[6]):u,t[6]=l?Ne(t[5],o):e[6]);(u=e[7])&&(t[7]=u);128&n&&(t[8]=null==t[8]?e[8]:or(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(v,g),t=v[0],e=v[1],r=v[2],i=v[3],s=v[4],!(c=v[9]=void 0===v[9]?h?0:t.length:ar(v[9]-f,0))&&24&e&&(e&=-25),e&&1!=e)m=8==e||16==e?function(t,e,r){var i=Pi(t);return function a(){for(var o=arguments.length,s=n(o),u=o,l=Yi(a);u--;)s[u]=arguments[u];var c=o<3&&s[0]!==l&&s[o-1]!==l?[]:Ne(s,l);if((o-=c.length)<r)return Wi(t,e,Ri,a.placeholder,void 0,s,c,void 0,void 0,r-o);var h=this&&this!==Xt&&this instanceof a?i:t;return ae(h,this,s)}}(t,e,c):32!=e&&33!=e||s.length?Ri.apply(void 0,v):function(t,e,r,i){var a=1&e,o=Pi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=n(c+u),f=this&&this!==Xt&&this instanceof e?o:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return ae(f,a?r:this,h)}}(t,e,r,i);else var m=function(t,e,r){var n=1&e,i=Pi(t);return function e(){var a=this&&this!==Xt&&this instanceof e?i:t;return a.apply(n?r:this,arguments)}}(t,e,r);return ba((g?Nn:ya)(m,v),t,e)}function Li(t,e,r,n){return void 0===t||Mo(t,bt[r])&&!Ct.call(n,r)?e:t}function Hi(t,e,r,n,i,a){return Fo(t)&&Fo(e)&&(a.set(e,t),An(t,e,void 0,Hi,a),a.delete(e)),t}function Ni(t){return Xo(t)?void 0:t}function Fi(t,e,r,n,i,a){var o=1&r,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,h=!0,f=2&r?new Wr:void 0;for(a.set(t,e),a.set(e,t);++c<s;){var d=t[c],p=e[c];if(n)var g=o?n(p,d,c,e,t,a):n(d,p,c,t,e,a);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!me(e,(function(t,e){if(!Oe(f,e)&&(d===t||i(d,t,r,n,a)))return f.push(e)}))){h=!1;break}}else if(d!==p&&!i(d,p,r,n,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Ui(t){return wa(pa(t,void 0,Ia),t+"")}function Vi(t){return fn(t,ws,ta)}function qi(t){return fn(t,bs,ea)}var Xi=mr?function(t){return mr.get(t)}:Ks;function Gi(t){for(var e=t.name+"",r=yr[e],n=Ct.call(yr,e)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==t)return i.name}return e}function Yi(t){return(Ct.call(Tr,"placeholder")?Tr:t).placeholder}function Ji(){var t=Tr.iteratee||Xs;return t=t===Xs?xn:t,arguments.length?t(arguments[0],arguments[1]):t}function Ki(t,e){var r,n,i=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Zi(t){for(var e=ws(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,fa(i)]}return e}function Qi(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return kn(r)?r:void 0}var ta=tr?function(t){return null==t?[]:(t=gt(t),ce(tr(t),(function(e){return Gt.call(t,e)})))}:iu,ea=tr?function(t){for(var e=[];t;)pe(e,ta(t)),t=Vt(t);return e}:iu,ra=dn;function na(t,e,r){for(var n=-1,i=(e=si(e,t)).length,a=!1;++n<i;){var o=Pa(e[n]);if(!(a=null!=t&&r(t,o)))break;t=t[o]}return a||++n!=i?a:!!(i=null==t?0:t.length)&&No(i)&&oa(o,i)&&(Io(t)||Oo(t))}function ia(t){return"function"!=typeof t.constructor||ha(t)?{}:Rr(Vt(t))}function aa(t){return Io(t)||Oo(t)||!!(Kt&&t&&t[Kt])}function oa(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&ut.test(t))&&t>-1&&t%1==0&&t<e}function sa(t,e,r){if(!Fo(r))return!1;var n=typeof e;return!!("number"==n?Wo(r)&&oa(e,r.length):"string"==n&&e in r)&&Mo(r[e],t)}function ua(t,e){if(Io(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ko(t))||(U.test(t)||!F.test(t)||null!=e&&t in gt(e))}function la(t){var e=Gi(t),r=Tr[e];if("function"!=typeof r||!(e in Er.prototype))return!1;if(t===r)return!0;var n=Xi(r);return!!n&&t===n[0]}(hr&&ra(new hr(new ArrayBuffer(1)))!=C||fr&&ra(new fr)!=g||dr&&"[object Promise]"!=ra(dr.resolve())||pr&&ra(new pr)!=_||gr&&ra(new gr)!=k)&&(ra=function(t){var e=dn(t),r=e==m?t.constructor:void 0,n=r?Sa(r):"";if(n)switch(n){case _r:return C;case wr:return g;case br:return"[object Promise]";case kr:return _;case xr:return k}return e});var ca=kt?Lo:au;function ha(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bt)}function fa(t){return t==t&&!Fo(t)}function da(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in gt(r)))}}function pa(t,e,r){return e=ar(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=ar(i.length-e,0),s=n(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=n(e+1);++a<e;)u[a]=i[a];return u[e]=r(s),ae(t,this,u)}}function ga(t,e){return e.length<2?t:hn(t,Vn(e,0,-1))}function va(t,e){for(var r=t.length,n=or(e.length,r),i=mi(t);n--;){var a=e[n];t[n]=oa(a,r)?i[a]:void 0}return t}function ma(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var ya=ka(Nn),_a=Ke||function(t,e){return Xt.setTimeout(t,e)},wa=ka(Fn);function ba(t,e,r){var n=e+"";return wa(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(K,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return se(s,(function(r){var n="_."+r[0];e&r[1]&&!he(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(Z);return e?e[1].split(Q):[]}(n),r)))}function ka(t){var e=0,r=0;return function(){var n=sr(),i=16-(n-r);if(r=n,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xa(t,e){var r=-1,n=t.length,i=n-1;for(e=void 0===e?n:e;++r<e;){var a=jn(r,i),o=t[a];t[a]=t[r],t[r]=o}return t.length=e,t}var Ca=function(t){var e=xo(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(V,(function(t,r,n,i){e.push(n?i.replace(et,"$1"):r||t)})),e}));function Pa(t){if("string"==typeof t||Ko(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Sa(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ta(t){if(t instanceof Er)return t.clone();var e=new Ar(t.__wrapped__,t.__chain__);return e.__actions__=mi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ra=$n((function(t,e){return jo(t)?Zr(t,an(e,1,jo,!0)):[]})),Ma=$n((function(t,e){var r=$a(e);return jo(r)&&(r=void 0),jo(t)?Zr(t,an(e,1,jo,!0),Ji(r,2)):[]})),Aa=$n((function(t,e){var r=$a(e);return jo(r)&&(r=void 0),jo(t)?Zr(t,an(e,1,jo,!0),void 0,r):[]}));function Ea(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=ar(n+i,0)),we(t,Ji(e,3),i)}function Oa(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n-1;return void 0!==r&&(i=ns(r),i=r<0?ar(n+i,0):or(i,n-1)),we(t,Ji(e,3),i,!0)}function Ia(t){return(null==t?0:t.length)?an(t,1):[]}function Ba(t){return t&&t.length?t[0]:void 0}var Wa=$n((function(t){var e=de(t,ai);return e.length&&e[0]===t[0]?mn(e):[]})),ja=$n((function(t){var e=$a(t),r=de(t,ai);return e===$a(r)?e=void 0:r.pop(),r.length&&r[0]===t[0]?mn(r,Ji(e,2)):[]})),Da=$n((function(t){var e=$a(t),r=de(t,ai);return(e="function"==typeof e?e:void 0)&&r.pop(),r.length&&r[0]===t[0]?mn(r,void 0,e):[]}));function $a(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var za=$n(La);function La(t,e){return t&&t.length&&e&&e.length?Bn(t,e):t}var Ha=Ui((function(t,e){var r=null==t?0:t.length,n=Xr(t,e);return Wn(t,de(e,(function(t){return oa(t,r)?+t:t})).sort(pi)),n}));function Na(t){return null==t?t:cr.call(t)}var Fa=$n((function(t){return Zn(an(t,1,jo,!0))})),Ua=$n((function(t){var e=$a(t);return jo(e)&&(e=void 0),Zn(an(t,1,jo,!0),Ji(e,2))})),Va=$n((function(t){var e=$a(t);return e="function"==typeof e?e:void 0,Zn(an(t,1,jo,!0),void 0,e)}));function qa(t){if(!t||!t.length)return[];var e=0;return t=ce(t,(function(t){if(jo(t))return e=ar(t.length,e),!0})),Me(e,(function(e){return de(t,Pe(e))}))}function Xa(t,e){if(!t||!t.length)return[];var r=qa(t);return null==e?r:de(r,(function(t){return ae(e,void 0,t)}))}var Ga=$n((function(t,e){return jo(t)?Zr(t,e):[]})),Ya=$n((function(t){return ni(ce(t,jo))})),Ja=$n((function(t){var e=$a(t);return jo(e)&&(e=void 0),ni(ce(t,jo),Ji(e,2))})),Ka=$n((function(t){var e=$a(t);return e="function"==typeof e?e:void 0,ni(ce(t,jo),void 0,e)})),Za=$n(qa);var Qa=$n((function(t){var e=t.length,r=e>1?t[e-1]:void 0;return r="function"==typeof r?(t.pop(),r):void 0,Xa(t,r)}));function to(t){var e=Tr(t);return e.__chain__=!0,e}function eo(t,e){return e(t)}var ro=Ui((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,i=function(e){return Xr(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Er&&oa(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:eo,args:[i],thisArg:void 0}),new Ar(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(void 0),t}))):this.thru(i)}));var no=_i((function(t,e,r){Ct.call(t,r)?++t[r]:qr(t,r,1)}));var io=Si(Ea),ao=Si(Oa);function oo(t,e){return(Io(t)?se:Qr)(t,Ji(e,3))}function so(t,e){return(Io(t)?ue:tn)(t,Ji(e,3))}var uo=_i((function(t,e,r){Ct.call(t,r)?t[r].push(e):qr(t,r,[e])}));var lo=$n((function(t,e,r){var i=-1,a="function"==typeof e,o=Wo(t)?n(t.length):[];return Qr(t,(function(t){o[++i]=a?ae(e,t,r):yn(t,e,r)})),o})),co=_i((function(t,e,r){qr(t,r,e)}));function ho(t,e){return(Io(t)?de:Tn)(t,Ji(e,3))}var fo=_i((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]}));var po=$n((function(t,e){if(null==t)return[];var r=e.length;return r>1&&sa(t,e[0],e[1])?e=[]:r>2&&sa(e[0],e[1],e[2])&&(e=[e[0]]),On(t,an(e,1),[])})),go=Je||function(){return Xt.Date.now()};function vo(t,e,r){return e=r?void 0:e,zi(t,128,void 0,void 0,void 0,void 0,e=t&&null==e?t.length:e)}function mo(t,e){var r;if("function"!=typeof e)throw new yt(a);return t=ns(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}var yo=$n((function(t,e,r){var n=1;if(r.length){var i=Ne(r,Yi(yo));n|=32}return zi(t,n,e,r,i)})),_o=$n((function(t,e,r){var n=3;if(r.length){var i=Ne(r,Yi(_o));n|=32}return zi(e,n,t,r,i)}));function wo(t,e,r){var n,i,o,s,u,l,c=0,h=!1,f=!1,d=!0;if("function"!=typeof t)throw new yt(a);function p(e){var r=n,a=i;return n=i=void 0,c=e,s=t.apply(a,r)}function g(t){return c=t,u=_a(m,e),h?p(t):s}function v(t){var r=t-l;return void 0===l||r>=e||r<0||f&&t-c>=o}function m(){var t=go();if(v(t))return y(t);u=_a(m,function(t){var r=e-(t-l);return f?or(r,o-(t-c)):r}(t))}function y(t){return u=void 0,d&&n?p(t):(n=i=void 0,s)}function _(){var t=go(),r=v(t);if(n=arguments,i=this,l=t,r){if(void 0===u)return g(l);if(f)return ci(u),u=_a(m,e),p(l)}return void 0===u&&(u=_a(m,e)),s}return e=as(e)||0,Fo(r)&&(h=!!r.leading,o=(f="maxWait"in r)?ar(as(r.maxWait)||0,e):o,d="trailing"in r?!!r.trailing:d),_.cancel=function(){void 0!==u&&ci(u),c=0,n=l=i=u=void 0},_.flush=function(){return void 0===u?s:y(go())},_}var bo=$n((function(t,e){return Kr(t,1,e)})),ko=$n((function(t,e,r){return Kr(t,as(e)||0,r)}));function xo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new yt(a);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(xo.Cache||Br),r}function Co(t){if("function"!=typeof t)throw new yt(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}xo.Cache=Br;var Po=ui((function(t,e){var r=(e=1==e.length&&Io(e[0])?de(e[0],Ae(Ji())):de(an(e,1),Ae(Ji()))).length;return $n((function(n){for(var i=-1,a=or(n.length,r);++i<a;)n[i]=e[i].call(this,n[i]);return ae(t,this,n)}))})),So=$n((function(t,e){return zi(t,32,void 0,e,Ne(e,Yi(So)))})),To=$n((function(t,e){return zi(t,64,void 0,e,Ne(e,Yi(To)))})),Ro=Ui((function(t,e){return zi(t,256,void 0,void 0,void 0,e)}));function Mo(t,e){return t===e||t!=t&&e!=e}var Ao=Bi(pn),Eo=Bi((function(t,e){return t>=e})),Oo=_n(function(){return arguments}())?_n:function(t){return Uo(t)&&Ct.call(t,"callee")&&!Gt.call(t,"callee")},Io=n.isArray,Bo=Qt?Ae(Qt):function(t){return Uo(t)&&dn(t)==x};function Wo(t){return null!=t&&No(t.length)&&!Lo(t)}function jo(t){return Uo(t)&&Wo(t)}var Do=er||au,$o=te?Ae(te):function(t){return Uo(t)&&dn(t)==h};function zo(t){if(!Uo(t))return!1;var e=dn(t);return e==f||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Xo(t)}function Lo(t){if(!Fo(t))return!1;var e=dn(t);return e==d||e==p||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Ho(t){return"number"==typeof t&&t==ns(t)}function No(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Fo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Uo(t){return null!=t&&"object"==typeof t}var Vo=ee?Ae(ee):function(t){return Uo(t)&&ra(t)==g};function qo(t){return"number"==typeof t||Uo(t)&&dn(t)==v}function Xo(t){if(!Uo(t)||dn(t)!=m)return!1;var e=Vt(t);if(null===e)return!0;var r=Ct.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&xt.call(r)==Rt}var Go=re?Ae(re):function(t){return Uo(t)&&dn(t)==y};var Yo=ne?Ae(ne):function(t){return Uo(t)&&ra(t)==_};function Jo(t){return"string"==typeof t||!Io(t)&&Uo(t)&&dn(t)==w}function Ko(t){return"symbol"==typeof t||Uo(t)&&dn(t)==b}var Zo=ie?Ae(ie):function(t){return Uo(t)&&No(t.length)&&!!Lt[dn(t)]};var Qo=Bi(Sn),ts=Bi((function(t,e){return t<=e}));function es(t){if(!t)return[];if(Wo(t))return Jo(t)?qe(t):mi(t);if(Zt&&t[Zt])return function(t){for(var e,r=[];!(e=t.next()).done;)r.push(e.value);return r}(t[Zt]());var e=ra(t);return(e==g?Le:e==_?Fe:Ms)(t)}function rs(t){return t?(t=as(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ns(t){var e=rs(t),r=e%1;return e==e?r?e-r:e:0}function is(t){return t?Gr(ns(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(Ko(t))return NaN;if(Fo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Fo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(G,"");var r=at.test(t);return r||st.test(t)?Ut(t.slice(2),r?2:8):it.test(t)?NaN:+t}function os(t){return yi(t,bs(t))}function ss(t){return null==t?"":Kn(t)}var us=wi((function(t,e){if(ha(e)||Wo(e))yi(e,ws(e),t);else for(var r in e)Ct.call(e,r)&&Nr(t,r,e[r])})),ls=wi((function(t,e){yi(e,bs(e),t)})),cs=wi((function(t,e,r,n){yi(e,bs(e),t,n)})),hs=wi((function(t,e,r,n){yi(e,ws(e),t,n)})),fs=Ui(Xr);var ds=$n((function(t,e){t=gt(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&sa(e[0],e[1],i)&&(n=1);++r<n;)for(var a=e[r],o=bs(a),s=-1,u=o.length;++s<u;){var l=o[s],c=t[l];(void 0===c||Mo(c,bt[l])&&!Ct.call(t,l))&&(t[l]=a[l])}return t})),ps=$n((function(t){return t.push(void 0,Hi),ae(xs,void 0,t)}));function gs(t,e,r){var n=null==t?void 0:hn(t,e);return void 0===n?r:n}function vs(t,e){return null!=t&&na(t,e,vn)}var ms=Mi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),t[e]=r}),Fs(qs)),ys=Mi((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Tt.call(e)),Ct.call(t,e)?t[e].push(r):t[e]=[r]}),Ji),_s=$n(yn);function ws(t){return Wo(t)?Dr(t):Cn(t)}function bs(t){return Wo(t)?Dr(t,!0):Pn(t)}var ks=wi((function(t,e,r){An(t,e,r)})),xs=wi((function(t,e,r,n){An(t,e,r,n)})),Cs=Ui((function(t,e){var r={};if(null==t)return r;var n=!1;e=de(e,(function(e){return e=si(e,t),n||(n=e.length>1),e})),yi(t,qi(t),r),n&&(r=Yr(r,7,Ni));for(var i=e.length;i--;)Qn(r,e[i]);return r}));var Ps=Ui((function(t,e){return null==t?{}:function(t,e){return In(t,e,(function(e,r){return vs(t,r)}))}(t,e)}));function Ss(t,e){if(null==t)return{};var r=de(qi(t),(function(t){return[t]}));return e=Ji(e),In(t,r,(function(t,r){return e(t,r[0])}))}var Ts=$i(ws),Rs=$i(bs);function Ms(t){return null==t?[]:Ee(t,ws(t))}var As=Ci((function(t,e,r){return e=e.toLowerCase(),t+(r?Es(e):e)}));function Es(t){return zs(ss(t).toLowerCase())}function Os(t){return(t=ss(t))&&t.replace(lt,je).replace(It,"")}var Is=Ci((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Bs=Ci((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Ws=xi("toLowerCase");var js=Ci((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Ds=Ci((function(t,e,r){return t+(r?" ":"")+zs(e)}));var $s=Ci((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),zs=xi("toUpperCase");function Ls(t,e,r){return t=ss(t),void 0===(e=r?void 0:e)?function(t){return Dt.test(t)}(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.match(tt)||[]}(t):t.match(e)||[]}var Hs=$n((function(t,e){try{return ae(t,void 0,e)}catch(t){return zo(t)?t:new ft(t)}})),Ns=Ui((function(t,e){return se(e,(function(e){e=Pa(e),qr(t,e,yo(t[e],t))})),t}));function Fs(t){return function(){return t}}var Us=Ti(),Vs=Ti(!0);function qs(t){return t}function Xs(t){return xn("function"==typeof t?t:Yr(t,1))}var Gs=$n((function(t,e){return function(r){return yn(r,t,e)}})),Ys=$n((function(t,e){return function(r){return yn(t,r,e)}}));function Js(t,e,r){var n=ws(e),i=cn(e,n);null!=r||Fo(e)&&(i.length||!n.length)||(r=e,e=t,t=this,i=cn(e,ws(e)));var a=!(Fo(r)&&"chain"in r&&!r.chain),o=Lo(t);return se(i,(function(r){var n=e[r];t[r]=n,o&&(t.prototype[r]=function(){var e=this.__chain__;if(a||e){var r=t(this.__wrapped__),i=r.__actions__=mi(this.__actions__);return i.push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,pe([this.value()],arguments))})})),t}function Ks(){}var Zs=Ei(de),Qs=Ei(le),tu=Ei(me);function eu(t){return ua(t)?Pe(Pa(t)):function(t){return function(e){return hn(e,t)}}(t)}var ru=Ii(),nu=Ii(!0);function iu(){return[]}function au(){return!1}var ou=Ai((function(t,e){return t+e}),0),su=ji("ceil"),uu=Ai((function(t,e){return t/e}),1),lu=ji("floor");var cu,hu=Ai((function(t,e){return t*e}),1),fu=ji("round"),du=Ai((function(t,e){return t-e}),0);return Tr.after=function(t,e){if("function"!=typeof e)throw new yt(a);return t=ns(t),function(){if(--t<1)return e.apply(this,arguments)}},Tr.ary=vo,Tr.assign=us,Tr.assignIn=ls,Tr.assignInWith=cs,Tr.assignWith=hs,Tr.at=fs,Tr.before=mo,Tr.bind=yo,Tr.bindAll=Ns,Tr.bindKey=_o,Tr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Io(t)?t:[t]},Tr.chain=to,Tr.chunk=function(t,e,r){e=(r?sa(t,e,r):void 0===e)?1:ar(ns(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,o=0,s=n(Ze(i/e));a<i;)s[o++]=Vn(t,a,a+=e);return s},Tr.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var a=t[e];a&&(i[n++]=a)}return i},Tr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),r=arguments[0],i=t;i--;)e[i-1]=arguments[i];return pe(Io(r)?mi(r):[r],an(e,1))},Tr.cond=function(t){var e=null==t?0:t.length,r=Ji();return t=e?de(t,(function(t){if("function"!=typeof t[1])throw new yt(a);return[r(t[0]),t[1]]})):[],$n((function(r){for(var n=-1;++n<e;){var i=t[n];if(ae(i[0],this,r))return ae(i[1],this,r)}}))},Tr.conforms=function(t){return function(t){var e=ws(t);return function(r){return Jr(r,t,e)}}(Yr(t,1))},Tr.constant=Fs,Tr.countBy=no,Tr.create=function(t,e){var r=Rr(t);return null==e?r:Vr(r,e)},Tr.curry=function t(e,r,n){var i=zi(e,8,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Tr.curryRight=function t(e,r,n){var i=zi(e,16,void 0,void 0,void 0,void 0,void 0,r=n?void 0:r);return i.placeholder=t.placeholder,i},Tr.debounce=wo,Tr.defaults=ds,Tr.defaultsDeep=ps,Tr.defer=bo,Tr.delay=ko,Tr.difference=Ra,Tr.differenceBy=Ma,Tr.differenceWith=Aa,Tr.drop=function(t,e,r){var n=null==t?0:t.length;return n?Vn(t,(e=r||void 0===e?1:ns(e))<0?0:e,n):[]},Tr.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?Vn(t,0,(e=n-(e=r||void 0===e?1:ns(e)))<0?0:e):[]},Tr.dropRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0,!0):[]},Tr.dropWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!0):[]},Tr.fill=function(t,e,r,n){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&sa(t,e,r)&&(r=0,n=i),function(t,e,r,n){var i=t.length;for((r=ns(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:ns(n))<0&&(n+=i),n=r>n?0:is(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},Tr.filter=function(t,e){return(Io(t)?ce:nn)(t,Ji(e,3))},Tr.flatMap=function(t,e){return an(ho(t,e),1)},Tr.flatMapDeep=function(t,e){return an(ho(t,e),1/0)},Tr.flatMapDepth=function(t,e,r){return r=void 0===r?1:ns(r),an(ho(t,e),r)},Tr.flatten=Ia,Tr.flattenDeep=function(t){return(null==t?0:t.length)?an(t,1/0):[]},Tr.flattenDepth=function(t,e){return(null==t?0:t.length)?an(t,e=void 0===e?1:ns(e)):[]},Tr.flip=function(t){return zi(t,512)},Tr.flow=Us,Tr.flowRight=Vs,Tr.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n},Tr.functions=function(t){return null==t?[]:cn(t,ws(t))},Tr.functionsIn=function(t){return null==t?[]:cn(t,bs(t))},Tr.groupBy=uo,Tr.initial=function(t){return(null==t?0:t.length)?Vn(t,0,-1):[]},Tr.intersection=Wa,Tr.intersectionBy=ja,Tr.intersectionWith=Da,Tr.invert=ms,Tr.invertBy=ys,Tr.invokeMap=lo,Tr.iteratee=Xs,Tr.keyBy=co,Tr.keys=ws,Tr.keysIn=bs,Tr.map=ho,Tr.mapKeys=function(t,e){var r={};return e=Ji(e,3),un(t,(function(t,n,i){qr(r,e(t,n,i),t)})),r},Tr.mapValues=function(t,e){var r={};return e=Ji(e,3),un(t,(function(t,n,i){qr(r,n,e(t,n,i))})),r},Tr.matches=function(t){return Rn(Yr(t,1))},Tr.matchesProperty=function(t,e){return Mn(t,Yr(e,1))},Tr.memoize=xo,Tr.merge=ks,Tr.mergeWith=xs,Tr.method=Gs,Tr.methodOf=Ys,Tr.mixin=Js,Tr.negate=Co,Tr.nthArg=function(t){return t=ns(t),$n((function(e){return En(e,t)}))},Tr.omit=Cs,Tr.omitBy=function(t,e){return Ss(t,Co(Ji(e)))},Tr.once=function(t){return mo(2,t)},Tr.orderBy=function(t,e,r,n){return null==t?[]:(Io(e)||(e=null==e?[]:[e]),Io(r=n?void 0:r)||(r=null==r?[]:[r]),On(t,e,r))},Tr.over=Zs,Tr.overArgs=Po,Tr.overEvery=Qs,Tr.overSome=tu,Tr.partial=So,Tr.partialRight=To,Tr.partition=fo,Tr.pick=Ps,Tr.pickBy=Ss,Tr.property=eu,Tr.propertyOf=function(t){return function(e){return null==t?void 0:hn(t,e)}},Tr.pull=za,Tr.pullAll=La,Tr.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?Bn(t,e,Ji(r,2)):t},Tr.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Bn(t,e,void 0,r):t},Tr.pullAt=Ha,Tr.range=ru,Tr.rangeRight=nu,Tr.rearg=Ro,Tr.reject=function(t,e){return(Io(t)?ce:nn)(t,Co(Ji(e,3)))},Tr.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,i=[],a=t.length;for(e=Ji(e,3);++n<a;){var o=t[n];e(o,n,t)&&(r.push(o),i.push(n))}return Wn(t,i),r},Tr.rest=function(t,e){if("function"!=typeof t)throw new yt(a);return $n(t,e=void 0===e?e:ns(e))},Tr.reverse=Na,Tr.sampleSize=function(t,e,r){return e=(r?sa(t,e,r):void 0===e)?1:ns(e),(Io(t)?zr:Ln)(t,e)},Tr.set=function(t,e,r){return null==t?t:Hn(t,e,r)},Tr.setWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:Hn(t,e,r,n)},Tr.shuffle=function(t){return(Io(t)?Lr:Un)(t)},Tr.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&sa(t,e,r)?(e=0,r=n):(e=null==e?0:ns(e),r=void 0===r?n:ns(r)),Vn(t,e,r)):[]},Tr.sortBy=po,Tr.sortedUniq=function(t){return t&&t.length?Yn(t):[]},Tr.sortedUniqBy=function(t,e){return t&&t.length?Yn(t,Ji(e,2)):[]},Tr.split=function(t,e,r){return r&&"number"!=typeof r&&sa(t,e,r)&&(e=r=void 0),(r=void 0===r?4294967295:r>>>0)?(t=ss(t))&&("string"==typeof e||null!=e&&!Go(e))&&!(e=Kn(e))&&ze(t)?li(qe(t),0,r):t.split(e,r):[]},Tr.spread=function(t,e){if("function"!=typeof t)throw new yt(a);return e=null==e?0:ar(ns(e),0),$n((function(r){var n=r[e],i=li(r,0,e);return n&&pe(i,n),ae(t,this,i)}))},Tr.tail=function(t){var e=null==t?0:t.length;return e?Vn(t,1,e):[]},Tr.take=function(t,e,r){return t&&t.length?Vn(t,0,(e=r||void 0===e?1:ns(e))<0?0:e):[]},Tr.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?Vn(t,(e=n-(e=r||void 0===e?1:ns(e)))<0?0:e,n):[]},Tr.takeRightWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3),!1,!0):[]},Tr.takeWhile=function(t,e){return t&&t.length?ei(t,Ji(e,3)):[]},Tr.tap=function(t,e){return e(t),t},Tr.throttle=function(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new yt(a);return Fo(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),wo(t,e,{leading:n,maxWait:e,trailing:i})},Tr.thru=eo,Tr.toArray=es,Tr.toPairs=Ts,Tr.toPairsIn=Rs,Tr.toPath=function(t){return Io(t)?de(t,Pa):Ko(t)?[t]:mi(Ca(ss(t)))},Tr.toPlainObject=os,Tr.transform=function(t,e,r){var n=Io(t),i=n||Do(t)||Zo(t);if(e=Ji(e,4),null==r){var a=t&&t.constructor;r=i?n?new a:[]:Fo(t)&&Lo(a)?Rr(Vt(t)):{}}return(i?se:un)(t,(function(t,n,i){return e(r,t,n,i)})),r},Tr.unary=function(t){return vo(t,1)},Tr.union=Fa,Tr.unionBy=Ua,Tr.unionWith=Va,Tr.uniq=function(t){return t&&t.length?Zn(t):[]},Tr.uniqBy=function(t,e){return t&&t.length?Zn(t,Ji(e,2)):[]},Tr.uniqWith=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?Zn(t,void 0,e):[]},Tr.unset=function(t,e){return null==t||Qn(t,e)},Tr.unzip=qa,Tr.unzipWith=Xa,Tr.update=function(t,e,r){return null==t?t:ti(t,e,oi(r))},Tr.updateWith=function(t,e,r,n){return n="function"==typeof n?n:void 0,null==t?t:ti(t,e,oi(r),n)},Tr.values=Ms,Tr.valuesIn=function(t){return null==t?[]:Ee(t,bs(t))},Tr.without=Ga,Tr.words=Ls,Tr.wrap=function(t,e){return So(oi(e),t)},Tr.xor=Ya,Tr.xorBy=Ja,Tr.xorWith=Ka,Tr.zip=Za,Tr.zipObject=function(t,e){return ii(t||[],e||[],Nr)},Tr.zipObjectDeep=function(t,e){return ii(t||[],e||[],Hn)},Tr.zipWith=Qa,Tr.entries=Ts,Tr.entriesIn=Rs,Tr.extend=ls,Tr.extendWith=cs,Js(Tr,Tr),Tr.add=ou,Tr.attempt=Hs,Tr.camelCase=As,Tr.capitalize=Es,Tr.ceil=su,Tr.clamp=function(t,e,r){return void 0===r&&(r=e,e=void 0),void 0!==r&&(r=(r=as(r))==r?r:0),void 0!==e&&(e=(e=as(e))==e?e:0),Gr(as(t),e,r)},Tr.clone=function(t){return Yr(t,4)},Tr.cloneDeep=function(t){return Yr(t,5)},Tr.cloneDeepWith=function(t,e){return Yr(t,5,e="function"==typeof e?e:void 0)},Tr.cloneWith=function(t,e){return Yr(t,4,e="function"==typeof e?e:void 0)},Tr.conformsTo=function(t,e){return null==e||Jr(t,e,ws(e))},Tr.deburr=Os,Tr.defaultTo=function(t,e){return null==t||t!=t?e:t},Tr.divide=uu,Tr.endsWith=function(t,e,r){t=ss(t),e=Kn(e);var n=t.length,i=r=void 0===r?n:Gr(ns(r),0,n);return(r-=e.length)>=0&&t.slice(r,i)==e},Tr.eq=Mo,Tr.escape=function(t){return(t=ss(t))&&z.test(t)?t.replace(D,De):t},Tr.escapeRegExp=function(t){return(t=ss(t))&&X.test(t)?t.replace(q,"\\$&"):t},Tr.every=function(t,e,r){var n=Io(t)?le:en;return r&&sa(t,e,r)&&(e=void 0),n(t,Ji(e,3))},Tr.find=io,Tr.findIndex=Ea,Tr.findKey=function(t,e){return _e(t,Ji(e,3),un)},Tr.findLast=ao,Tr.findLastIndex=Oa,Tr.findLastKey=function(t,e){return _e(t,Ji(e,3),ln)},Tr.floor=lu,Tr.forEach=oo,Tr.forEachRight=so,Tr.forIn=function(t,e){return null==t?t:on(t,Ji(e,3),bs)},Tr.forInRight=function(t,e){return null==t?t:sn(t,Ji(e,3),bs)},Tr.forOwn=function(t,e){return t&&un(t,Ji(e,3))},Tr.forOwnRight=function(t,e){return t&&ln(t,Ji(e,3))},Tr.get=gs,Tr.gt=Ao,Tr.gte=Eo,Tr.has=function(t,e){return null!=t&&na(t,e,gn)},Tr.hasIn=vs,Tr.head=Ba,Tr.identity=qs,Tr.includes=function(t,e,r,n){t=Wo(t)?t:Ms(t),r=r&&!n?ns(r):0;var i=t.length;return r<0&&(r=ar(i+r,0)),Jo(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&be(t,e,r)>-1},Tr.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=null==r?0:ns(r);return i<0&&(i=ar(n+i,0)),be(t,e,i)},Tr.inRange=function(t,e,r){return e=rs(e),void 0===r?(r=e,e=0):r=rs(r),function(t,e,r){return t>=or(e,r)&&t<ar(e,r)}(t=as(t),e,r)},Tr.invoke=_s,Tr.isArguments=Oo,Tr.isArray=Io,Tr.isArrayBuffer=Bo,Tr.isArrayLike=Wo,Tr.isArrayLikeObject=jo,Tr.isBoolean=function(t){return!0===t||!1===t||Uo(t)&&dn(t)==c},Tr.isBuffer=Do,Tr.isDate=$o,Tr.isElement=function(t){return Uo(t)&&1===t.nodeType&&!Xo(t)},Tr.isEmpty=function(t){if(null==t)return!0;if(Wo(t)&&(Io(t)||"string"==typeof t||"function"==typeof t.splice||Do(t)||Zo(t)||Oo(t)))return!t.length;var e=ra(t);if(e==g||e==_)return!t.size;if(ha(t))return!Cn(t).length;for(var r in t)if(Ct.call(t,r))return!1;return!0},Tr.isEqual=function(t,e){return wn(t,e)},Tr.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===n?wn(t,e,void 0,r):!!n},Tr.isError=zo,Tr.isFinite=function(t){return"number"==typeof t&&rr(t)},Tr.isFunction=Lo,Tr.isInteger=Ho,Tr.isLength=No,Tr.isMap=Vo,Tr.isMatch=function(t,e){return t===e||bn(t,e,Zi(e))},Tr.isMatchWith=function(t,e,r){return r="function"==typeof r?r:void 0,bn(t,e,Zi(e),r)},Tr.isNaN=function(t){return qo(t)&&t!=+t},Tr.isNative=function(t){if(ca(t))throw new ft("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kn(t)},Tr.isNil=function(t){return null==t},Tr.isNull=function(t){return null===t},Tr.isNumber=qo,Tr.isObject=Fo,Tr.isObjectLike=Uo,Tr.isPlainObject=Xo,Tr.isRegExp=Go,Tr.isSafeInteger=function(t){return Ho(t)&&t>=-9007199254740991&&t<=9007199254740991},Tr.isSet=Yo,Tr.isString=Jo,Tr.isSymbol=Ko,Tr.isTypedArray=Zo,Tr.isUndefined=function(t){return void 0===t},Tr.isWeakMap=function(t){return Uo(t)&&ra(t)==k},Tr.isWeakSet=function(t){return Uo(t)&&"[object WeakSet]"==dn(t)},Tr.join=function(t,e){return null==t?"":nr.call(t,e)},Tr.kebabCase=Is,Tr.last=$a,Tr.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=ns(r))<0?ar(n+i,0):or(i,n-1)),e==e?function(t,e,r){for(var n=r+1;n--;)if(t[n]===e)return n;return n}(t,e,i):we(t,xe,i,!0)},Tr.lowerCase=Bs,Tr.lowerFirst=Ws,Tr.lt=Qo,Tr.lte=ts,Tr.max=function(t){return t&&t.length?rn(t,qs,pn):void 0},Tr.maxBy=function(t,e){return t&&t.length?rn(t,Ji(e,2),pn):void 0},Tr.mean=function(t){return Ce(t,qs)},Tr.meanBy=function(t,e){return Ce(t,Ji(e,2))},Tr.min=function(t){return t&&t.length?rn(t,qs,Sn):void 0},Tr.minBy=function(t,e){return t&&t.length?rn(t,Ji(e,2),Sn):void 0},Tr.stubArray=iu,Tr.stubFalse=au,Tr.stubObject=function(){return{}},Tr.stubString=function(){return""},Tr.stubTrue=function(){return!0},Tr.multiply=hu,Tr.nth=function(t,e){return t&&t.length?En(t,ns(e)):void 0},Tr.noConflict=function(){return Xt._===this&&(Xt._=Mt),this},Tr.noop=Ks,Tr.now=go,Tr.pad=function(t,e,r){t=ss(t);var n=(e=ns(e))?Ve(t):0;if(!e||n>=e)return t;var i=(e-n)/2;return Oi(Qe(i),r)+t+Oi(Ze(i),r)},Tr.padEnd=function(t,e,r){t=ss(t);var n=(e=ns(e))?Ve(t):0;return e&&n<e?t+Oi(e-n,r):t},Tr.padStart=function(t,e,r){t=ss(t);var n=(e=ns(e))?Ve(t):0;return e&&n<e?Oi(e-n,r)+t:t},Tr.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),ur(ss(t).replace(Y,""),e||0)},Tr.random=function(t,e,r){if(r&&"boolean"!=typeof r&&sa(t,e,r)&&(e=r=void 0),void 0===r&&("boolean"==typeof e?(r=e,e=void 0):"boolean"==typeof t&&(r=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=rs(t),void 0===e?(e=t,t=0):e=rs(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var i=lr();return or(t+i*(e-t+Ft("1e-"+((i+"").length-1))),e)}return jn(t,e)},Tr.reduce=function(t,e,r){var n=Io(t)?ge:Te,i=arguments.length<3;return n(t,Ji(e,4),r,i,Qr)},Tr.reduceRight=function(t,e,r){var n=Io(t)?ve:Te,i=arguments.length<3;return n(t,Ji(e,4),r,i,tn)},Tr.repeat=function(t,e,r){return e=(r?sa(t,e,r):void 0===e)?1:ns(e),Dn(ss(t),e)},Tr.replace=function(){var t=arguments,e=ss(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Tr.result=function(t,e,r){var n=-1,i=(e=si(e,t)).length;for(i||(i=1,t=void 0);++n<i;){var a=null==t?void 0:t[Pa(e[n])];void 0===a&&(n=i,a=r),t=Lo(a)?a.call(t):a}return t},Tr.round=fu,Tr.runInContext=t,Tr.sample=function(t){return(Io(t)?$r:zn)(t)},Tr.size=function(t){if(null==t)return 0;if(Wo(t))return Jo(t)?Ve(t):t.length;var e=ra(t);return e==g||e==_?t.size:Cn(t).length},Tr.snakeCase=js,Tr.some=function(t,e,r){var n=Io(t)?me:qn;return r&&sa(t,e,r)&&(e=void 0),n(t,Ji(e,3))},Tr.sortedIndex=function(t,e){return Xn(t,e)},Tr.sortedIndexBy=function(t,e,r){return Gn(t,e,Ji(r,2))},Tr.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=Xn(t,e);if(n<r&&Mo(t[n],e))return n}return-1},Tr.sortedLastIndex=function(t,e){return Xn(t,e,!0)},Tr.sortedLastIndexBy=function(t,e,r){return Gn(t,e,Ji(r,2),!0)},Tr.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var r=Xn(t,e,!0)-1;if(Mo(t[r],e))return r}return-1},Tr.startCase=Ds,Tr.startsWith=function(t,e,r){return t=ss(t),r=null==r?0:Gr(ns(r),0,t.length),e=Kn(e),t.slice(r,r+e.length)==e},Tr.subtract=du,Tr.sum=function(t){return t&&t.length?Re(t,qs):0},Tr.sumBy=function(t,e){return t&&t.length?Re(t,Ji(e,2)):0},Tr.template=function(t,e,r){var n=Tr.templateSettings;r&&sa(t,e,r)&&(e=void 0),t=ss(t),e=cs({},e,n,Li);var i,a,o=cs({},e.imports,n.imports,Li),s=ws(o),u=Ee(o,s),l=0,c=e.interpolate||ct,h="__p += '",f=vt((e.escape||ct).source+"|"+c.source+"|"+(c===N?rt:ct).source+"|"+(e.evaluate||ct).source+"|$","g"),d="//# sourceURL="+(Ct.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++zt+"]")+"\n";t.replace(f,(function(e,r,n,o,s,u){return n||(n=o),h+=t.slice(l,u).replace(ht,$e),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),h+="';\n";var p=Ct.call(e,"variable")&&e.variable;p||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(I,""):h).replace(B,"$1").replace(W,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Hs((function(){return dt(s,d+"return "+h).apply(void 0,u)}));if(g.source=h,zo(g))throw g;return g},Tr.times=function(t,e){if((t=ns(t))<1||t>9007199254740991)return[];var r=4294967295,n=or(t,4294967295);t-=4294967295;for(var i=Me(n,e=Ji(e));++r<t;)e(r);return i},Tr.toFinite=rs,Tr.toInteger=ns,Tr.toLength=is,Tr.toLower=function(t){return ss(t).toLowerCase()},Tr.toNumber=as,Tr.toSafeInteger=function(t){return t?Gr(ns(t),-9007199254740991,9007199254740991):0===t?t:0},Tr.toString=ss,Tr.toUpper=function(t){return ss(t).toUpperCase()},Tr.trim=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(G,"");if(!t||!(e=Kn(e)))return t;var n=qe(t),i=qe(e);return li(n,Ie(n,i),Be(n,i)+1).join("")},Tr.trimEnd=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(J,"");if(!t||!(e=Kn(e)))return t;var n=qe(t);return li(n,0,Be(n,qe(e))+1).join("")},Tr.trimStart=function(t,e,r){if((t=ss(t))&&(r||void 0===e))return t.replace(Y,"");if(!t||!(e=Kn(e)))return t;var n=qe(t);return li(n,Ie(n,qe(e))).join("")},Tr.truncate=function(t,e){var r=30,n="...";if(Fo(e)){var i="separator"in e?e.separator:i;r="length"in e?ns(e.length):r,n="omission"in e?Kn(e.omission):n}var a=(t=ss(t)).length;if(ze(t)){var o=qe(t);a=o.length}if(r>=a)return t;var s=r-Ve(n);if(s<1)return n;var u=o?li(o,0,s).join(""):t.slice(0,s);if(void 0===i)return u+n;if(o&&(s+=u.length-s),Go(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=vt(i.source,ss(nt.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,void 0===h?s:h)}}else if(t.indexOf(Kn(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+n},Tr.unescape=function(t){return(t=ss(t))&&$.test(t)?t.replace(j,Xe):t},Tr.uniqueId=function(t){var e=++Pt;return ss(t)+e},Tr.upperCase=$s,Tr.upperFirst=zs,Tr.each=oo,Tr.eachRight=so,Tr.first=Ba,Js(Tr,(cu={},un(Tr,(function(t,e){Ct.call(Tr.prototype,e)||(cu[e]=t)})),cu),{chain:!1}),Tr.VERSION="4.17.15",se(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Tr[t].placeholder=Tr})),se(["drop","take"],(function(t,e){Er.prototype[t]=function(r){r=void 0===r?1:ar(ns(r),0);var n=this.__filtered__&&!e?new Er(this):this.clone();return n.__filtered__?n.__takeCount__=or(r,n.__takeCount__):n.__views__.push({size:or(r,4294967295),type:t+(n.__dir__<0?"Right":"")}),n},Er.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),se(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;Er.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Ji(t,3),type:r}),e.__filtered__=e.__filtered__||n,e}})),se(["head","last"],(function(t,e){var r="take"+(e?"Right":"");Er.prototype[t]=function(){return this[r](1).value()[0]}})),se(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");Er.prototype[t]=function(){return this.__filtered__?new Er(this):this[r](1)}})),Er.prototype.compact=function(){return this.filter(qs)},Er.prototype.find=function(t){return this.filter(t).head()},Er.prototype.findLast=function(t){return this.reverse().find(t)},Er.prototype.invokeMap=$n((function(t,e){return"function"==typeof t?new Er(this):this.map((function(r){return yn(r,t,e)}))})),Er.prototype.reject=function(t){return this.filter(Co(Ji(t)))},Er.prototype.slice=function(t,e){t=ns(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Er(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),void 0!==e&&(r=(e=ns(e))<0?r.dropRight(-e):r.take(e-t)),r)},Er.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Er.prototype.toArray=function(){return this.take(4294967295)},un(Er.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),i=Tr[n?"take"+("last"==e?"Right":""):e],a=n||/^find/.test(e);i&&(Tr.prototype[e]=function(){var e=this.__wrapped__,o=n?[1]:arguments,s=e instanceof Er,u=o[0],l=s||Io(e),c=function(t){var e=i.apply(Tr,pe([t],o));return n&&h?e[0]:e};l&&r&&"function"==typeof u&&1!=u.length&&(s=l=!1);var h=this.__chain__,f=!!this.__actions__.length,d=a&&!h,p=s&&!f;if(!a&&l){e=p?e:new Er(this);var g=t.apply(e,o);return g.__actions__.push({func:eo,args:[c],thisArg:void 0}),new Ar(g,h)}return d&&p?t.apply(this,o):(g=this.thru(c),d?n?g.value()[0]:g.value():g)})})),se(["pop","push","shift","sort","splice","unshift"],(function(t){var e=_t[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);Tr.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var i=this.value();return e.apply(Io(i)?i:[],t)}return this[r]((function(r){return e.apply(Io(r)?r:[],t)}))}})),un(Er.prototype,(function(t,e){var r=Tr[e];if(r){var n=r.name+"";Ct.call(yr,n)||(yr[n]=[]),yr[n].push({name:e,func:r})}})),yr[Ri(void 0,2).name]=[{name:"wrapper",func:void 0}],Er.prototype.clone=function(){var t=new Er(this.__wrapped__);return t.__actions__=mi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=mi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=mi(this.__views__),t},Er.prototype.reverse=function(){if(this.__filtered__){var t=new Er(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Er.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=Io(t),n=e<0,i=r?t.length:0,a=function(t,e,r){var n=-1,i=r.length;for(;++n<i;){var a=r[n],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=or(e,t+o);break;case"takeRight":t=ar(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=n?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=or(u,this.__takeCount__);if(!r||!n&&i==u&&d==u)return ri(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[l+=e];++g<h;){var m=c[g],y=m.iteratee,_=m.type,w=y(v);if(2==_)v=w;else if(!w){if(1==_)continue t;break t}}p[f++]=v}return p},Tr.prototype.at=ro,Tr.prototype.chain=function(){return to(this)},Tr.prototype.commit=function(){return new Ar(this.value(),this.__chain__)},Tr.prototype.next=function(){void 0===this.__values__&&(this.__values__=es(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},Tr.prototype.plant=function(t){for(var e,r=this;r instanceof Mr;){var n=Ta(r);n.__index__=0,n.__values__=void 0,e?i.__wrapped__=n:e=n;var i=n;r=r.__wrapped__}return i.__wrapped__=t,e},Tr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Er){var e=t;return this.__actions__.length&&(e=new Er(this)),(e=e.reverse()).__actions__.push({func:eo,args:[Na],thisArg:void 0}),new Ar(e,this.__chain__)}return this.thru(Na)},Tr.prototype.toJSON=Tr.prototype.valueOf=Tr.prototype.value=function(){return ri(this.__wrapped__,this.__actions__)},Tr.prototype.first=Tr.prototype.head,Zt&&(Tr.prototype[Zt]=function(){return this}),Tr}();Xt._=Ge,void 0===(i=function(){return Ge}.call(e,r,e,n))||(n.exports=i)}).call(this)}).call(this,r(10),r(11)(t))},function(t,e,r){"use strict";r.r(e),r.d(e,"fromString",(function(){return a})),r.d(e,"add",(function(){return o})),r.d(e,"add_",(function(){return s})),r.d(e,"multiply",(function(){return u})),r.d(e,"multiply_",(function(){return l})),r.d(e,"interpolate",(function(){return c})),r.d(e,"lerp",(function(){return h})),r.d(e,"interpolateHSL",(function(){return f})),r.d(e,"lerpHSL",(function(){return d})),r.d(e,"randomize",(function(){return p})),r.d(e,"rgb2hsl",(function(){return g})),r.d(e,"hsl2rgb",(function(){return m})),r.d(e,"toRGB",(function(){return y})),r.d(e,"toHex",(function(){return _}));var n=r(1),i=r(0);function a(t){let e,r;if(t in w)e=w[t];else{if("#"==t.charAt(0)){let r=(t.match(/[0-9a-f]/gi)||[]).map(t=>parseInt(t,16));if(3==r.length)e=r.map(t=>17*t);else{for(let t=0;t<3;t++)r[t+1]+=16*r[t],r.splice(t,1);e=r}}else e=(r=t.match(/rgb\(([0-9, ]+)\)/i))?r[1].split(/\s*,\s*/).map(t=>parseInt(t)):[0,0,0];w[t]=e}return e.slice()}function o(t,...e){let r=t.slice();for(let t=0;t<3;t++)for(let n=0;n<e.length;n++)r[t]+=e[n][t];return r}function s(t,...e){for(let r=0;r<3;r++)for(let n=0;n<e.length;n++)t[r]+=e[n][r];return t}function u(t,...e){let r=t.slice();for(let t=0;t<3;t++){for(let n=0;n<e.length;n++)r[t]*=e[n][t]/255;r[t]=Math.round(r[t])}return r}function l(t,...e){for(let r=0;r<3;r++){for(let n=0;n<e.length;n++)t[r]*=e[n][r]/255;t[r]=Math.round(t[r])}return t}function c(t,e,r=.5){let n=t.slice();for(let i=0;i<3;i++)n[i]=Math.round(n[i]+r*(e[i]-t[i]));return n}const h=c;function f(t,e,r=.5){let n=g(t),i=g(e);for(let t=0;t<3;t++)n[t]+=r*(i[t]-n[t]);return m(n)}const d=f;function p(t,e){e instanceof Array||(e=Math.round(i.a.getNormal(0,e)));let r=t.slice();for(let t=0;t<3;t++)r[t]+=e instanceof Array?Math.round(i.a.getNormal(0,e[t])):e;return r}function g(t){let e,r=t[0]/255,n=t[1]/255,i=t[2]/255,a=Math.max(r,n,i),o=Math.min(r,n,i),s=0,u=(a+o)/2;if(a==o)e=0;else{let t=a-o;switch(e=u>.5?t/(2-a-o):t/(a+o),a){case r:s=(n-i)/t+(n<i?6:0);break;case n:s=(i-r)/t+2;break;case i:s=(r-n)/t+4}s/=6}return[s,e,u]}function v(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function m(t){let e=t[2];if(0==t[1])return e=Math.round(255*e),[e,e,e];{let r=t[1],n=e<.5?e*(1+r):e+r-e*r,i=2*e-n,a=v(i,n,t[0]+1/3),o=v(i,n,t[0]),s=v(i,n,t[0]-1/3);return[Math.round(255*a),Math.round(255*o),Math.round(255*s)]}}function y(t){return`rgb(${t.map(t=>Object(n.clamp)(t,0,255)).join(",")})`}function _(t){return`#${t.map(t=>Object(n.clamp)(t,0,255).toString(16).padStart(2,"0")).join("")}`}const w={black:[0,0,0],navy:[0,0,128],darkblue:[0,0,139],mediumblue:[0,0,205],blue:[0,0,255],darkgreen:[0,100,0],green:[0,128,0],teal:[0,128,128],darkcyan:[0,139,139],deepskyblue:[0,191,255],darkturquoise:[0,206,209],mediumspringgreen:[0,250,154],lime:[0,255,0],springgreen:[0,255,127],aqua:[0,255,255],cyan:[0,255,255],midnightblue:[25,25,112],dodgerblue:[30,144,255],forestgreen:[34,139,34],seagreen:[46,139,87],darkslategray:[47,79,79],darkslategrey:[47,79,79],limegreen:[50,205,50],mediumseagreen:[60,179,113],turquoise:[64,224,208],royalblue:[65,105,225],steelblue:[70,130,180],darkslateblue:[72,61,139],mediumturquoise:[72,209,204],indigo:[75,0,130],darkolivegreen:[85,107,47],cadetblue:[95,158,160],cornflowerblue:[100,149,237],mediumaquamarine:[102,205,170],dimgray:[105,105,105],dimgrey:[105,105,105],slateblue:[106,90,205],olivedrab:[107,142,35],slategray:[112,128,144],slategrey:[112,128,144],lightslategray:[119,136,153],lightslategrey:[119,136,153],mediumslateblue:[123,104,238],lawngreen:[124,252,0],chartreuse:[127,255,0],aquamarine:[127,255,212],maroon:[128,0,0],purple:[128,0,128],olive:[128,128,0],gray:[128,128,128],grey:[128,128,128],skyblue:[135,206,235],lightskyblue:[135,206,250],blueviolet:[138,43,226],darkred:[139,0,0],darkmagenta:[139,0,139],saddlebrown:[139,69,19],darkseagreen:[143,188,143],lightgreen:[144,238,144],mediumpurple:[147,112,216],darkviolet:[148,0,211],palegreen:[152,251,152],darkorchid:[153,50,204],yellowgreen:[154,205,50],sienna:[160,82,45],brown:[165,42,42],darkgray:[169,169,169],darkgrey:[169,169,169],lightblue:[173,216,230],greenyellow:[173,255,47],paleturquoise:[175,238,238],lightsteelblue:[176,196,222],powderblue:[176,224,230],firebrick:[178,34,34],darkgoldenrod:[184,134,11],mediumorchid:[186,85,211],rosybrown:[188,143,143],darkkhaki:[189,183,107],silver:[192,192,192],mediumvioletred:[199,21,133],indianred:[205,92,92],peru:[205,133,63],chocolate:[210,105,30],tan:[210,180,140],lightgray:[211,211,211],lightgrey:[211,211,211],palevioletred:[216,112,147],thistle:[216,191,216],orchid:[218,112,214],goldenrod:[218,165,32],crimson:[220,20,60],gainsboro:[220,220,220],plum:[221,160,221],burlywood:[222,184,135],lightcyan:[224,255,255],lavender:[230,230,250],darksalmon:[233,150,122],violet:[238,130,238],palegoldenrod:[238,232,170],lightcoral:[240,128,128],khaki:[240,230,140],aliceblue:[240,248,255],honeydew:[240,255,240],azure:[240,255,255],sandybrown:[244,164,96],wheat:[245,222,179],beige:[245,245,220],whitesmoke:[245,245,245],mintcream:[245,255,250],ghostwhite:[248,248,255],salmon:[250,128,114],antiquewhite:[250,235,215],linen:[250,240,230],lightgoldenrodyellow:[250,250,210],oldlace:[253,245,230],red:[255,0,0],fuchsia:[255,0,255],magenta:[255,0,255],deeppink:[255,20,147],orangered:[255,69,0],tomato:[255,99,71],hotpink:[255,105,180],coral:[255,127,80],darkorange:[255,140,0],lightsalmon:[255,160,122],orange:[255,165,0],lightpink:[255,182,193],pink:[255,192,203],gold:[255,215,0],peachpuff:[255,218,185],navajowhite:[255,222,173],moccasin:[255,228,181],bisque:[255,228,196],mistyrose:[255,228,225],blanchedalmond:[255,235,205],papayawhip:[255,239,213],lavenderblush:[255,240,245],seashell:[255,245,238],cornsilk:[255,248,220],lemonchiffon:[255,250,205],floralwhite:[255,250,240],snow:[255,250,250],yellow:[255,255,0],lightyellow:[255,255,224],ivory:[255,255,240],white:[255,255,255]}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));class n{getContainer(){return null}setOptions(t){this._options=t}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o}));var n=r(4),i=r(3);function a(t){let e=i.fromString(t);return 36*Math.floor(e[0]*(6/256))+6*Math.floor(e[1]*(6/256))+1*Math.floor(e[2]*(6/256))+16}class o extends n.a{constructor(){super(),this._offset=[0,0],this._cursor=[-1,-1],this._lastColor=""}schedule(t){setTimeout(t,1e3/60)}setOptions(t){super.setOptions(t);let e=[t.width,t.height],r=this.computeSize();this._offset=r.map((t,r)=>Math.floor((t-e[r])/2))}clear(){t.stdout.write(`[0;48;5;${a(this._options.bg)}m[2J`)}draw(e,r){let[n,i,o,s,u]=e,l=this._offset[0]+n,c=this._offset[1]+i,h=this.computeSize();if(l<0||l>=h[0])return;if(c<0||c>=h[1])return;if(l===this._cursor[0]&&c===this._cursor[1]||(t.stdout.write(function(t,e){return`[${e+1};${t+1}H`}(l,c)),this._cursor[0]=l,this._cursor[1]=c),r&&(o||(o=" ")),!o)return;let f=function(t,e){return`[0;38;5;${a(t)};48;5;${a(e)}m`}(s,u);f!==this._lastColor&&(t.stdout.write(f),this._lastColor=f);let d=[].concat(o);t.stdout.write(d[0]),this._cursor[0]++,this._cursor[0]>=h[0]&&(this._cursor[0]=0,this._cursor[1]++)}computeFontSize(){throw new Error("Terminal backend has no notion of font size")}eventToPosition(t,e){return[t,e]}computeSize(){return[t.stdout.columns,t.stdout.rows]}}}).call(this,r(9))},function(t,e){t.exports=function(t,e,r,n,i){if(!i){var a=[];i=function(t,e){a.push({x:t,y:e})}}var o=r-t,s=n-e,u=Math.abs(o),l=Math.abs(s),c=0,h=o>0?1:-1,f=s>0?1:-1;if(u>l)for(var d=t,p=e;h<0?d>=r:d<=r;d+=h)i(d,p),(c+=l)<<1>=u&&(p+=f,c-=u);else for(d=t,p=e;f<0?p>=n:p<=n;p+=f)i(d,p),(c+=u)<<1>=l&&(d+=h,c-=l);return a}},function(t,e){t.exports=function*(t,e,r,n){var i=r-t,a=n-e,o=Math.abs(i),s=Math.abs(a),u=0,l=i>0?1:-1,c=a>0?1:-1;if(o>s)for(var h=t,f=e;l<0?h>=r:h<=r;h+=l)yield{x:h,y:f},(u+=s)<<1>=o&&(f+=c,u-=o);else for(h=t,f=e;c<0?f>=n:f<=n;f+=c)yield{x:h,y:f},(u+=o)<<1>=s&&(h+=l,u-=s)}},function(t,e){const r=["C","D","H","S"],n=["1","2","3","4","5","6","7","8","9","10","J","Q","K","A"];function i(t,e){const r=function(t,e){let r,n;const i={suits:[0,0,0,0],rank:[0,0,0,0,0,0,0,0,0,0,0,0,0,0],wildCards:0};for(r=0;r<t.length;r++)if(e.wildCards.indexOf(t[r].toUpperCase())>=0)i.wildCards++;else{if(n=s(t[r]),!n)return null;i.suits[n.suit]++,i.rank[n.rank-1]++,14==n.rank&&e.aceCanBeLow&&(i.rank[0]=1)}return i.cards=t,i}(t,e);let i,a;if(r){const t=function(t,e){const r={};if(Math.max.apply(null,t.suits)+t.wildCards>=e.cardsToEvaluate){if(r.isFlush=!0,e.getDetails){const n=[];c(n,t,e),function(t,e,r,n){let i,a;for(a=0;a<e.suits.length;a++)e.suits[a]===n&&(i=a);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&s(e).suit===i&&t.push(e)})}(n,t,e,Math.max.apply(null,t.suits)),r.cards=n}}else r.isFlush=!1;return r}(r,e),o=function(t,e){let r,n=0,i=0,a=t.wildCards;const o={};for(r=0;r<t.rank.length;r++)t.rank[r]?i++:i>0&&a>0?(a--,i++):(i>=e.cardsToEvaluate&&(n=r),i=0,a=t.wildCards);i+a>=e.cardsToEvaluate&&(n=t.rank.length);if(o.hiCard=n,n&&e.getDetails){const r=[],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0];c(r,t,e),t.cards.map(t=>{let a=s(t).rank-1;13===a&&n===e.cardsToEvaluate&&(a=0),r.length<e.cardsToEvaluate&&e.wildCards.indexOf(t.toUpperCase())<0&&a<=n&&a>=n-e.cardsToEvaluate&&!i[a]&&(r.push(t),i[a]=1)}),o.cards=r}return o}(r,e),h=function(t,e){let r=Math.max.apply(null,t.rank)+t.wildCards;const n={};r>t.cardsToEvaluate&&(r=t.cardsToEvaluate);if(e.getDetails){const r=[];c(r,t,e),l(r,t,e,Math.max.apply(null,t.rank)),n.cards=r}return n.maxLike=r,n}(r,e);if(5===h.maxLike)a="5ofakind",i=h.cards;else if(t.isFlush&&14===o.hiCard&&e.dontAllow.indexOf("royalflush")<0)a="royalflush",i=t.cards;else if(t.isFlush&&o.hiCard>0&&e.dontAllow.indexOf("straightflush")<0)a="straightflush",i=t.cards;else if(4===h.maxLike&&e.dontAllow.indexOf("4ofakind")<0)a="4ofakind",i=h.cards;else{const s=function(t,e){const r={isFullHouse:!1};if(e.cardsToEvaluate>=5)if(t.rank.indexOf(3)>=0){if(t.rank.indexOf(2)>=0&&(r.isFullHouse=!0,e.getDetails)){const n=[];l(n,t,e,3),l(n,t,e,2),r.cards=n}}else if(t.wildCards>0){const n=u(t,e);n.isTwoPair&&(r.isFullHouse=!0,e.getDetails&&(r.cards=n.cards,c(r.cards,t,e)))}return r}(r,e);if(s.isFullHouse&&e.dontAllow.indexOf("fullhouse")<0)a="fullhouse",i=s.cards;else if(t.isFlush&&e.dontAllow.indexOf("flush")<0)a="flush",i=t.cards;else if(o.hiCard>0&&e.dontAllow.indexOf("straight")<0)a="straight",i=o.cards;else if(3===h.maxLike&&e.dontAllow.indexOf("3ofakind")<0)a="3ofakind",i=h.cards;else{const t=u(r,e);if(t.isTwoPair&&e.dontAllow.indexOf("2pair")<0)a="2pair",i=t.cards;else if(2===h.maxLike&&e.dontAllow.indexOf("pair")<0){if(e.minPair){(function(t){const e=t.rank.indexOf(2,1);if(e>-1)return e+1;let r;for(r=t.rank.length-1;r--;r>0)if(t.rank[r])return r;return})(r)>=n.indexOf(e.minPair)+1&&(a="minpair")}a||(a="pair"),i=h.cards}else a="nothing",i=[]}}}else a="error";return e.getDetails?{match:a,cards:i}:a}function a(t,e){const i={aceCanBeLow:!1,wildCards:["JOKER"],cardsToEvaluate:5,dontAllow:[]};if(e&&(e.hasOwnProperty("aceCanBeLow")&&(i.aceCanBeLow=e.aceCanBeLow),e.hasOwnProperty("cardsToEvaluate")&&(i.cardsToEvaluate=e.cardsToEvaluate),e.hasOwnProperty("dontAllow")&&(i.dontAllow=e.dontAllow),e.hasOwnProperty("minPair")&&n.indexOf(e.minPair.toUpperCase())>-1&&(i.minPair=e.minPair.toUpperCase()),e.hasOwnProperty("wildCards"))){let t,n,a;for(t=0;t<e.wildCards.length;t++){const u=e.wildCards[t].toUpperCase();"JOKER"!==u&&(n=s(u),n?i.wildCards.push(u):(a=o(u),a>0&&r.map(t=>i.wildCards.push(u+t))))}}return i.cardsToEvaluate>t.length&&(i.cardsToEvaluate=t.length),i.cardsToEvaluate>5&&(i.cardsToEvaluate=5),i}function o(t){let e;return"10"===t?e=10:1===t.length&&(e=n.indexOf(t.toUpperCase())+1,e<2&&(e=void 0)),e}function s(t){const e={rank:0,suit:0};let n;if("10"===t.substring(0,2))e.rank=10,n=t.substring(2,t.length);else{if(2!==t.length)return;{const r=o(t.substring(0,1));if(void 0===r||r<2)return;e.rank=r,n=t.substring(1,2)}}if(e.suit=r.indexOf(n.toUpperCase()),!(e.suit<0))return e}function u(t,e){const r={};if(r.isTwoPair=t.rank.reduce((t,e)=>2===e?t+1:t,0)>=2,r.isTwoPair&&e.getDetails){const n=JSON.parse(JSON.stringify(t)),i=[];l(i,n,e,2),n.rank[s(i[0]).rank-1]=0,l(i,n,e,2),r.cards=i}return r}function l(t,e,r,n){let i,a;for(a=0;a<e.rank.length;a++)e.rank[a]===n&&(i=a);e.cards.map(e=>{t.length<r.cardsToEvaluate&&r.wildCards.indexOf(e.toUpperCase())<0&&s(e).rank-1===i&&t.push(e)})}function c(t,e,r){e.cards.map(e=>{r.wildCards.indexOf(e.toUpperCase())>=0&&t.length<r.cardsToEvaluate&&t.push(e)})}t.exports={evaluateHand:function(t,e){return i(t,a(t,e))},evaluateAndFindCards:function(t,e){const r=a(t,e);return r.getDetails=!0,i(t,r)}}},function(t,e){var r,n,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||c||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"TYPE_TEXT",(function(){return w})),r.d(n,"TYPE_NEWLINE",(function(){return b})),r.d(n,"TYPE_FG",(function(){return k})),r.d(n,"TYPE_BG",(function(){return x})),r.d(n,"measure",(function(){return C})),r.d(n,"tokenize",(function(){return P}));r(0);var i=r(4);class a extends i.a{constructor(){super(),this._ctx=document.createElement("canvas").getContext("2d")}schedule(t){requestAnimationFrame(t)}getContainer(){return this._ctx.canvas}setOptions(t){super.setOptions(t);const e=`${t.fontStyle?`${t.fontStyle} `:""} ${t.fontSize}px ${t.fontFamily}`;this._ctx.font=e,this._updateSize(),this._ctx.font=e,this._ctx.textAlign="center",this._ctx.textBaseline="middle"}clear(){this._ctx.fillStyle=this._options.bg,this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}eventToPosition(t,e){let r=this._ctx.canvas,n=r.getBoundingClientRect();return t-=n.left,e-=n.top,t*=r.width/n.width,e*=r.height/n.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}}var o=r(1);class s extends a{constructor(){super(),this._spacingX=0,this._spacingY=0,this._hexSize=0}draw(t,e){let[r,n,i,a,o]=t,s=[(r+1)*this._spacingX,n*this._spacingY+this._hexSize];if(this._options.transpose&&s.reverse(),e&&(this._ctx.fillStyle=o,this._fill(s[0],s[1])),!i)return;this._ctx.fillStyle=a;let u=[].concat(i);for(let t=0;t<u.length;t++)this._ctx.fillText(u[t],s[0],Math.ceil(s[1]))}computeSize(t,e){return this._options.transpose&&(t+=e,t-=e=t-e),[Math.floor(t/this._spacingX)-1,Math.floor((e-2*this._hexSize)/this._spacingY+1)]}computeFontSize(t,e){this._options.transpose&&(t+=e,t-=e=t-e);let r=2*t/((this._options.width+1)*Math.sqrt(3))-1,n=e/(2+1.5*(this._options.height-1)),i=Math.min(r,n),a=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let o=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=a;let s=o/100;i=Math.floor(i)+1;let u=2*i/(this._options.spacing*(1+s/Math.sqrt(3)));return Math.ceil(u)-1}_normalizedEventToPosition(t,e){let r;this._options.transpose?(t+=e,t-=e=t-e,r=this._ctx.canvas.width):r=this._ctx.canvas.height;let n=r/this._options.height;return e=Math.floor(e/n),Object(o.mod)(e,2)?(t-=this._spacingX,t=1+2*Math.floor(t/(2*this._spacingX))):t=2*Math.floor(t/(2*this._spacingX)),[t,e]}_fill(t,e){let r=this._hexSize,n=this._options.border;const i=this._ctx;i.beginPath(),this._options.transpose?(i.moveTo(t-r+n,e),i.lineTo(t-r/2+n,e+this._spacingX-n),i.lineTo(t+r/2-n,e+this._spacingX-n),i.lineTo(t+r-n,e),i.lineTo(t+r/2-n,e-this._spacingX+n),i.lineTo(t-r/2+n,e-this._spacingX+n),i.lineTo(t-r+n,e)):(i.moveTo(t,e-r+n),i.lineTo(t+this._spacingX-n,e-r/2+n),i.lineTo(t+this._spacingX-n,e+r/2-n),i.lineTo(t,e+r-n),i.lineTo(t-this._spacingX+n,e+r/2-n),i.lineTo(t-this._spacingX+n,e-r/2+n),i.lineTo(t,e-r+n)),i.fill()}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);let r,n;this._hexSize=Math.floor(t.spacing*(t.fontSize+e/Math.sqrt(3))/2),this._spacingX=this._hexSize*Math.sqrt(3)/2,this._spacingY=1.5*this._hexSize,t.transpose?(r="height",n="width"):(r="width",n="height"),this._ctx.canvas[r]=Math.ceil((t.width+1)*this._spacingX),this._ctx.canvas[n]=Math.ceil((t.height-1)*this._spacingY+2*this._hexSize)}}class u extends a{constructor(){super(),this._spacingX=0,this._spacingY=0,this._canvasCache={}}setOptions(t){super.setOptions(t),this._canvasCache={}}draw(t,e){u.cache?this._drawWithCache(t):this._drawNoCache(t,e)}_drawWithCache(t){let e,[r,n,i,a,o]=t,s=""+i+a+o;if(s in this._canvasCache)e=this._canvasCache[s];else{let t=this._options.border;e=document.createElement("canvas");let r=e.getContext("2d");if(e.width=this._spacingX,e.height=this._spacingY,r.fillStyle=o,r.fillRect(t,t,e.width-t,e.height-t),i){r.fillStyle=a,r.font=this._ctx.font,r.textAlign="center",r.textBaseline="middle";let t=[].concat(i);for(let e=0;e<t.length;e++)r.fillText(t[e],this._spacingX/2,Math.ceil(this._spacingY/2))}this._canvasCache[s]=e}this._ctx.drawImage(e,r*this._spacingX,n*this._spacingY)}_drawNoCache(t,e){let[r,n,i,a,o]=t;if(e){let t=this._options.border;this._ctx.fillStyle=o,this._ctx.fillRect(r*this._spacingX+t,n*this._spacingY+t,this._spacingX-t,this._spacingY-t)}if(!i)return;this._ctx.fillStyle=a;let s=[].concat(i);for(let t=0;t<s.length;t++)this._ctx.fillText(s[t],(r+.5)*this._spacingX,Math.ceil((n+.5)*this._spacingY))}computeSize(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}computeFontSize(t,e){let r=Math.floor(t/this._options.width),n=Math.floor(e/this._options.height),i=this._ctx.font;this._ctx.font="100px "+this._options.fontFamily;let a=Math.ceil(this._ctx.measureText("W").width);this._ctx.font=i;let o=a/100*n/r;return o>1&&(n=Math.floor(n/o)),Math.floor(n/this._options.spacing)}_normalizedEventToPosition(t,e){return[Math.floor(t/this._spacingX),Math.floor(e/this._spacingY)]}_updateSize(){const t=this._options,e=Math.ceil(this._ctx.measureText("W").width);this._spacingX=Math.ceil(t.spacing*e),this._spacingY=Math.ceil(t.spacing*t.fontSize),t.forceSquareRatio&&(this._spacingX=this._spacingY=Math.max(this._spacingX,this._spacingY)),this._ctx.canvas.width=t.width*this._spacingX,this._ctx.canvas.height=t.height*this._spacingY}}u.cache=!1;class l extends a{constructor(){super(),this._colorCanvas=document.createElement("canvas")}draw(t,e){let[r,n,i,a,o]=t,s=this._options.tileWidth,u=this._options.tileHeight;if(e&&(this._options.tileColorize?this._ctx.clearRect(r*s,n*u,s,u):(this._ctx.fillStyle=o,this._ctx.fillRect(r*s,n*u,s,u))),!i)return;let l=[].concat(i),c=[].concat(a),h=[].concat(o);for(let t=0;t<l.length;t++){let e=this._options.tileMap[l[t]];if(!e)throw new Error(`Char "${l[t]}" not found in tileMap`);if(this._options.tileColorize){let i=this._colorCanvas,a=i.getContext("2d");a.globalCompositeOperation="source-over",a.clearRect(0,0,s,u);let o=c[t],l=h[t];a.drawImage(this._options.tileSet,e[0],e[1],s,u,0,0,s,u),"transparent"!=o&&(a.fillStyle=o,a.globalCompositeOperation="source-atop",a.fillRect(0,0,s,u)),"transparent"!=l&&(a.fillStyle=l,a.globalCompositeOperation="destination-over",a.fillRect(0,0,s,u)),this._ctx.drawImage(i,r*s,n*u,s,u)}else this._ctx.drawImage(this._options.tileSet,e[0],e[1],s,u,r*s,n*u,s,u)}}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._options;this._ctx.canvas.width=t.width*t.tileWidth,this._ctx.canvas.height=t.height*t.tileHeight,this._colorCanvas.width=t.tileWidth,this._colorCanvas.height=t.tileHeight}}var c=r(3);class h extends i.a{static isSupported(){return!!document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0})}constructor(){super(),this._uniforms={};try{this._gl=this._initWebGL()}catch(t){alert(t.message)}}schedule(t){requestAnimationFrame(t)}getContainer(){return this._gl.canvas}setOptions(t){super.setOptions(t),this._updateSize();let e=this._options.tileSet;e&&"complete"in e&&!e.complete?e.addEventListener("load",()=>this._updateTexture(e)):this._updateTexture(e)}draw(t,e){const r=this._gl,n=this._options;let[i,a,o,s,u]=t,l=r.canvas.height-(a+1)*n.tileHeight;if(r.scissor(i*n.tileWidth,l,n.tileWidth,n.tileHeight),e&&(n.tileColorize?r.clearColor(0,0,0,0):r.clearColor(...v(u)),r.clear(r.COLOR_BUFFER_BIT)),!o)return;let c=[].concat(o),h=[].concat(u),f=[].concat(s);r.uniform2fv(this._uniforms.targetPosRel,[i,a]);for(let t=0;t<c.length;t++){let e=this._options.tileMap[c[t]];if(!e)throw new Error(`Char "${c[t]}" not found in tileMap`);r.uniform1f(this._uniforms.colorize,n.tileColorize?1:0),r.uniform2fv(this._uniforms.tilesetPosAbs,e),n.tileColorize&&(r.uniform4fv(this._uniforms.tint,v(f[t])),r.uniform4fv(this._uniforms.bg,v(h[t]))),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}clear(){const t=this._gl;t.clearColor(...v(this._options.bg)),t.scissor(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT)}computeSize(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}computeFontSize(){throw new Error("Tile backend does not understand font size")}eventToPosition(t,e){let r=this._gl.canvas,n=r.getBoundingClientRect();return t-=n.left,e-=n.top,t*=r.width/n.width,e*=r.height/n.height,t<0||e<0||t>=r.width||e>=r.height?[-1,-1]:this._normalizedEventToPosition(t,e)}_initWebGL(){let t=document.createElement("canvas").getContext("webgl2",{preserveDrawingBuffer:!0});window.gl=t;let e=function(t,e,r){const n=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n)||"");const i=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(i)||"");const a=t.createProgram();if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(a)||"");return a}(t,d,p);return t.useProgram(e),function(t){const e=new Float32Array([0,0,1,0,0,1,1,1]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.enableVertexAttribArray(0),t.vertexAttribPointer(0,2,t.FLOAT,!1,0,0)}(t),f.forEach(r=>this._uniforms[r]=t.getUniformLocation(e,r)),this._program=e,t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.SCISSOR_TEST),t}_normalizedEventToPosition(t,e){return[Math.floor(t/this._options.tileWidth),Math.floor(e/this._options.tileHeight)]}_updateSize(){const t=this._gl,e=this._options,r=[e.width*e.tileWidth,e.height*e.tileHeight];t.canvas.width=r[0],t.canvas.height=r[1],t.viewport(0,0,r[0],r[1]),t.uniform2fv(this._uniforms.tileSize,[e.tileWidth,e.tileHeight]),t.uniform2fv(this._uniforms.targetSize,r)}_updateTexture(t){!function(t,e){let r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}(this._gl,t)}}const f=["targetPosRel","tilesetPosAbs","tileSize","targetSize","colorize","bg","tint"],d="\n#version 300 es\n\nin vec2 tilePosRel;\nout vec2 tilesetPosPx;\n\nuniform vec2 tilesetPosAbs;\nuniform vec2 tileSize;\nuniform vec2 targetSize;\nuniform vec2 targetPosRel;\n\nvoid main() {\n\tvec2 targetPosPx = (targetPosRel + tilePosRel) * tileSize;\n\tvec2 targetPosNdc = ((targetPosPx / targetSize)-0.5)*2.0;\n\ttargetPosNdc.y *= -1.0;\n\n\tgl_Position = vec4(targetPosNdc, 0.0, 1.0);\n\ttilesetPosPx = tilesetPosAbs + tilePosRel * tileSize;\n}".trim(),p="\n#version 300 es\nprecision highp float;\n\nin vec2 tilesetPosPx;\nout vec4 fragColor;\nuniform sampler2D image;\nuniform bool colorize;\nuniform vec4 bg;\nuniform vec4 tint;\n\nvoid main() {\n\tfragColor = vec4(0, 0, 0, 1);\n\n\tvec4 texel = texelFetch(image, ivec2(tilesetPosPx), 0);\n\n\tif (colorize) {\n\t\ttexel.rgb = tint.a * tint.rgb + (1.0-tint.a) * texel.rgb;\n\t\tfragColor.rgb = texel.a*texel.rgb + (1.0-texel.a)*bg.rgb;\n\t\tfragColor.a = texel.a + (1.0-texel.a)*bg.a;\n\t} else {\n\t\tfragColor = texel;\n\t}\n}".trim();let g={};function v(t){if(!(t in g)){let e;if("transparent"==t)e=[0,0,0,0];else if(t.indexOf("rgba")>-1){e=(t.match(/[\d.]+/g)||[]).map(Number);for(let t=0;t<3;t++)e[t]=e[t]/255}else e=c.fromString(t).map(t=>t/255),e.push(1);g[t]=e}return g[t]}var m=r(5);const y=/%([bc]){([^}]*)}/g,w=0,b=1,k=2,x=3;function C(t,e){let r={width:0,height:1},n=P(t,e),i=0;for(let t=0;t<n.length;t++){let e=n[t];switch(e.type){case w:i+=e.value.length;break;case b:r.height++,r.width=Math.max(r.width,i),i=0}}return r.width=Math.max(r.width,i),r}function P(t,e){let r=[],n=0;t.replace(y,(function(e,i,a,o){let s=t.substring(n,o);return s.length&&r.push({type:w,value:s}),r.push({type:"c"==i?k:x,value:a.trim()}),n=o+e.length,""}));let i=t.substring(n);return i.length&&r.push({type:w,value:i}),function(t,e){e||(e=1/0);let r=0,n=0,i=-1;for(;r<t.length;){let a=t[r];if(a.type==b&&(n=0,i=-1),a.type!=w){r++;continue}for(;0==n&&" "==a.value.charAt(0);)a.value=a.value.substring(1);let o=a.value.indexOf("\n");if(-1!=o){a.value=S(t,r,o,!0);let e=a.value.split("");for(;e.length&&" "==e[e.length-1];)e.pop();a.value=e.join("")}if(a.value.length){if(n+a.value.length>e){let o=-1;for(;;){let t=a.value.indexOf(" ",o+1);if(-1==t)break;if(n+t>e)break;o=t}if(-1!=o)a.value=S(t,r,o,!0);else if(-1!=i){let e=t[i],n=e.value.lastIndexOf(" ");e.value=S(t,i,n,!0),r=i}else a.value=S(t,r,e-n,!1)}else n+=a.value.length,-1!=a.value.indexOf(" ")&&(i=r);r++}else t.splice(r,1)}t.push({type:b});let a=null;for(let e=0;e<t.length;e++){let r=t[e];switch(r.type){case w:a=r;break;case b:if(a){let t=a.value.split("");for(;t.length&&" "==t[t.length-1];)t.pop();a.value=t.join("")}a=null}}return t.pop(),t}(r,e)}function S(t,e,r,n){let i={type:b},a={type:w,value:t[e].value.substring(r+(n?1:0))};return t.splice(e+1,0,i,a),t[e].value.substring(0,r)}const T={hex:s,rect:u,tile:l,"tile-gl":h,term:m.a},R={width:80,height:25,transpose:!1,layout:"rect",fontSize:15,spacing:1,border:0,forceSquareRatio:!1,fontFamily:"monospace",fontStyle:"",fg:"#ccc",bg:"#000",tileWidth:32,tileHeight:32,tileMap:{},tileSet:null,tileColorize:!1};class M{constructor(t={}){this._data={},this._dirty=!1,this._options={},t=Object.assign({},R,t),this.setOptions(t),this.DEBUG=this.DEBUG.bind(this),this._tick=this._tick.bind(this),this._backend.schedule(this._tick)}DEBUG(t,e,r){let n=[this._options.bg,this._options.fg];this.draw(t,e,null,null,n[r%n.length])}clear(){this._data={},this._dirty=!0}setOptions(t){if(Object.assign(this._options,t),t.width||t.height||t.fontSize||t.fontFamily||t.spacing||t.layout){if(t.layout){let e=T[t.layout];this._backend=new e}this._backend.setOptions(this._options),this._dirty=!0}return this}getOptions(){return this._options}getContainer(){return this._backend.getContainer()}computeSize(t,e){return this._backend.computeSize(t,e)}computeFontSize(t,e){return this._backend.computeFontSize(t,e)}computeTileSize(t,e){return[Math.floor(t/this._options.width),Math.floor(e/this._options.height)]}eventToPosition(t){let e,r;return"touches"in t?(e=t.touches[0].clientX,r=t.touches[0].clientY):(e=t.clientX,r=t.clientY),this._backend.eventToPosition(e,r)}draw(t,e,r,n,i){n||(n=this._options.fg),i||(i=this._options.bg);let a=`${t},${e}`;this._data[a]=[t,e,r,n,i],!0!==this._dirty&&(this._dirty||(this._dirty={}),this._dirty[a]=!0)}drawText(t,e,r,n){let i=null,a=null,o=t,s=e,u=1;n||(n=this._options.width-t);let l=P(r,n);for(;l.length;){let e=l.shift();switch(e.type){case w:let r=!1,n=!1,l=!1,c=!1;for(let t=0;t<e.value.length;t++){let u=e.value.charCodeAt(t),h=e.value.charAt(t);l=u>65280&&u<65377||u>65500&&u<65512||u>65518,r=32==h.charCodeAt(0)||12288==h.charCodeAt(0),!c||l||r||o++,l&&!n&&o++,this.draw(o++,s,h,i,a),n=r,c=l}break;case k:i=e.value||null;break;case x:a=e.value||null;break;case b:o=t,s++,u++}}return u}_tick(){if(this._backend.schedule(this._tick),this._dirty){if(!0===this._dirty){this._backend.clear();for(let t in this._data)this._draw(t,!1)}else for(let t in this._dirty)this._draw(t,!0);this._dirty=!1}}_draw(t,e){let r=this._data[t];r[4]!=this._options.bg&&(e=!0),this._backend.draw(r,e)}}M.Rect=u,M.Hex=s,M.Tile=l,M.TileGL=h,M.Term=m.a;Math.sqrt(3),Math.sqrt(3);function A(t,e){let r=t>=0?2*t:-2*t-1,n=e>=0?2*e:-2*e-1;return r>=n?r*r+r+n:r+n*n}const E=function(t){return 0===t?"$0":t<100?`${t}¢`:t%100==0?`$${t/100}`:`$${Number.parseFloat(t/100).toFixed(2)}`};function O(t){switch(t){case 11:return"J";case 12:return"Q";case 13:return"K";case 14:return"A"}return t>=2&&t<=10?t:"?"}let I=0,B=()=>I++;const W=B(),j=B(),D=B(),$=B();function z(t,e){switch(t){case $:return e?"S":"♠";case W:return e?"H":"♥";case j:return e?"C":"♣";case D:return e?"D":"♦"}return"?"}const L=B(),H=B(),N=B(),F=B(),U={};U[L]={min:0,max:1,name:"point blank"},U[H]={min:2,max:6,name:"close"},U[N]={min:7,max:20,name:"medium"},U[F]={min:21,name:"long"};const V=B(),q=B(),X=B(),G=B(),Y=B(),J=B(),K=B(),Z=B(),Q=B(),tt=B(),et=B(),rt=B(),nt=B(),it={};it[V]={name:"dirt",symbols:["."],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},it[q]={name:"dirt",symbols:[""],fore:"black",back:"burlywood",blocksMove:!1,blocksVision:!1},it[X]={name:"grass",symbols:['"'],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},it[G]={name:"grass",symbols:["'"],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},it[Y]={name:"grass",symbols:[""],fore:"black",back:"green",blocksMove:!1,blocksVision:!1},it[J]={name:"water",symbols:["~","","",""],fore:"white",back:"blue",blocksMove:!0,blocksVision:!1},it[K]={name:"wood floor",symbols:["="],fore:"goldenrod",back:"darkgoldenrod",blocksMove:!1,blocksVision:!1},it[Z]={name:"wood wall",symbols:["#"],fore:"darkgoldenrod",back:"brown",blocksMove:!0,blocksVision:!0},it[Q]={name:"wood door",symbols:[";"],fore:"black",back:"darkgoldenrod",blocksMove:!1,blocksVision:!0},it[tt]={name:"poker table",symbols:["O"],fore:"black",back:"brown",blocksMove:!0,blocksVision:!1},it[et]={name:"bench",symbols:["–"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},it[rt]={name:"cross",symbols:["†"],fore:"white",back:"darkgoldenrod",blocksMove:!0,blocksVision:!1},it[nt]={name:"vault door",symbols:["#"],fore:"white",back:"dimgray",blocksMove:!0,blocksVision:!0};const at=[0,10,25,50,75,100,125,150,175,200,250,300,350,400,450,500,600,700,800,900,1e3],ot=["Abner","Adam","August","Austin","Bart","Beau","Billy","Blaze","Bo","Boone","Bowen","Bowie","Brawley","Breaker","Brent","Bret","Brock","Brody","Bronco","Brooks","Buck","Buster","Butch","Cal","Calhoun","Carson","Casey","Cash","Cassidy","Chance","Chandler","Cheyenne","Clay","Clint","Cody","Colt","Colton","Cord","Dallas","Dash","Deacon","Decker","Denver","Destry","Dexter","Dice","Dodge","Duke","Dusty","Dylan","Early","Flint","Gunner","Gus","Hank","Hawk","Heath","Hitch","Houston","Huck","Huckleberry","Jace","Jackson","Jeb","Jed","Jem","Jericho","Jesse","Josh","Judd","Judson","Justice","Kit","Laird","Landry","Levi","Luke","Mack","Maverick","Mccoy","Montana","Nash","Oakley","Otis","Phineas","Pistol","Quentin","Rancher","Ranger","Reeve","Remington","Remy","Reno","Rio","River","Romer","Roper","Roscoe","Rufus","Ryder","Rye","Sawyer","Shane","Shiloh","Silas","Stetson","Tex","Thatcher","Travis","Tripp","Ty","Wade","Walker","West","Westin","Weston","Wild","Wilder","Wyatt","Wylie","Yale","Zalman","Zane","Zeb"],st=["Austin","Boone","Bowen","Bowie","Brody","Brooks","Buck","Calhoun","Carson","Casey","Cash","Cassidy","Clay","Cody","Colt","Colton","Cooper","Deacon","Decker","Denver","Dexter","Flint","Ford","Houston","Huckleberry","Jackson","Jones","Laird","Landry","Levi","Mccoy","Miller","Montana","Nash","Oakley","Rancher","Ranger","Reeve","Ryder","Rye","Sawyer","Smith","Stetson","Tex","Thatcher","Walker","West","Westin","Weston"];var ut=r(2),lt=r.n(ut),ct=r(7),ht=r.n(ct);class ft{constructor(){this.naturalItem=!1,this.isWeapon=!1,this.name="item",this.description="No description.",this.value=0,this.symbol="o"}}class dt extends ft{constructor(){super(),this.isWeapon=!0,this.name="weapon",this.drawSpeed=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class pt extends ft{constructor(){super(),this.name="can of beans",this.description="Some tasty beans.",this.symbol="B",this.value=50}}class gt extends dt{constructor(){super(),this.name="melee weapon",this.description="A melee weapon.",this.isMelee=!0,this.maximumRange=L}}class vt extends dt{constructor(){super(),this.name="ranged weapon",this.description="A ranged weapon.",this.isMelee=!1,this.maximumRange=F,this.capacity=1,this.currentAmmo=0,this.ammoType="bullets",this.unloadsWhenStowed=!1,this.rangeModifiers=[],this.rangeModifiers[L]=0,this.rangeModifiers[H]=0,this.rangeModifiers[N]=0,this.rangeModifiers[F]=0}}class mt extends gt{constructor(){super(),this.name="fist",this.naturalItem=!0,this.drawDelay=0,this.minDamage=1,this.maxDamageBase=1,this.maxDamageAttributes=["strength"]}}class yt extends gt{constructor(){super(),this.name="knife",this.drawDelay=1,this.minDamage=1,this.maxDamageBase=4,this.maxDamageAttributes=["strength"],this.value=200}}class _t extends vt{constructor(){super(),this.name="bow",this.unloadsWhenStowed=!0,this.drawDelay=2,this.capacity=1,this.ammoType="arrows",this.minDamage=2,this.maxDamageBase=0,this.maxDamageAttributes=["grit","strength"],this.rangeModifiers[L]=-5,this.rangeModifiers[H]=0,this.rangeModifiers[N]=0,this.rangeModifiers[F]=0,this.value=200}}class wt extends vt{constructor(t){super(),this.name="revolver",this.drawDelay=1,this.capacity=6,this.ammoType="bullets",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[L]=0,this.rangeModifiers[H]=2,this.rangeModifiers[N]=0,this.rangeModifiers[F]=-2,this.value=1200}}class bt extends vt{constructor(t){super(),this.name="shotgun",this.drawDelay=3,this.capacity=2,this.ammoType="buckshot",t&&(this.currentAmmo=this.capacity),this.minDamage=1,this.maxDamageBase=5,this.maxDamageAttributes=["grit"],this.rangeModifiers[L]=0,this.rangeModifiers[H]=5,this.rangeModifiers[N]=0,this.rangeModifiers[F]=-5,this.value=2e3}}class kt{constructor(t,e){this.object=t,this.text=e}}class xt extends kt{constructor(t,e,r,n){super(t,"Buy "+r.name+" ("+E(n)+")"),this.price=n,this.owner=e,this.item=r}onInteract(t){t.cents>=this.price&&(t.inventory.push(this.item),t.cents-=this.price,this.owner.cents+=this.price,this.object.delete())}}class Ct extends kt{constructor(t,e,r){super(t,"Steal "+r.name),this.owner=e,this.item=r}onInteract(t){t.inventory.push(this.item),this.object.delete()}}class Pt extends kt{constructor(t){super(t,"Take "+E(t.value))}onInteract(t){t.cents+=this.object.value,this.object.delete()}}class St extends kt{constructor(t,e){super(t,"Loot "+e.name),this.item=e}onInteract(t){t.inventory.push(this.item),_.remove(this.object.character.inventory,this.item)}}class Tt extends kt{constructor(t){super(t,"Loot "+E(t.character.cents))}onInteract(t){t.cents+=this.object.character.cents,this.object.character.cents=0}}class Rt{constructor(t,e,r){this.name=t,this.symbol=e,this.color=r}getDisplayChar(){return{symbol:this.symbol,color:this.color}}delete(){_.remove(this.game.objects,this)}}class Mt extends Rt{constructor(t,e,r){super(t.name,t.symbol,"white"),this.item=t,this.price=e,this.owner=r}getInteractions(){return[new xt(this,this.owner,this.item,this.price),new Ct(this,this.owner,this.item)]}}class At extends Rt{constructor(t){super("body ("+t.name+")","&","white"),this.character=t}getInteractions(){let t=[];for(let e of this.character.inventory)t.push(new St(this,e));return this.character.cents>0&&t.push(new Tt(this)),t}}class Et extends Rt{constructor(t){super("Cash ("+t.toString()+")","$","green"),this.value=t}getInteractions(){return[new Pt(this)]}}class Ot{constructor(t,e){this.character=t,this.text=e}}class It extends Ot{constructor(t,e,r,n){super(t,"Sell "+r.name+" ("+E(n)+")"),this.price=n,this.seller=e,this.item=r}onInteract(t){_.remove(t.inventory,this.item),t.cents+=this.price,this.character.cents-=this.price,this.character.addItem(this.item)}}class Bt extends Ot{constructor(t,e){super(t,"Deposit "+E(e)),this.value=e}onInteract(t){this.character.takeMoney(this.value,t)}}class Wt extends Ot{constructor(t,e){super(t,"Withdraw "+E(e)),this.value=e}onInteract(t){this.character.giveMoney(this.value,t)}}class jt{constructor(t,e,r,n,i,a){this.name="Stranger",this.symbol="@",this.color="white",this.isPC=!1,this.isNPC=!0,this.cents=0,this.bullets=0,this.buckshot=0,this.arrows=0,this.inventory=[],this.equippedWeapon=null,this.naturalWeapon=new mt,this.initiative=0,this.level=t,this.xp=0,this.strength=e,this.quickness=r,this.cunning=n,this.guile=i,this.grit=a,this.health=this.getMaxHealth(),this.vigilance=this.getMaxVigilance(),this.subterfuge=this.getMaxSubterfuge(),this.honor=0,this.menace=0,this.luck=0,this.threat=0,this.utterance="",this.activePokerPlayerRole=null}onGameStart(){}getDisplayChar(){return{symbol:this.symbol,color:"white"}}getMaxHealth(){return 10+this.level+this.strength+this.grit}getMaxVigilance(){return 5+this.quickness+this.cunning}getMaxSubterfuge(){return this.guile+this.quickness+this.cunning}getMeleeAttack(){return this.level+this.quickness+this.strength}getRangedAttack(){return this.level+this.quickness+this.grit}getDefense(){return 10+Math.floor(this.level/2)+this.grit}startTurn(){this.utterance=""}join(t){this.isNPC&&this.say("I'm joining this game.");let e=t.addPlayer(this);this.activePokerPlayerRole=e}say(t){this.utterance=t}wait(){this.vigilance<this.getMaxVigilance()&&this.vigilance++,_.random(1,100)<20&&this.isNPC&&this.activePokerPlayerRole&&this.activePokerPlayerRole.game.activePlayer&&this.activePokerPlayerRole.game.activePlayer.character.isPC?this.say(_.sample(["Your go.","Waiting on you.",`${this.activePokerPlayerRole.game.activePlayer.character.name}?`])):_.random(1,100)<4&&this.say(_.sample(["*whistle*","*cough*"]))}equip(t){this.equippedWeapon&&this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.equippedWeapon=t,this.initiative-=t.drawDelay,this.game.log(`${this.name} draws his ${t.name}.`)}unequip(){this.equippedWeapon.unloadsWhenStowed&&(this[this.equippedWeapon.ammoType]+=this.equippedWeapon.currentAmmo,this.equippedWeapon.currentAmmo=0),this.game.log(`${this.name} stows his ${this.equippedWeapon.name}.`),this.equippedWeapon=null}reload(){let t=this.getCurrentWeapon();t.currentAmmo++,this[t.ammoType]--,this.game.log(`${this.name} reloads his ${t.name}.`)}getCurrentWeapon(){return this.equippedWeapon||this.naturalWeapon}canReload(){let t=this.getCurrentWeapon();return t.capacity&&t.currentAmmo<t.capacity&&this[t.ammoType]>0}getDamageWithWeapon(t){let e=t.minDamage,r=t.maxDamageAttributes.reduce((t,e)=>t+this[e],t.maxDamageBase);return r=Math.max(e,r),{min:e,max:r}}isHostileTo(t){return!!(t.isPC&&this.opinionOfPC<=-10)}canAttack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t);return!([L,H,N,F].find(t=>r>=U[t].min&&r<=U[t].max)>e.maximumRange)&&(!(e.capacity&&e.currentAmmo<1)&&this.game.map.lineOfSightExistsBetween(this,t))}attack(t){let e=this.getCurrentWeapon(),r=this.distanceBetween(t),n=[L,H,N,F].find(t=>r>=U[t].min&&r<=U[t].max),i=e.rangeModifiers[n],a=e.isMelee?this.getMeleeAttack():this.getRangedAttack()+i,o=_.random(1,20),s=a+o,u=t.getDefense(),l=s>=u;if(e.currentAmmo--,this.onAttack(t),e.ammoType&&this.game.addProjectile(e.ammoType,l,{x:this.x,y:this.y},{x:t.x,y:t.y}),!l)return void this.game.log(`${this.name} attacks ${t.name} with his ${e.name}. [${o}] + ${a} vs ${u} and misses.`);let{min:c,max:h}=this.getDamageWithWeapon(e),f=_.random(c,h)+i;t.takeDamage(f)?(this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${f} damage and killing him.`),this.onKill(t)):this.game.log(`${this.name} hits ${t.name} with his ${e.name}, dealing ${f} damage.`)}takeDamage(t){return this.health=Math.max(this.health-t,0),this.vigilance=Math.max(this.vigilance-t,0),this.health<=0&&(this.die(),!0)}die(){this.activePokerPlayerRole&&this.activePokerPlayerRole.game.removePlayer(this.activePokerPlayerRole),_.remove(this.game.characters,this),this.game.addObject(new At(this),this.x,this.y),this.isPC&&(this.game.gameOver=!0)}distanceBetween(t){return Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))}getAdjacentObjects(){let t=[];return t=t.concat(this.game.getObjects(this.x+1,this.y)),t=t.concat(this.game.getObjects(this.x-1,this.y)),t=t.concat(this.game.getObjects(this.x,this.y+1)),t=t.concat(this.game.getObjects(this.x,this.y-1)),t}getAdjacentCharacters(){let t=[];return t=t.concat(this.game.getCharacters(this.x+1,this.y)),t=t.concat(this.game.getCharacters(this.x-1,this.y)),t=t.concat(this.game.getCharacters(this.x,this.y+1)),t=t.concat(this.game.getCharacters(this.x,this.y-1)),t}getAllowedInteractions(){let t=[];for(let e of this.getAdjacentObjects())t=t.concat(e.getInteractions());for(let e of this.getAdjacentCharacters())t=t.concat(e.getInteractions(this));return t}getInteractions(t){return[]}}class Dt extends jt{constructor(){super(0,0,0,0,0,0),this.name="Rodney",this.cents=2e3,this.isPC=!0,this.isNPC=!1,this.bullets=50,this.buckshot=20,this.arrows=20,this.inventory.push(new wt(!0)),this.inventory.push(new yt),this.inventory.push(new pt),this.inventory.push(new bt(!0)),this.inventory.push(new _t)}gainXp(t){if(this.xp+=t,this.level<20&&this.xp>=at[this.level+1]){let t=_.sample(["strength","quickness","cunning","guile","grit"]);this.level++,this[t]++,this.game.log(`You have gained a level and improved your ${t}.`)}}onWinHand(){this.gainXp(3)}onLoseHand(){}onAttack(t){this.isPC&&(t.opinionOfPC-=20)}onKill(t){this.gainXp(5)}}class $t extends jt{constructor(t,e,r,n,i,a){super(t,e,r,n,i,a),this.opinionOfPC=0,this.desires={gamble:0,travel:0},this.winningStreak=0,this.losingStreak=0}getThreats(){return this.game.characters.filter(t=>this.isHostileTo(t))}getPossibleTargets(){return this.getThreats().filter(t=>this.canAttack(t))}getBestWeapon(t){let e=this.inventory.filter(t=>t.isWeapon&&(!t.capacity||t.currentAmmo>0||this[t.ammoType]>0)).concat([this.naturalWeapon]);if(e.every(t=>t.isMelee))return e.sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0];let r=this.distanceBetween(t),n=[L,H,N,F].find(t=>r>=U[t].min&&r<=U[t].max);return n===L?e.filter(t=>t.isMelee).sort((t,e)=>this.getDamageWithWeapon(e).max-this.getDamageWithWeapon(t).max)[0]:e.filter(t=>!t.isMelee).sort((t,e)=>e.rangeModifiers[n]-t.rangeModifiers[n])[0]}takeTurn(){if(this.startTurn(),this.canReload()&&!this.getCurrentWeapon().currentAmmo)return void this.reload();let t=this.getPossibleTargets().sort((t,e)=>t.health-e.health);if(t.length)return void this.attack(t[0]);if(this.canReload())return void this.reload();let e=this.getThreats().sort((t,e)=>t.distanceBetween(e));if(e.length){let t=this.getBestWeapon(e[0]);if(t!==this.getCurrentWeapon())return t===this.naturalWeapon?void this.unequip():void this.equip(t)}else if(this.getCurrentWeapon()!==this.naturalWeapon)return void this.unequip();let r=this.activePokerPlayerRole;if(r&&r.isActivePlayer()&&r.game.waitingForActivePlayerAction)return r.play(),void(r.game.activePlayer=r.game.getNextPlayer(r,!0));r&&r.isDealer()&&r.game.waitingForDealerAction?r.deal():this.wait()}onWinHand(){this.winningStreak++,this.losingStreak=0,this.desires.gamble++,this.winningStreak>1&&this.desires.travel++}onLoseHand(){this.losingStreak++,this.winningStreak=0,this.desires.travel++}onAttack(t){}onKill(t){}}class zt extends $t{constructor(){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,0,1,2])),this.name=`${_.sample(ot)} ${_.sample(st)}`,this.symbol="@",this.cents=2e3}}class Lt extends $t{constructor(){super(_.sample([0,1,2,4]),_.sample([0,1,1,2]),_.sample([0,1,2,2]),_.sample([0,0,0,1]),_.sample([0,1,2,3]),_.sample([0,1,2,3])),this.name=`${_.sample(ot)} ${_.sample(st)}`,this.symbol="@",this.cents=2e3}}class Ht extends $t{constructor(t,e,r,n){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ot)} ${_.sample(st)}`,this.symbol="@",this.inventory.push(new wt(!0)),this.bullets=30,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=n,this.cents=8e3}getInteractions(t){let e=[];if(this.getEmptyShopSpace())for(let r of t.inventory)r.value>0&&e.push(new It(this,t,r,r.value));return e}addItem(t){let e=this.getEmptyShopSpace();this.game.addObject(new Mt(t,t.value,this),e[0],e[1])}getEmptyShopSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}}class Nt extends $t{constructor(t,e,r,n){super(_.sample([0,0,1,2]),_.sample([0,1,1,2]),_.sample([0,0,1,2]),_.sample([0,0,0,1]),_.sample([0,0,0,1]),_.sample([0,0,0,1])),this.name=`${_.sample(ot)} ${_.sample(st)}`,this.symbol="@",this.inventory.push(new wt(!0)),this.bullets=12,this.shopTop=t,this.shopLeft=e,this.shopWidth=r,this.shopHeight=n,this.cents=8e3,this.cashList=[],this.accounts={}}getInteractions(t){let e=[];return this.accounts[t]&&(this.accounts[t]>=1e3?e.push(new Wt(this,1e3)):this.accounts[t]>0&&e.push(new Wt(this,this.accounts[t]))),t.cents>=1e3&&e.push(new Bt(this,1e3)),e}getEmptyVaultSpace(){let t=[];for(let e=this.shopLeft+1;e<this.shopLeft+this.shopWidth;e++)for(let r=this.shopTop+3;r<this.shopTop+this.shopHeight;r+=2)e!=this.shopLeft+this.shopWidth/2&&this.game.spaceIsPassable(e,r)&&t.push([e,r]);return t.length>0?_.sample(t):null}onGameStart(){this.addMoneyToVault(2e3),this.addMoneyToVault(2e3)}takeMoney(t,e){e.cents-=t,this.accounts[e]?this.accounts[e]+=t:this.accounts[e]=t,this.addMoneyToVault(t)}addMoneyToVault(t){let e=this.getEmptyVaultSpace(),r=this.game.addObject(new Et(t),e[0],e[1]);this.cashList.push(r)}giveMoney(t,e){for(e.cents+=t,this.accounts[e]-=t;t>=this.cashList[0].value;)t-=this.cashList[0].value,this.cashList[0].delete(),_.remove(this.cashList,this.cashList[0]);this.cashList[0].value=this.cashList[0].value-t}}class Ft extends class{constructor(t,e,r,n,i,a){this.top=t,this.left=e,this.width=r,this.height=n,this.seed=i,this.map=a}overlapsCell(t,e){return!(t<this.left||t>this.left+this.width-1)&&!(e<this.top||e>this.top+this.height-1)}getTile(t,e){return this.tiles[t][e]}}{constructor(t,e,r,n,i,a){super(t,e,r,n,i,a),console.log("helo");let o=[],s=n/2+3,u=n/2-3-16;for(let t=4;t+16<r-4;t+=16)o.push({top:s,left:t,width:16,height:16,orientation:"S"}),o.push({top:u,left:t,width:16,height:16,orientation:"N"});this.createGround();let l=_.sample(o);_.remove(o,l),this.createSaloon(l.top,l.left,10,10,l.orientation),l=_.sample(o),_.remove(o,l),this.createSaloon(l.top,l.left,10,10,l.orientation),l=_.sample(o),_.remove(o,l),this.createChurch(l.top,l.left,8,12,l.orientation),l=_.sample(o),_.remove(o,l),this.createShop(l.top,l.left,8,8,l.orientation),l=_.sample(o),_.remove(o,l),this.createBank(l.top,l.left,8,8,l.orientation)}createGround(){this.tiles=[];for(let t=0;t<this.width;t++){this.tiles[t]=[];for(let e=0;e<this.height;e++)this.tiles[t][e]=_.sample([V,V,V,q])}}createRoom(t,e,r,n){for(let i=e;i<e+r;i++)for(let e=t;e<t+n;e++)this.tiles[i][e]=K;for(let i=e;i<e+r;i++)this.tiles[i][t]=Z,this.tiles[i][t+n]=Z;for(let i=t;i<t+n;i++)this.tiles[e][i]=Z,this.tiles[e+r][i]=Z;this.tiles[e+r][t+n]=Z}createSaloon(t,e,r,n,i){this.createRoom(t,e,r,n);let a=e+5,o=t+5;this.tiles[a][o]=tt,"N"===i?this.tiles[e+6][t+n]=Q:this.tiles[e+6][t]=Q;let s=this.map.game.addPokerGame(this.left+a,this.top+o);for(let t of[[1,0],[-1,0],[0,1],[0,-1]])if(_.sample([!0,!1])){this.map.game.addCharacter(new zt,this.left+a+t[0],this.top+o+t[1]).join(s)}}createChurch(t,e,r,n,i){if(this.createRoom(t,e,r,n),"N"===i){this.tiles[e+r/2][t+n]=Q,this.tiles[e+r/2][t+1]=rt;for(let i=e+1;i<e+r;i++)for(let a=t+3;a<t+n;a+=2)i!=e+r/2&&(this.tiles[i][a]=et)}else{this.tiles[e+r/2][t]=Q,this.tiles[e+r/2][t+n-1]=rt;for(let i=e+1;i<e+r;i++)for(let a=t+1;a<t+n-2;a+=2)i!=e+r/2&&(this.tiles[i][a]=et)}let a="N"===i?t+2:t+n-2;this.map.game.addCharacter(new Lt,this.left+e+r/2,this.top+a)}createShop(t,e,r,n,i){this.createRoom(t,e,r,n),"N"===i?this.tiles[e+r/2][t+n]=Q:this.tiles[e+r/2][t]=Q;let a="N"===i?t+1:t+n-1,o=this.map.game.addCharacter(new Ht(this.top+t,this.left+e,r,n),this.left+e+r/2,this.top+a);this.map.game.addObject(new Mt(new pt,50,o),this.left+e+1,this.top+t+1)}createBank(t,e,r,n,i){let a=n-4,o="N"===i?t:t+4,s="N"===i?t+4:t;this.createRoom(s,e,r,4),this.createRoom(o,e,r,a),"N"===i?(this.tiles[e+r/2][t+n]=Q,this.tiles[e+r/2][s]=nt):(this.tiles[e+r/2][t]=Q,this.tiles[e+r/2][o]=nt);let u="N"===i?s+1:o-1;this.map.game.addCharacter(new Nt(this.top+o,this.left+e,r,a),this.left+e+r/2,this.top+u)}}class Ut{constructor(t){this.seed=lt.a.random(1e3),this.game=t,this.sites=[new Ft(-30,0,100,60,this.seed,this)]}getTile(t,e){let r=this.sites.find(r=>r.overlapsCell(t,e));if(r)return r.getTile(t-r.left,e-r.top);let n=A(this.seed,A(t,e));return t>40&&t<50?J:(i=n,(a=[X,X,G,Y])[Math.floor(function(t,e=1,r=0){return r+(9301*t+49297)%233280/233280*(e-r)}(i)*a.length)]);var i,a}firstInterposingObstacleBetween(t,e){let r=ht()(t.x,t.y,e.x,e.y),n=r.next().value;for(;n;)if(n=r.next().value,n){let t=this.getTile(n.x,n.y);if(it[t].blocksVision)return n.x===e.x&&n.y===e.y?null:n}return null}lineOfSightExistsBetween(t,e){return!this.firstInterposingObstacleBetween(t,e)}}var Vt=r(8);const qt=t=>t.startsWith("10")?10:t.startsWith("J")?11:t.startsWith("Q")?12:t.startsWith("K")?13:t.startsWith("A")?14:parseInt(t[0]),Xt=(t,e)=>qt(e)-qt(t);function Gt(t,e){let r=[...t],n=[...e];for(;r[0]===n[0]&&r.length&&n.length;)r.shift(),n.shift();return r.length&&n.length?Math.sign(n[0]-r[0]):0}function Yt(t,e){if(t.comboRank!==e.comboRank)return Math.sign(e.comboRank-t.comboRank);let r=Gt(t.cardsInCombo,e.cardsInCombo);return r||Gt(t.bestCardsOutOfCombo,e.bestCardsOutOfCombo)}class Jt{constructor(t,e,r){this.rootGame=t,this.x=e,this.y=r,this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,this.round=0,this.dealer=null,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.smallBlind=100,this.bigBlind=200,this.unclaimedMoneyOnTable=0,this.deck=new Zt,this.communityCards=[],this.discardPile=[],this.players=[],this.playersWaitingToJoinHand=[]}getPot(){return this.players.reduce((t,e)=>t+e.currentBet,0)+this.unclaimedMoneyOnTable}getHighestBet(){return Math.max(...this.players.map(t=>t.currentBet))}addPlayer(t){let e=new Kt(this,t);return this.playersWaitingToJoinHand.push(e),e}removePlayer(t){t.discardCards(),t===this.activePlayer&&(this.activePlayer=this.getNextPlayer(t,!0)),t===this.dealer&&(this.dealer=this.players[0]),_.remove(this.players,t),_.remove(this.playersWaitingToJoinHand,t),this.unclaimedMoneyOnTable+=t.currentBet,t.character.cents-=t.currentBet,t.character.activePokerPlayerRole=null}orderPlayers(){const t=["0,-1","1,-1","1,0","1,1","0,1","-1,1","-1,0","-1,-1"];this.players=this.players.sort((e,r)=>{let n=t.findIndex(t=>t===`${e.character.x-this.x},${e.character.y-this.y}`),i=t.findIndex(t=>t===`${r.character.x-this.x},${r.character.y-this.y}`);if(-1===n||-1===i)throw new Error("player is not at table");return n-i})}getNextPlayer(t,e){this.orderPlayers();let r=e?this.players.filter(t=>t.inCurrentHand):this.players,n=r.findIndex(e=>e===t)+1;return n>=r.length&&(n=0),r[n]}tick(){if(this.waitingForActivePlayerAction=!1,this.waitingForDealerAction=!1,0===this.round&&this.players.length+this.playersWaitingToJoinHand.length>=2)return this.players=this.players.concat(this.playersWaitingToJoinHand),this.playersWaitingToJoinHand=[],this.dealer||(this.dealer=this.players[0]),void(this.waitingForDealerAction=!0);this.allPlayersHaveActed()?6===this.round?(this.cleanUp(),this.dealer=this.getNextPlayer(this.dealer,!1)):this.waitingForDealerAction=!0:this.waitingForActivePlayerAction=!0}cleanUp(){this.round=0,this.activePlayer=null,this.lastPlayerToBet=null,this.winningHand={comboRank:-1},this.discardPile=this.discardPile.concat(this.communityCards),this.communityCards=[],this.players.forEach(t=>{t.currentWinnings=0,t.stake=0,t.currentBet=0,t.inCurrentHand=!1,t.hasTakenActionSinceLastRaise=!1,t.cardsRevealed=!1,t.cardsMucked=!1,t.discardCards()})}allPlayersHaveActed(){return this.round<5?this.players.filter(t=>t.inCurrentHand&&!t.isAllIn()).every(t=>t.hasTakenActionSinceLastRaise):this.players.filter(t=>t.inCurrentHand).every(t=>t.cardsRevealed||t.cardsMucked)}start(){this.dealer.character.say("Deal and ante."),this.round=1,this.deck.returnCards(this.discardPile),this.discardPile=[],this.deck.shuffle(),this.players.forEach(t=>{t.inCurrentHand=!0,t.takeCard(this.deck.draw()),t.takeCard(this.deck.draw())});let t=this.getNextPlayer(this.dealer,!0);t.bet(this.smallBlind);let e=this.getNextPlayer(t,!0);e.bet(this.bigBlind),this.activePlayer=this.getNextPlayer(e,!0),this.lastPlayerToBet=null}flop(){this.round=2,this.players.map(t=>t.hasTakenActionSinceLastRaise=!1);let t=[this.deck.draw(),this.deck.draw(),this.deck.draw()];this.communityCards.push(...t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.map(t=>t.getSpokenName()).join(", "))} on the flop.`)}turn(){this.round=3,this.players.map(t=>t.hasTakenActionSinceLastRaise=!1);let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the turn.`)}river(){this.round=4,this.players.map(t=>t.hasTakenActionSinceLastRaise=!1);let t=this.deck.draw();this.communityCards.push(t),this.activePlayer=this.getNextPlayer(this.dealer,!0),this.lastPlayerToBet=null,this.dealer.character.say(`${_.capitalize(t.getSpokenName())} on the river.`)}reveal(){this.round=5,this.dealer.character.say("Show your cards!"),this.activePlayer=this.getNextPlayer(this.dealer,!0)}dividePot(){this.round=6,this.players.filter(t=>0===Yt(this.winningHand,t.bestHand())).map(t=>t.character.say("I win!"));let t=0;this.players.forEach(e=>{t+=e.currentBet,e.character.cents-=e.currentBet,e.stake=e.currentBet});let e=[],r=this.players.sort((t,e)=>t.stake-e.stake);do{let t=r.filter(t=>t.stake===r[0].stake),n=t[0].stake;e.push({contestedBy:[...r],amount:n*r.length}),r=_.difference(r,t).sort((t,e)=>t.stake-e.stake),r.map(t=>t.stake-=n)}while(r.length);e[e.length-1].amount+=this.unclaimedMoneyOnTable,this.unclaimedMoneyOnTable=0,e.forEach(t=>{let e={comboRank:-1};t.contestedBy.forEach(t=>{let r=t.bestHand();Yt(r,e)<=0&&(e=r)});let r=t.contestedBy.filter(t=>0===Yt(e,t.bestHand()));r.map(e=>e.currentWinnings+=Math.floor(t.amount/r.length))});let n=0;this.players.forEach(t=>{t.character.cents+=t.currentWinnings,n+=t.currentWinnings,console.log(`${t.character.name} gets ${E(t.currentWinnings)} from the pot.`)});let i=t-n;this.unclaimedMoneyOnTable+=i,console.log(`${E(i)} is left on the table.`)}}class Kt{constructor(t,e){this.game=t,this.character=e,this.currentWinnings=0,this.stake=0,this.currentBet=0,this.hole=[],this.inCurrentHand=!1,this.hasTakenActionSinceLastRaise=!1,this.cardsRevealed=!1,this.cardsMucked=!1}isDealer(){return this.game.dealer===this}isActivePlayer(){return this.game.activePlayer===this}isAllIn(){return this.inCurrentHand&&this.character.cents===this.currentBet}isMatchingHighestBet(){return this.inCurrentHand&&this.currentBet>=this.game.getHighestBet()}bestHand(){return function(t,e){let r=t.concat(e).map(t=>t.toRankingString()),n=Object(Vt.evaluateAndFindCards)(r),i=lt.a.difference(r,n.cards).sort(Xt).slice(0,5-n.cards.length);return{match:n.match,cardsInCombo:n.cards.map(qt),bestCardsOutOfCombo:i.map(qt),comboRank:(a=n.match,{"5ofakind":10,royalflush:9,straightflush:8,"4ofakind":7,fullhouse:6,flush:5,straight:4,"3ofakind":3,"2pair":2,pair:1,nothing:0}[a])};var a}(this.hole,this.game.communityCards)}takeCard(t){this.hole.push(t)}discardCards(){this.game.discardPile=this.game.discardPile.concat(this.hole),this.hole=[]}deal(){switch(this.game.waitingForDealerAction=!1,this.game.round){case 0:return this.game.start();case 1:return this.game.flop();case 2:return this.game.turn();case 3:return this.game.river();case 4:return this.game.reveal();case 5:return this.game.dividePot()}}getMaxValidBet(){let t=this.game.players.filter(t=>t.inCurrentHand&&t!==this).reduce((t,e)=>Math.max(t,e.character.cents),0);return Math.min(this.character.cents,t)}getMinValidBet(){return Math.min(this.game.getHighestBet(),Math.max(this.character.cents,1))}bet(t){let e=Math.min(this.character.cents,t);e>this.game.getHighestBet()&&this.game.players.map(t=>t.hasTakenActionSinceLastRaise=!1),this.currentBet=e,this.game.lastPlayerToBet=this,this.game.waitingForActivePlayerAction=!1,this.character.say(`I bet ${E(this.currentBet)}.`),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}play(){if(5===this.game.round&&!this.cardsRevealed&&!this.cardsMucked)return this.revealCards();this.canCheck()?this.check():this.call()}canReveal(){return this.inCurrentHand&&!this.cardsRevealed}canCheck(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&(this.isAllIn()||this.isMatchingHighestBet())}canFold(){return this.isActivePlayer()&&this.inCurrentHand}canCall(){return this.isActivePlayer()&&this.inCurrentHand&&this.game.round<5&&!this.isAllIn()&&this.currentBet<this.game.getHighestBet()}fold(){this.inCurrentHand=!1,this.character.say("I fold."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}check(){this.character.say("Check."),this.hasTakenActionSinceLastRaise=!0,this.game.waitingForActivePlayerAction=!1}call(){this.bet(this.game.getHighestBet())}raise(){}revealCards(){this.cardsRevealed=!0;let t=this.bestHand();this.character.say(`${_.capitalize(t.match)}.`),Yt(t,this.game.winningHand)<=0&&(this.game.winningHand=t),this.game.waitingForActivePlayerAction=!1}muckCards(){this.cardsMucked=!0,this.character.say("Nothin'.")}}class Zt{constructor(){this.cards=[],[W,D,$,j].forEach(t=>{for(let e=2;e<15;e++)this.cards.push(new Qt(e,t))}),this.shuffle()}shuffle(){this.cards=_.shuffle(this.cards)}draw(){return this.cards.pop()}count(){return this.cards.length}returnCards(t){this.cards=this.cards.concat(t)}}class Qt{constructor(t,e){this.value=t,this.suit=e}toString(){return`${O(this.value)}${z(this.suit,!1)}`}toRankingString(){return`${O(this.value)}${z(this.suit,!0)}`}getSpokenName(){switch(this.value){case 2:return"two";case 3:return"three";case 4:return"four";case 5:return"five";case 6:return"six";case 7:return"seven";case 8:return"eight";case 9:return"nine";case 10:return"ten";case 11:return"jack";case 12:return"queen";case 13:return"king";case 14:return"ace"}}getColor(){return[W,D].includes(this.suit)?"red":"black"}}var te=r(6),ee=r.n(te);const re=Math.floor(27.5),ne=Math.floor(22.5),ie=function(t,e=!1){return t.map(t=>`%c{${e?"black":t.getColor()}}%b{white}${e?"??":t.toString()}%c{white}%b{black}`).join(" ")+"%c{}"};let ae=new M({width:85,height:55});document.body.appendChild(ae.getContainer());let oe=new class{constructor(){this.turn=0,this.gameOver=!1,this.characters=[],this.objects=[],this.pokerGames=[],this.projectiles=[],this.map=new Ut(this),this.player=new Dt,this.addCharacter(this.player,0,0),this.characters.forEach(t=>{t.onGameStart()})}addCharacter(t,e,r){return this.characters.push(t),t.x=e,t.y=r,t.game=this,t}addObject(t,e,r){return this.objects.push(t),t.x=e,t.y=r,t.game=this,t}addPokerGame(t,e){let r=new Jt(this,t,e);return this.pokerGames.push(r),r}addProjectile(t,e,r,n){this.projectiles.push({ammoType:t,isHit:e,source:r,target:n})}getProjectiles(){let t=[...this.projectiles];return this.projectiles=[],t}getCharacters(t,e){return this.characters.filter(r=>r.x===t&&r.y===e)}getObjects(t,e){return this.objects.filter(r=>r.x===t&&r.y===e)}getPokerGame(t,e){return this.pokerGames.find(r=>r.x===t&&r.y===e)}getCellContents(t,e){return{terrain:this.map.getTile(t,e),characters:this.getCharacters(t,e),objects:this.getObjects(t,e)}}spaceIsPassable(t,e){return!it[this.getCellContents(t,e).terrain].blocksMove&&(!this.getCharacters(t,e).length&&!this.getObjects(t,e).length)}movePlayer(t,e){let r=this.player.x+t,n=this.player.y+e;return!this.player.activePokerPlayerRole&&(this.spaceIsPassable(r,n)?(this.player.startTurn(),this.player.x=r,this.player.y=n,!0):this.getPokerGame(r,n)?(this.player.startTurn(),this.player.join(this.getPokerGame(r,n)),!0):(this.getObjects(r,n).length,!1))}playerPasses(){return this.player.startTurn(),this.player.wait(),!0}playTurn(){this.turn++,this.pokerGames.forEach(t=>{t.tick()}),this.characters.forEach(t=>{t.isNPC&&t.takeTurn()})}},se=new class{constructor(t,e){this.game=t,this.display=e,this.mouseCoords=[0,0],this.cursorCoords=[0,0],this.showCursor=!1,this.showInventory=!1,this.inventoryCursor=0,this.showPokerView=!1,this.tempBetValue=0,this.messageLog=[]}log(t){this.messageLog.unshift(t),this.messageLog.length>10&&this.messageLog.pop(),console.log(t)}clearControls(){this.showCursor=!1,this.showInventory=!1,this.showPokerView=!1}toggleInventory(){this.showInventory=!this.showInventory,this.showInventory&&(this.showPokerView=!1)}togglePokerView(){this.showPokerView=!this.showPokerView,this.game.player.activePokerPlayerRole||(this.showPokerView=!1),this.showPokerView&&(this.showInventory=!1)}moveCursor(t,e){this.cursorCoords=[this.cursorCoords[0]+t,this.cursorCoords[1]+e]}moveInventoryCursor(t){this.inventoryCursor+=t,this.inventoryCursor>=this.game.player.inventory.length&&(this.inventoryCursor=0),this.inventoryCursor<0&&(this.inventoryCursor=this.game.player.inventory.length-1)}isMapSpaceInView(t){let{x:e,y:r}=this.mapCoordsToDisplayCoords(t);return!(e<0||r<0||e>=55||r>=45)}cycleTargets(){if(this.showCursor){let t=this.game.characters.filter(t=>t.isNPC&&this.isMapSpaceInView(t)).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player)),e=this.getMapCursorCoords(),r=this.game.getCharacters(e.x,e.y);if(r.length){let e=t[t.indexOf(r[0])+1];e||(e=t[0]),this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:e.x,y:e.y}))}else t.length&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}else{let t=this.game.characters.filter(t=>t.isNPC).sort((t,e)=>t.distanceBetween(this.game.player)-e.distanceBetween(this.game.player));t&&(this.cursorCoords=this.coordsToArray(this.mapCoordsToDisplayCoords({x:t[0].x,y:t[0].y})))}this.showCursor=!0}updateMouseCoords(t){let e=t[0]!==this.mouseCoords[0]||t[1]!==this.mouseCoords[1];return e&&(this.mouseCoords=t,this.cursorCoords=t),e}getDisplayCursorCoords(){return{x:this.cursorCoords[0],y:this.cursorCoords[1]}}getMapCursorCoords(){return this.displayCoordsToMapCoords(this.getDisplayCursorCoords())}getDisplayMouseCoords(){return{x:this.mouseCoords[0],y:this.mouseCoords[1]}}getMapMouseCoords(){return this.displayCoordsToMapCoords(this.getDisplayMouseCoords())}displayCoordsToMapCoords(t){return{x:t.x+this.game.player.x-re,y:t.y+this.game.player.y-ne}}mapCoordsToDisplayCoords(t){return{x:t.x-this.game.player.x+re,y:t.y-this.game.player.y+ne}}coordsToArray(t){return[t.x,t.y]}drawCursor(){if(!this.showCursor)return;let{x:t,y:e}=this.getDisplayCursorCoords();this.display.draw(t,e,"X","red","black");let r=this.getMapCursorCoords(),n=this.game.map.firstInterposingObstacleBetween(this.game.player,r);if(n){let t=this.mapCoordsToDisplayCoords(n),e=this.mapCoordsToDisplayCoords(this.game.player);ee()(e.x,e.y,t.x,t.y).slice(1).forEach(t=>{this.display.draw(t.x,t.y,"•","red","black")}),this.display.draw(t.x,t.y,"X","red","black")}}drawMap(){for(let t=-re;t<re+!0;t++)for(let e=-ne;e<ne+!0;e++){let r=t+re,n=e+ne,{x:i,y:a}=this.displayCoordsToMapCoords({x:r,y:n}),o=this.game.getCellContents(i,a),s=it[o.terrain];if(this.display.draw(r,n,lt.a.sample(s.symbols),s.fore,s.back),o.characters.length){let t=o.characters[0].getDisplayChar();this.display.draw(r,n,t.symbol,t.color,s.back)}else if(o.objects.length){let t=o.objects[0].getDisplayChar();this.display.draw(r,n,t.symbol,t.color,s.back)}}this.showInventory?(this.clearSidebar(),this.drawInventory()):this.showPokerView?(this.clearSidebar(),this.drawPokerSidebar()):(this.clearSidebar(),this.drawSidebar()),this.drawUtterances(),this.drawOverlay(),this.drawCursor()}drawMessageLog(){for(let t=0;t<85;t++)for(let e=0;e<10;e++)this.display.draw(t,e+45," ");this.messageLog.forEach((t,e)=>{this.display.drawText(0,45+e,t)})}drawUtterances(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);(e.length?e:this.game.characters).forEach(t=>{if(t.utterance){let e=this.mapCoordsToDisplayCoords({x:t.x,y:t.y});e.x<55&&(this.display.draw(e.x+1,e.y-1,"/","black","white"),this.display.drawText(e.x,e.y-2,"%c{black}%b{white}"+t.utterance))}})}clearSidebar(){for(let t=0;t<30;t++)for(let e=0;e<45;e++)this.display.draw(55+t,e," ")}getKeyboardCommands(){if(this.game.gameOver)return[];let t=this.game.player,e=[];if(e.push({key:"TAB",description:"select target"}),e.push({key:"SPACE",description:"wait"}),this.showInventory?e.push({key:"ESC",description:"hide inventory"}):this.showPokerView?e.push({key:"ESC",description:"hide poker"}):this.showCursor&&e.push({key:"ESC",description:"hide cursor"}),e.push({key:"I",description:this.showInventory?"hide inventory":"show inventory"}),t.canReload()&&e.push({key:"R",description:"reload "+t.getCurrentWeapon().name}),this.showInventory){let r=t.inventory[this.inventoryCursor];r&&r.isWeapon&&(r!==t.getCurrentWeapon()?e.push({key:"E",description:"equip "+r.name}):e.push({key:"E",description:"unequip "+r.name}))}let r=this.game.player.activePokerPlayerRole;if(r){if(r&&e.push({key:"Q",description:"quit poker game"}),e.push({key:"P",description:this.showPokerView?"hide poker":"show poker"}),r.isActivePlayer()){let t=r.getMinValidBet(),n=r.getMaxValidBet();this.tempBetValue=Math.max(t,this.tempBetValue),this.tempBetValue=Math.min(n,this.tempBetValue);let i=this.tempBetValue<n,a=this.tempBetValue>t;r.canReveal()&&e.push({key:"S",description:"show cards"}),r.canFold()&&e.push({key:"F",description:"fold"}),r.canCheck()&&e.push({key:"C",description:"check"}),r.canCall()&&(e.push({key:"B",description:`bet ${E(this.tempBetValue)}`}),i&&a?e.push({key:"+/-",description:"increase/decrease bet"}):i?e.push({key:"+",description:"increase bet"}):a&&e.push({key:"-",description:"decrease bet"}))}r&&r.isDealer()&&r.game.waitingForDealerAction&&e.push({key:"D",description:"deal"})}let n=this.getTarget();n&&t.canAttack(n)&&e.push({key:"A",description:`attack with ${t.getCurrentWeapon().name}`});let i=0,a=[];for(let e of t.getAllowedInteractions())i+=1,a.push({key:i.toString(),description:e.text});return e=e.concat(a.reverse()),e}drawAvailableCommands(){this.getKeyboardCommands().forEach((t,e)=>{this.drawSidebarRow(44-e,t.key+":",t.description)})}drawSidebar(){let t=this.game.player;this.drawSidebarRow(0,t.name),this.drawSidebarRow(2,"Health:",`${t.health}/${t.getMaxHealth()}`),this.drawSidebarRow(3,"Vigilance:",`${t.vigilance}/${t.getMaxVigilance()}`),this.drawSidebarRow(4,"Subterfuge:",`${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.drawSidebarRow(5,"Money:",E(t.cents)),this.drawSidebarRow(7,"Level "+t.level,`${t.xp}/${at[t.level+1]} xp`),this.drawSidebarRow(8,"Strength",t.strength),this.drawSidebarRow(9,"Quickness",t.quickness),this.drawSidebarRow(10,"Cunning",t.cunning),this.drawSidebarRow(11,"Guile",t.guile),this.drawSidebarRow(12,"Grit",t.grit);let e=t.getCurrentWeapon();this.drawWeaponSidebarRow(14,e),this.drawWeaponStatblock(15,e),this.drawAvailableCommands()}drawWeaponSidebarRow(t,e,r=!1){let n=e.isMelee?"[∞]":`[${e.currentAmmo}/${e.capacity}]`;this.drawSidebarRow(t,lt.a.capitalize(e.name),n,r)}drawCardSidebarRow(t,e,r,n,i=""){this.display.drawText(56,t,`${e} ${ie(r,n)}${i}`)}drawSidebarRow(t,e="",r="",n){let i=30-String(e).length-String(r).length-2;this.display.drawText(56,t,(n?"%c{white}":"")+String(e)+lt.a.repeat(" ",i)+String(r))}drawWeaponStatblock(t,e){let r=this.game.player.getDamageWithWeapon(e);this.drawSidebarRow(t,e.description),this.drawSidebarRow(t+1,"Draw delay:",`${e.drawDelay}`),this.drawSidebarRow(t+2,"Damage:",r.min===r.max?r.min:`${r.min}-${r.max}`),this.drawSidebarRow(t+3,"Range:",e.isMelee?"Melee":`[${[e.rangeModifiers[L],e.rangeModifiers[H],e.rangeModifiers[N],e.rangeModifiers[F]].join("/")}]`)}drawInventory(){let t=this.game.player;this.drawSidebarRow(0,"Inventory"),this.drawSidebarRow(2,"Wielding:"),this.drawWeaponSidebarRow(3,t.getCurrentWeapon()),this.drawSidebarRow(5,"Money:",E(t.cents)),this.drawSidebarRow(6,"Bullets:",t.bullets),this.drawSidebarRow(7,"Buckshot:",t.buckshot),this.drawSidebarRow(8,"Arrows:",t.arrows);let e=t.inventory[this.inventoryCursor];e&&(e.isWeapon?(this.drawWeaponSidebarRow(10,e,!0),this.drawWeaponStatblock(11,e)):(this.drawSidebarRow(10,lt.a.capitalize(e.name),"",!0),this.drawSidebarRow(11,e.description)));t.inventory.forEach((t,r)=>{t.isWeapon?this.drawWeaponSidebarRow(16+r,t,t===e):this.drawSidebarRow(16+r,lt.a.capitalize(t.name),"",t===e)}),this.drawAvailableCommands()}drawPokerPlayerStatblock(t,e){let r="";e.game.dealer===e&&(r=" (dealer)");let n=e.character.isPC||e.cardsRevealed,i="";n&&e.hole.length>=2&&(i=` (${e.bestHand().match})`),this.drawSidebarRow(t+0,e.character.name+r),this.drawSidebarRow(t+1,"Cash:",E(e.character.cents)),this.drawSidebarRow(t+2,"Current bet:",E(e.currentBet)),this.drawCardSidebarRow(t+3,"Cards:",e.hole,!n,i)}drawPokerSidebar(){let t=this.game.player.activePokerPlayerRole.game;this.drawSidebarRow(0,"Poker Game"),this.drawSidebarRow(2,"Blinds:",`${E(t.smallBlind)}/${E(t.bigBlind)}`),this.drawSidebarRow(3,"Pot:",`${E(t.getPot())}`),this.drawCardSidebarRow(4,"Common:",t.communityCards),t.players.forEach((t,e)=>{this.drawPokerPlayerStatblock(6+5*e,t)}),this.drawAvailableCommands()}drawOverlay(){let t=this.getMapMouseCoords(),e=this.getDisplayMouseCoords();this.display.drawText(0,0,`Turn: ${this.game.turn} Player: ${this.game.player.x},${this.game.player.y}`),this.display.drawText(0,1,`(Mouse) Map: ${t.x},${t.y} Display: ${e.x},${e.y}`),this.drawTooltip()}drawMuzzleFlash(){let t=!1;return this.game.getProjectiles().forEach(e=>{let r=ee()(e.source.x,e.source.y,e.target.x,e.target.y);r="bullets"===e.ammoType?r.slice(1,2):"buckshot"===e.ammoType?r.slice(1,3):[],r.forEach(e=>{let{x:r,y:n}=this.mapCoordsToDisplayCoords(e);this.display.draw(r,n,"*","orange","white"),t=!0})}),t}getTarget(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.game.getCharacters(t.x,t.y);return e.length?e[0]:null}drawTooltip(){let t=this.showCursor?this.getMapCursorCoords():this.getMapMouseCoords(),e=this.showCursor?this.getDisplayCursorCoords():this.getDisplayMouseCoords(),r=this.game.getCharacters(t.x,t.y);if(r.length){let t=r[0];if(this.display.drawText(e.x+2,e.y+0,t.name),this.display.drawText(e.x+2,e.y+1,`Health: ${t.health}/${t.getMaxHealth()}`),this.display.drawText(e.x+2,e.y+2,`Vigilance: ${t.vigilance}/${t.getMaxVigilance()}`),this.display.drawText(e.x+2,e.y+3,`Subterfuge: ${t.isPC?t.subterfuge:"?"}/${t.getMaxSubterfuge()}`),this.display.drawText(e.x+2,e.y+4,`Money: ${E(t.cents)}`),t.activePokerPlayerRole){this.display.drawText(e.x+2,e.y+5,`Current bet: ${E(t.activePokerPlayerRole.currentBet)}`);let r=t.isPC||t.activePokerPlayerRole.cardsRevealed;this.display.drawText(e.x+2,e.y+6,`Cards: ${ie(t.activePokerPlayerRole.hole,!r)}`)}}let n=this.game.getPokerGame(t.x,t.y);n&&(this.display.drawText(e.x+2,e.y,"Poker Game"),this.display.drawText(e.x+2,e.y+1,`Blinds: ${E(n.smallBlind)}/${E(n.bigBlind)}`),this.display.drawText(e.x+2,e.y+2,`Pot: ${E(n.getPot())}`),this.display.drawText(e.x+2,e.y+3,`Common: ${ie(n.communityCards)}`),n.unclaimedMoneyOnTable)}}(oe,ae);oe.log=se.log.bind(se);let ue=new class{constructor(t,e){this.game=t,this.view=e}handleEvent(t){switch(t.type){case"mousemove":return this.handleMouseMove(t);case"click":return this.handleMouseClick(t);case"keydown":return this.handleKeyDown(t)}}movePlayerOrCursor(t,e){if(this.view.showInventory&&0===t)this.view.moveInventoryCursor(e);else{if(!this.view.showCursor){let r=this.game.movePlayer(t,e);return r&&this.game.player.activePokerPlayerRole&&!this.view.showPokerView&&this.view.togglePokerView(),r}this.view.moveCursor(t,e)}}handleKeyDown(t){console.log(t.keyCode);let e=this.game.player,r=!1;if(!this.game.gameOver)switch(t.keyCode){case 32:this.game.playerPasses(),r=!0;break;case 33:r=this.movePlayerOrCursor(1,-1);break;case 34:r=this.movePlayerOrCursor(1,1);break;case 35:r=this.movePlayerOrCursor(-1,1);break;case 36:r=this.movePlayerOrCursor(-1,-1);break;case 37:r=this.movePlayerOrCursor(-1,0);break;case 38:r=this.movePlayerOrCursor(0,-1);break;case 39:r=this.movePlayerOrCursor(1,0);break;case 40:r=this.movePlayerOrCursor(0,1);break;case 27:this.view.clearControls();break;case 9:t.preventDefault(),this.view.cycleTargets();break;case 73:this.view.toggleInventory();break;case 80:this.view.togglePokerView();break;case 67:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCheck()&&(e.activePokerPlayerRole.check(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 65:let n=this.view.getTarget();n&&e.canAttack(n)&&(e.attack(this.view.getTarget()),r=!0);break;case 66:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCall()&&(e.activePokerPlayerRole.bet(this.view.tempBetValue),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 70:e.activePokerPlayerRole&&e.activePokerPlayerRole.canFold()&&(e.activePokerPlayerRole.fold(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 83:e.activePokerPlayerRole&&e.activePokerPlayerRole.canReveal()&&(e.activePokerPlayerRole.revealCards(),e.activePokerPlayerRole.game.activePlayer=e.activePokerPlayerRole.game.getNextPlayer(e.activePokerPlayerRole,!0),r=!0);break;case 68:e.activePokerPlayerRole&&e.activePokerPlayerRole.isDealer()&&e.activePokerPlayerRole.game.waitingForDealerAction&&(e.activePokerPlayerRole.deal(),r=!0);break;case 81:e.activePokerPlayerRole&&(e.activePokerPlayerRole.game.removePlayer(e.activePokerPlayerRole),this.view.showPokerView=!1);break;case 189:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCall()&&(this.view.tempBetValue-=100);break;case 187:e.activePokerPlayerRole&&e.activePokerPlayerRole.canCall()&&(this.view.tempBetValue+=100);break;case 69:if(this.view.showInventory){let t=e.inventory[this.view.inventoryCursor];t&&t.isWeapon&&(t!==e.getCurrentWeapon()?(e.equip(t),r=!0):(e.unequip(),r=!0))}break;case 82:e.canReload()&&(e.reload(),r=!0);break;case 49:e.getAllowedInteractions().length>=1&&e.getAllowedInteractions()[0].onInteract(e);break;case 50:e.getAllowedInteractions().length>=2&&e.getAllowedInteractions()[1].onInteract(e);break;case 51:e.getAllowedInteractions().length>=3&&e.getAllowedInteractions()[2].onInteract(e);break;case 52:e.getAllowedInteractions().length>=4&&e.getAllowedInteractions()[3].onInteract(e);break;case 53:e.getAllowedInteractions().length>=5&&e.getAllowedInteractions()[4].onInteract(e);break;case 54:e.getAllowedInteractions().length>=6&&e.getAllowedInteractions()[5].onInteract(e);break;case 55:e.getAllowedInteractions().length>=7&&e.getAllowedInteractions()[6].onInteract(e);break;case 56:e.getAllowedInteractions().length>=8&&e.getAllowedInteractions()[7].onInteract(e);break;case 57:e.getAllowedInteractions().length>=9&&e.getAllowedInteractions()[9].onInteract(e)}r&&this.game.playTurn(),this.view.drawMessageLog(),this.view.drawMap(),this.view.drawOverlay(),this.view.drawMuzzleFlash()&&setTimeout(()=>this.view.drawMap(),50)}handleMouseMove(t){let e=this.view.display.eventToPosition(t);this.view.updateMouseCoords(e)&&this.view.drawMap()}handleMouseClick(t){this.view.display.eventToPosition(t)}}(oe,se);window.addEventListener("keydown",ue),window.addEventListener("mousemove",ue),window.addEventListener("click",ue);let le=()=>{se.drawMap(),setTimeout(le,900)};le()}]);